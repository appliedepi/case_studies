<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>AppliedEpi cases studies - An Outbreak of Gastroenteritis in Stegen, Germany (ENG)</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>
<script src="../site_libs/quarto-nav/quarto-nav.js"></script><script src="../site_libs/quarto-nav/headroom.min.js"></script><script src="../site_libs/clipboard/clipboard.min.js"></script><script src="../site_libs/quarto-search/autocomplete.umd.js"></script><script src="../site_libs/quarto-search/fuse.min.js"></script><script src="../site_libs/quarto-search/quarto-search.js"></script><meta name="quarto:offset" content="../">
<link href="../pages/openxlsx2_tutorial-en_revised.html" rel="next">
<link href="../pages/tbe.html" rel="prev">
<link href="../images/logos/Applied_Epi_logo.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js"></script><script src="../site_libs/quarto-html/popper.min.js"></script><script src="../site_libs/quarto-html/tippy.umd.min.js"></script><script src="../site_libs/quarto-html/anchor.min.js"></script><link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script><link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script><link rel="stylesheet" href="../webex.css">
<link rel="stylesheet" href="webex.css">
</head>
<body class="nav-sidebar floating fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb">
<li class="breadcrumb-item"><a href="../pages/instructions.html">Case studies</a></li>
<li class="breadcrumb-item"><a href="../pages/stengen-en.html">An Outbreak of Gastroenteritis in Stegen, Germany (ENG)</a></li>
</ol></nav><a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="../index.html" class="sidebar-logo-link">
      <img src="../images/logos/Applied_Epi_logo.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none"></a>
    <div class="sidebar-title mb-0 py-0">
      <a href="../">AppliedEpi cases studies</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://twitter.com/appliedepi" rel="" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-twitter"></i></a>
    <a href="https://www.linkedin.com/company/appliedepi/" rel="" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-linkedin"></i></a>
    <a href="https://github.com/appliedepi/case_studies" rel="" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
    <div class="dropdown">
      <a href="" title="Share" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Share"><i class="bi bi-share"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
<li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://twitter.com/intent/tweet?url=%7Curl%7C">
              <i class="bi bi-bi-twitter pe-1"></i>
            Twitter
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.facebook.com/sharer/sharer.php?u=%7Curl%7C">
              <i class="bi bi-bi-facebook pe-1"></i>
            Facebook
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.linkedin.com/sharing/share-offsite/?url=%7Curl%7C">
              <i class="bi bi-bi-linkedin pe-1"></i>
            LinkedIn
            </a>
          </li>
      </ul>
</div>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
    </div>
      </div>
<div class="dropdown" id="languages-links-parent">
<button class="btn btn-primary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" id="languages-button"><i class="bi bi-globe2"></i></button><ul class="dropdown-menu" id="languages-links"><a class="dropdown-item" href="/es/pages/stengen-en.es.html" id="language-link-es">Español</a></ul>
</div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Welcome to our Case Study Repository!</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Case studies</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../pages/instructions.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Instructions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../pages/fulton.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Fulton (EN)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../pages/r_practical.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Descriptive analysis of the 2022 Mpox outbreak in Europe</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../pages/tbe.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">TBE - Linear regression (ENG)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../pages/stengen-en.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">An Outbreak of Gastroenteritis in Stegen, Germany (ENG)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../pages/openxlsx2_tutorial-en_revised.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Creating reports with R and MS Excel: a tutorial using the openxls2 package (EN)</span></a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title">An Outbreak of Gastroenteritis in Stegen, Germany (ENG)</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header><section id="overview" class="level2 unnumbered"><h2 class="unnumbered anchored" data-anchor-id="overview">Overview</h2>
<table class="table">
<colgroup>
<col style="width: 54%">
<col style="width: 45%">
</colgroup>
<thead><tr class="header">
<th><strong>Case study characteristics</strong></th>
<th style="text-align: left;"></th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Name:</td>
<td style="text-align: left;">An Outbreak of Gastroenteritis in Stegen, Germany</td>
</tr>
<tr class="even">
<td>Language:</td>
<td style="text-align: left;">English</td>
</tr>
<tr class="odd">
<td>Tool:</td>
<td style="text-align: left;">R;</td>
</tr>
<tr class="even">
<td>Location:</td>
<td style="text-align: left;">Germany</td>
</tr>
<tr class="odd">
<td>Scale:</td>
<td style="text-align: left;">Local</td>
</tr>
<tr class="even">
<td>Diseases:</td>
<td style="text-align: left;">GI</td>
</tr>
<tr class="odd">
<td>Keywords:</td>
<td style="text-align: left;">GI; Stratified analysis; R</td>
</tr>
<tr class="even">
<td>Technical complexity:</td>
<td style="text-align: left;">Intermediate</td>
</tr>
<tr class="odd">
<td>Methodological complexity:</td>
<td style="text-align: left;">Basic</td>
</tr>
</tbody>
</table></section><section id="section" class="level1"><h1></h1>
<p><strong><em>Authorship</em></strong><br>
Original authors: This case study was first designed by Alain Moren and Gilles Desve for EPIET. It is based on an investigation conducted by Anja Hauri, RKI, Berlin, 1998.<br>
Data source: Data is fictional and was inspired by <a href="https://linkinghub.elsevier.com/retrieve/pii/S0163-4453(23)00088-9">Nygren et al. Tick-borne encephalitis: acute clinical manifestations and severity in 581 cases from Germany, 2018-2020. Journal of Infection. 2023 Apr 1;86(4):369-75</a><br>
Adapted and modified by: Alicia Barrasa (EPIET), Ioannis Karagiannis (Public Health England - PHE), Giri Shankar (Public Health Wales), Niklas Willrich (Robert Koch Institute-RKI), Patrick Keating (Austrian Agency for Health and Food Safety-AGES), Alexander Spina (AGES), Daniel Gardiner (PHE), Lukas Richter (AGES), Liese Van Gompel (MedEPIET), Kostas Danis (MedEPIET) and Alberto Mateo Urdiales (Istituto Superiore di Sanità - ISS)<br></p>
<section id="instructions" class="level2"><h2 class="anchored" data-anchor-id="instructions">Instructions</h2>
<section id="getting-help" class="level3"><h3 class="anchored" data-anchor-id="getting-help">Getting Help</h3>
<p>There are several ways to get help:</p>
<ol type="1">
<li>Look for the “hints” and solutions (see below)</li>
<li>Post a question in <a href="www.community.appliedepi.org">Applied Epi Community</a> with reference to this case study</li>
</ol></section><section id="hints-and-solutions" class="level3"><h3 class="anchored" data-anchor-id="hints-and-solutions">Hints and Solutions</h3>
<p>Here is what the “helpers” look like:</p>
<!--Note that this is the way of including hints and explanations to the solutions -->
<!--
NOTE: Below is the hint (all within details tags collapsed)
-->
<details><summary style="text-decoration: underline; color: darkgreen;"><p><svg aria-hidden="true" role="img" viewbox="0 0 384 512" style="height:1em;width:0.75em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:gold;overflow:visible;position:relative;"><path d="M297.2 248.9C311.6 228.3 320 203.2 320 176c0-70.7-57.3-128-128-128S64 105.3 64 176c0 27.2 8.4 52.3 22.8 72.9c3.7 5.3 8.1 11.3 12.8 17.7l0 0c12.9 17.7 28.3 38.9 39.8 59.8c10.4 19 15.7 38.8 18.3 57.5H109c-2.2-12-5.9-23.7-11.8-34.5c-9.9-18-22.2-34.9-34.5-51.8l0 0 0 0c-5.2-7.1-10.4-14.2-15.4-21.4C27.6 247.9 16 213.3 16 176C16 78.8 94.8 0 192 0s176 78.8 176 176c0 37.3-11.6 71.9-31.4 100.3c-5 7.2-10.2 14.3-15.4 21.4l0 0 0 0c-12.3 16.8-24.6 33.7-34.5 51.8c-5.9 10.8-9.6 22.5-11.8 34.5H226.4c2.6-18.7 7.9-38.6 18.3-57.5c11.5-20.9 26.9-42.1 39.8-59.8l0 0 0 0 0 0c4.7-6.4 9-12.4 12.7-17.7zM192 128c-26.5 0-48 21.5-48 48c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-44.2 35.8-80 80-80c8.8 0 16 7.2 16 16s-7.2 16-16 16zm0 384c-44.2 0-80-35.8-80-80V416H272v16c0 44.2-35.8 80-80 80z"></path></svg> Click to read a hint</p>
</summary><p><br></p>
<p>Here you will see a helpful hint!</p>
<p><br></p>
</details><!--
NOTE: Below is the solution (all within details tags collapsed)
--><details><summary style="text-decoration: underline; color: red;"><p><svg aria-hidden="true" role="img" viewbox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:red;overflow:visible;position:relative;"><path d="M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg>Click to see the solution</p>
</summary><p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>ebola_linelist <span class="sc">%&gt;%</span> </span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>    age <span class="sc">&gt;</span> <span class="dv">25</span>,</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>    district <span class="sc">==</span> <span class="st">"Bolo"</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Here is more explanation about why the solution works.</p>
<p><br></p>
</details><!--
NOTE: End of solution
--><!-- NOTE ABOUT SOLUTIONS: When using {webexercises} the solution will be automatically highlighted, so you can change (if appropriate) the feature "Click here to see the solution" to  "Click here to see the explanation of the solution" --><section id="posting-a-question-in-the-community-forum" class="level4"><h4 class="anchored" data-anchor-id="posting-a-question-in-the-community-forum">Posting a question in the Community Forum</h4>
<p>… description here about posting in Community… TO BE COMPLETED BY APPLIED EPI</p>
</section><section id="terms-of-use" class="level4"><h4 class="anchored" data-anchor-id="terms-of-use">Terms of Use</h4>
<p><strong>Disclaimer</strong>: The information presented in this exercise and the associated data files have been deliberately changed so as to facilitate the acquisition of the learning objectives for fellows of EPIET, EUPHEM and EPIET-associated programmes. This case study was first introduced in 2022 (see Copyright and Licence agreement for more information).</p>
<p>You are free:</p>
<ul>
<li>to Share: to copy and distribute the work</li>
<li>to Remix: to adapt and build upon the material</li>
</ul>
<p>Under the following conditions:</p>
<ul>
<li><p>Attribution: You must attribute the work in the manner specified by the author or licensor (but not in any way that suggests that they endorse you or your use of the work). The best way to do this is to keep as it is the list of contributors: sources, authors and reviewers.</p></li>
<li><p>Share Alike: If you alter, transform, or build upon this work, you may distribute the resulting work only under the same or similar license to this one. Your changes must be documented. Under that condition, you are allowed to add your name to the list of contributors.</p></li>
<li><p>Notification: If you use the work in the manner specified by the author or licensor, <a href="mailto:Walterj@rki.de">Walter@rki.de</a></p></li>
<li><p>You cannot sell this work alone but you can use it as part of a teaching.</p></li>
</ul>
<p>With the understanding that:</p>
<ul>
<li><p>Waiver: Any of the above conditions can be waived if you get permission from the copyright holder.</p></li>
<li><p>Public Domain: Where the work or any of its elements is in the public domain under applicable law, that status is in no way affected by the license.</p></li>
<li>
<p>Other Rights: In no way are any of the following rights affected by the license:</p>
<ul>
<li><p>Your fair dealing or fair use rights, or other applicable copyright exceptions and limitations;</p></li>
<li><p>The author’s moral rights;</p></li>
<li><p>Rights other persons may have either in the work itself or in how the work is used, such as publicity or privacy rights.</p></li>
</ul>
</li>
<li><p>Notice: For any reuse or distribution, you must make clear to others the license terms of this work by keeping together this work and the current license.</p></li>
</ul>
<p>This licence is based on <a href="http://creativecommons.org/licenses/by-sa/3.0/" class="uri">http://creativecommons.org/licenses/by-sa/3.0/</a></p>
</section></section><section id="feedback-suggestions" class="level3"><h3 class="anchored" data-anchor-id="feedback-suggestions">Feedback &amp; suggestions</h3>
<ul>
<li>You can write feedback and suggestions on this case study at the <a href="https://github.com/appliedepi/case_studies">GitHub issues page</a>
</li>
<li>Alternatively email us at: <a href="mailto:contact@appliedepi.org">contact@appliedepi.org</a>
</li>
</ul>
<div style="page-break-after: always;"></div>
</section><section id="version-and-revisions" class="level3"><h3 class="anchored" data-anchor-id="version-and-revisions">Version and revisions</h3>
<p>Write date of first version</p>
<p>Write any revisions made to the case study</p>
<table class="table">
<colgroup>
<col style="width: 29%">
<col style="width: 44%">
<col style="width: 26%">
</colgroup>
<thead><tr class="header">
<th>Date</th>
<th style="text-align: left;">Changes made</th>
<th style="text-align: right;">Author</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>2015</td>
<td style="text-align: left;">The case study has been divided in two parts: the first includes descriptive, univariable and stratified analysis as pre-module homework; the second includes logistic and binary regression (not shown here). Unnecessary toponymes were removed.</td>
<td style="text-align: right;">Alicia Barrasa (EPIET) and Ioannis Karagiannis (Publich Health England-PHE)</td>
</tr>
<tr class="even">
<td>2017</td>
<td style="text-align: left;">Questions were rephrased to reflect real life scenarios (rather than academic exercise)</td>
<td style="text-align: right;">Alicia Barrasa (EPIET) and Giri Shankar (Public Health Wales-PHW)</td>
</tr>
<tr class="odd">
<td>2017</td>
<td style="text-align: left;">The case study was adapted to include the help on R</td>
<td style="text-align: right;">Niklas Willrich (Robert Koch Institute-RKI), Patrick Keating (Austrian Agency for Health and Food Safety-AGES) and Alexander Spina (AGES)</td>
</tr>
<tr class="even">
<td>2017</td>
<td style="text-align: left;">Contribution to the R code</td>
<td style="text-align: right;">Daniel Gardiner (Public Health England-PHE) and Lukas Richter (AGES)</td>
</tr>
<tr class="odd">
<td>2022</td>
<td style="text-align: left;">Minor revisions to the R code and explanations</td>
<td style="text-align: right;"></td>
</tr>
<tr class="even">
<td>2023</td>
<td style="text-align: left;">Major revision of the R code. R code was simplified and R tidyverse code was implemented</td>
<td style="text-align: right;">Liese Van Gompel (MedEPIET)</td>
</tr>
<tr class="odd">
<td>2024</td>
<td style="text-align: left;">Revision of the R code, i.e. use of EpiStas package for univariable and multivariable analysis, simplification and harmonisation of the R code</td>
<td style="text-align: right;">Kostas Danis (MediPIET)</td>
</tr>
<tr class="even">
<td>2017</td>
<td style="text-align: left;">Revision of content, structure, R code and adaptation of format to Applied Epi’s template of case studies</td>
<td style="text-align: right;">Alberto Mateo Urdiales (ISS)</td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
</section></section><section id="guidance" class="level2"><h2 class="anchored" data-anchor-id="guidance">Guidance</h2>
<section id="objectives-of-this-case-study" class="level3"><h3 class="anchored" data-anchor-id="objectives-of-this-case-study">Objectives of this case study</h3>
<p>At the end of this case study, participants should:</p>
<ul>
<li><p>know and be able to perform the fundamental steps of a descriptive statistical analysis of a foodborne outbreak (including quantitative assessment (frequency distributions, missing values, means/medians/modes, quartiles/SDs) and visualization of the data (histogram, boxplot))</p></li>
<li><p>be able to perform univariate statistical analysis to identify potential vehicles of a foodborne outbreak (including risk ratios and/or odds ratios, depending on the design)</p></li>
<li><p>know why and how stratification can be conducted in datasets related to an outbreak investigation</p></li>
<li><p>be able to conduct a stratified analysis with respect to potential risk factors and confounders/effect modifiers</p></li>
</ul></section><section id="previous-level-of-expertise-assumed" class="level3"><h3 class="anchored" data-anchor-id="previous-level-of-expertise-assumed">Previous level of expertise assumed</h3>
<p>Participants are expected to be familiar with data management and basic analysis in R.</p>
</section><section id="preparation-for-the-case-study" class="level3"><h3 class="anchored" data-anchor-id="preparation-for-the-case-study">Preparation for the case study</h3>
<ol type="1">
<li><p>Download folder named <em>stengen_mva</em> and extract contents in the local laptop</p></li>
<li><p>Create an Rstudio project in the folder <em>stengen_mva</em> If you are unsure on how to do that, read the EpiRhandbook Chapter on <a href="https://epirhandbook.com/en/new_pages/r_projects.html">R projects</a></p></li>
<li><p>Inside the folder <em>stengen_mva</em>: Subfolder “data” contains a raw data file named <em>tira.csv</em>. This is the only data file you will use in this case study. In the same folder you can find the <strong>data dictionary</strong> with a description of the dataframe variables.</p></li>
<li><p>Subfolder scripts should be used to save any scripts related to the analysis. Inside “backup” you will find a solution script with the code of the case study named <em>stengen_analysis_backup.R</em>.</p></li>
<li><p>Subfolder “outputs” could be used to store all outputs (tables, graphs, documents) that are the result of the analysis</p></li>
</ol></section></section></section><section id="part-1---scenario-study-design-and-analysis-plan" class="level1"><h1><strong>Part 1 - Scenario, study design and analysis plan</strong></h1>
<section id="introduction" class="level2"><h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>On 26 June 1998, the St Sebastian High School in Stegen (school A), Germany, celebrated a graduation party, where 250 to 350 participants were expected. Attendees included graduates from that school, their families and friends, teachers, 12th grade students and some graduates from a nearby school (school B).</p>
<p>A self-service party buffet was supplied by a commercial caterer in Freiburg. Food was prepared on the day of the party and transported in a refrigerated van to the school.</p>
<p>Festivities started with a dinner buffet which opened from 8:30 pm onwards and were followed by a dessert buffet offered from 10 pm. The party and the buffet extended late during the night and alcoholic beverages were quite popular. All agreed it was a party to be remembered.</p>
</section><section id="the-alert" class="level2"><h2 class="anchored" data-anchor-id="the-alert">The alert</h2>
<p>On 2nd July 1998, the Freiburg local health office reported to the Robert Koch Institute (RKI) in Berlin the occurrence of many cases of gastroenteritis following the graduation party described above. More than 100 cases were suspected among attendees and some of them were admitted to nearby hospitals. Sick people suffered from fever, nausea, diarrhoea and vomiting that lasted for several days. Most believed that the tiramisu consumed at dinner was responsible for their illness. Salmonella Enteritidis was isolated from 19 stool samples.</p>
<p>The Freiburg health office sent a team to investigate the kitchen facilities of the caterer. Food preparation procedures were reviewed. Food samples, except tiramisu (none was left over), were sent to the laboratory of Freiburg University. Microbiological analyses were performed on samples of the following: brown chocolate mousse, caramel cream, remoulade sauce, yoghurt dill sauce and 10 raw eggs.</p>
<p>The Freiburg health office requested help from the RKI in the investigation to assess the magnitude of the outbreak and identify potential vehicle(s) and risk factors for transmission in order to better control the outbreak.</p>
</section><section id="the-study" class="level2"><h2 class="anchored" data-anchor-id="the-study">The study</h2>
<p>Cases were defined as any person who had attended the party at St Sebastian High School who suffered from diarrhoea (≥ 3 loose stool for 24 hours) between 27 June and 29 June 1998; or who suffered from at least three of the following symptoms: vomiting, fever ≥38.5°C, nausea, abdominal pain, and headache.</p>
<p>Students from both schools attending the party were asked through phone interviews to provide names of persons who attended the party.</p>
<p>Overall, 291 responded to enquiries and 103 cases were identified (attack rate: 35%). Among these cases, 84 (82%) received medical treatment and four were admitted to hospitals. Attack rates by age group were 36.6% for persons &lt;20 years, 32.1% for persons 20 to 29 years, and 36.8% for persons older than 29 years.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="../images/stengen/figure1.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figure 1: Cases of gastroenteritis by time of onset among attendees of a high-school graduation ceremony (n=103), Germany, June 1998</figcaption></figure>
</div>
<p><strong>QUESTION 1</strong>. What would be your hypothesis concerning the source of the outbreak?</p>
<details><summary style="text-decoration: underline; color: red;"><p><svg aria-hidden="true" role="img" viewbox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:red;overflow:visible;position:relative;"><path d="M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg>Click to see the solution</p>
</summary><p><br></p>
<p>The shape of the epidemic curve and the attendance to a single event (a buffet) pointed towards a foodborne outbreak related to a <strong>point source of infection.</strong></p>
<p><br></p>
</details><p><strong>QUESTION 2</strong>. What study design would you choose to test this hypothesis?</p>
<details><summary style="text-decoration: underline; color: red;"><p><svg aria-hidden="true" role="img" viewbox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:red;overflow:visible;position:relative;"><path d="M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg>Click to see the solution</p>
</summary><p><br></p>
<p>Using the updated list of attendants, a <strong>retrospective cohort study</strong> including all attendants to the party (that could be reached) was conducted. All had received a standard questionnaire asking for demographic information, signs, symptoms and duration, admission to hospital, and food and beverages consumption at the party including amount consumed. Food-specific attack rates were computed for more than 50 food items and beverages.</p>
<p><br></p>
</details><p><strong>Question 3</strong>. What would your overall plan of analysis be?</p>
<details><summary style="text-decoration: underline; color: red;"><p><svg aria-hidden="true" role="img" viewbox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:red;overflow:visible;position:relative;"><path d="M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg>Click to see the solution</p>
</summary><p><br></p>
<p><strong>Perform data cleaning</strong></p>
<ul>
<li><p>For each variable, look at the range, unexpected and missing values.</p></li>
<li><p>Correct data using the original forms used if needed</p></li>
</ul>
<p><strong>Describe each variable</strong></p>
<ul>
<li><p>For each variable, describe frequency distributions including missing values and, if needed, means, median, modes, quartiles, standard deviation, outliers</p></li>
<li><p>Make appropriate histograms and box plots</p></li>
<li><p>Choose relevant characteristics to describe the population</p></li>
</ul>
<p><strong>Identify the outbreak vehicle if any</strong></p>
<ul>
<li><p>Calculate food-specific attack rates</p></li>
<li><p>Look at the proportions of cases exposed</p></li>
<li><p>Chose the appropriate measure of association</p></li>
<li><p>Chose the appropriate statistical tests and significance level</p></li>
<li><p>Calculate the percentages of cases exposed to each exposure</p></li>
<li><p>Search for any dose-response relationship if appropriate</p></li>
<li><p>Interpret the results</p></li>
</ul>
<p><strong>Perform a stratified analysis</strong></p>
<ul>
<li><p>Identify the variables that are potential effect modifiers (EM) and confounders</p></li>
<li><p>Design appropriate stratification tables</p></li>
<li><p>Stratify on each level taken by the EM and confounders</p></li>
<li><p>Compute appropriate measurements to identify confounding and effect modification</p></li>
<li><p>Conduct appropriate statistical tests</p></li>
<li><p>Interpret the results</p></li>
</ul>
<p><strong>Perform a multivariable analysis</strong></p>
<ul>
<li>This will be discussed during the module.</li>
</ul>
<p><br></p>
</details></section></section><section id="part-2---descriptive-univariate-and-stratified-analysis-with-r" class="level1"><h1><strong>Part 2 - Descriptive, univariate and stratified analysis with R</strong></h1>
<section id="step-1-set-up" class="level3"><h3 class="anchored" data-anchor-id="step-1-set-up"><strong>Step 1: Set up</strong></h3>
<section id="step-1.1-create-a-new-r-script" class="level4"><h4 class="anchored" data-anchor-id="step-1.1-create-a-new-r-script">Step 1.1: Create a new R script</h4>
<p>Once you have created an Rproject inside the “stengen_mva” folder (as specified in the second point of the section <strong>Preparation for the case study</strong>). Create a new script with the name <em>stengen_analysis</em> and save it in the subfolder “scripts”. If you are familiar with Rmarkdown, you may decide to use this type of file instead of a standard R script.</p>
</section><section id="step-1.2-define-r-language" class="level4"><h4 class="anchored" data-anchor-id="step-1.2-define-r-language">Step 1.2: Define R language</h4>
<p>Depending on where you are and how you carried out R installation, your language “locale” might be different from the language of the graphs that you want to produce. For example, a french person might have a french “locale”. If that is the case, when creating a graph by day of the week, Monday will be displayed as “lundi”. If that french person wants to create an English report, as for this case study, the language “locale” should be changed.</p>
<p><strong>Task</strong>: Ensure your “locale” is in English and change it into English if it is not. If you don’t know how to do this try finding it online (searching for online help is an important skill for R users!). Otherwise, see the solution below</p>
<details><summary style="text-decoration: underline; color: red;"><p><svg aria-hidden="true" role="img" viewbox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:red;overflow:visible;position:relative;"><path d="M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg>Click to see a solution (try it yourself first!)</p>
</summary><p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># To see your language locale</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">Sys.getlocale</span>()</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co"># To change it into English</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="fu">Sys.setlocale</span>(<span class="st">"LC_ALL"</span>, <span class="st">"English"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
</details></section><section id="step-1.3-installload-packages" class="level4"><h4 class="anchored" data-anchor-id="step-1.3-installload-packages">Step 1.3: Install/load packages</h4>
<p>Install and load the following packages: rio, skimr, janitor, gtsummary, rstatix, epitools, epiR, epikit and tidyverse.</p>
<p>You can find more about installing/loading packages in the <a href="https://epirhandbook.com/en/new_pages/basics.html#packages">Packages</a> section of the EpiRhandbook.</p>
<details><summary style="text-decoration: underline; color: darkgreen;"><p><svg aria-hidden="true" role="img" viewbox="0 0 384 512" style="height:1em;width:0.75em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:gold;overflow:visible;position:relative;"><path d="M297.2 248.9C311.6 228.3 320 203.2 320 176c0-70.7-57.3-128-128-128S64 105.3 64 176c0 27.2 8.4 52.3 22.8 72.9c3.7 5.3 8.1 11.3 12.8 17.7l0 0c12.9 17.7 28.3 38.9 39.8 59.8c10.4 19 15.7 38.8 18.3 57.5H109c-2.2-12-5.9-23.7-11.8-34.5c-9.9-18-22.2-34.9-34.5-51.8l0 0 0 0c-5.2-7.1-10.4-14.2-15.4-21.4C27.6 247.9 16 213.3 16 176C16 78.8 94.8 0 192 0s176 78.8 176 176c0 37.3-11.6 71.9-31.4 100.3c-5 7.2-10.2 14.3-15.4 21.4l0 0 0 0c-12.3 16.8-24.6 33.7-34.5 51.8c-5.9 10.8-9.6 22.5-11.8 34.5H226.4c2.6-18.7 7.9-38.6 18.3-57.5c11.5-20.9 26.9-42.1 39.8-59.8l0 0 0 0 0 0c4.7-6.4 9-12.4 12.7-17.7zM192 128c-26.5 0-48 21.5-48 48c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-44.2 35.8-80 80-80c8.8 0 16 7.2 16 16s-7.2 16-16 16zm0 384c-44.2 0-80-35.8-80-80V416H272v16c0 44.2-35.8 80-80 80z"></path></svg> Click to read a hint</p>
</summary><p><br></p>
<p>You may end up using a long list of packages. Unfortunately different packages have functions with the same name. For example, the package {dplyr} (already installed with {tidyverse}) has a function called <code>select()</code> which we frequently use to subset columns of a data frame. But other packages such as {MASS} do also have a function called <code>select()</code>. This could create headaches if you want to subset columns using dplyr’s <code>select()</code> but R thinks you’re calling MASS’s <code>select()</code> (we call this masking - <code>dplyr::select()</code> is masked by <code>MASS::select()</code>). Given that you are more likely to use functions from {tidyverse}, ensure that this is the last package in your <code>p_load()</code> list so that functions from {tidyverse} (including {dplyr} functions) will always “prevail”.</p>
<p><br></p>
</details><details><summary style="text-decoration: underline; color: red;"><p><svg aria-hidden="true" role="img" viewbox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:red;overflow:visible;position:relative;"><path d="M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg>Click to see a solution (try it yourself first!)</p>
</summary><p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensures the package "pacman" is installed</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">"pacman"</span>)) {</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>     <span class="fu">install.packages</span>(<span class="st">"pacman"</span>) }</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  rio,             <span class="co"># to import datasets</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>  skimr,           <span class="co"># for displaying your data</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>  janitor,         <span class="co"># a package for data cleaning</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>  gtsummary,       <span class="co"># to create frequency tables</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>  rstatix,         <span class="co"># to generate summary statistics</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>  epitools,        <span class="co"># for univariable analysis</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>  epikit,          <span class="co"># for creating age categories</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>  epiR,            <span class="co"># for the adjusted risk ratios across strata</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>  tidyverse  <span class="co"># data management and visualization</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
</details></section></section><section id="step-2-import-and-explore-data" class="level3"><h3 class="anchored" data-anchor-id="step-2-import-and-explore-data"><strong>Step 2: Import and explore data</strong></h3>
<section id="step-2.1-import-the-data" class="level4"><h4 class="anchored" data-anchor-id="step-2.1-import-the-data">Step 2.1: Import the data</h4>
<p><strong>Task</strong> Import the data frame called “tira.csv” inside the “data” subfolder.</p>
<details><summary style="text-decoration: underline; color: darkgreen;"><p><svg aria-hidden="true" role="img" viewbox="0 0 384 512" style="height:1em;width:0.75em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:gold;overflow:visible;position:relative;"><path d="M297.2 248.9C311.6 228.3 320 203.2 320 176c0-70.7-57.3-128-128-128S64 105.3 64 176c0 27.2 8.4 52.3 22.8 72.9c3.7 5.3 8.1 11.3 12.8 17.7l0 0c12.9 17.7 28.3 38.9 39.8 59.8c10.4 19 15.7 38.8 18.3 57.5H109c-2.2-12-5.9-23.7-11.8-34.5c-9.9-18-22.2-34.9-34.5-51.8l0 0 0 0c-5.2-7.1-10.4-14.2-15.4-21.4C27.6 247.9 16 213.3 16 176C16 78.8 94.8 0 192 0s176 78.8 176 176c0 37.3-11.6 71.9-31.4 100.3c-5 7.2-10.2 14.3-15.4 21.4l0 0 0 0c-12.3 16.8-24.6 33.7-34.5 51.8c-5.9 10.8-9.6 22.5-11.8 34.5H226.4c2.6-18.7 7.9-38.6 18.3-57.5c11.5-20.9 26.9-42.1 39.8-59.8l0 0 0 0 0 0c4.7-6.4 9-12.4 12.7-17.7zM192 128c-26.5 0-48 21.5-48 48c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-44.2 35.8-80 80-80c8.8 0 16 7.2 16 16s-7.2 16-16 16zm0 384c-44.2 0-80-35.8-80-80V416H272v16c0 44.2-35.8 80-80 80z"></path></svg> Click to read a hint</p>
</summary><p><br></p>
<p>If you are working within a project, finding the path to the dataframe should be relatively straightfoward. A “.csv” file is a “Comma-separated Values” file. You can import this dataframe using the <code>read.csv()</code> which comes already pre-installed in R. However, we recommend that you use the <strong><code>import()</code></strong> function from {rio} because, as you may remember, this function will recognise the file type and import it whether the file is from R, Stata, excel or many others. If you have any doubts about importing review the <a href="https://epirhandbook.com/en/new_pages/importing.html#import-data">Import and export</a> chapter of the EpiRhandbook. <br></p>
</details><details><summary style="text-decoration: underline; color: red;"><p><svg aria-hidden="true" role="img" viewbox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:red;overflow:visible;position:relative;"><path d="M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg>Click to see a solution (try it yourself first!)</p>
</summary><p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Import the dataset 'tira.csv'  </span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>tira_raw <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="st">"data/tira.csv"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
</details></section><section id="step-2.2-explore-the-data" class="level4"><h4 class="anchored" data-anchor-id="step-2.2-explore-the-data">Step 2.2: Explore the data</h4>
<p><strong>Task</strong>: Explore the data trying to answer the following questions:</p>
<div class="webex-check">
QUESTION: How many rows and columns does the dataframe have?
<div id="radio_MSUSFNCGSQ" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_MSUSFNCGSQ" value=""><span>522 and 8</span></label><label><input type="radio" autocomplete="off" name="radio_MSUSFNCGSQ" value=""><span>2 and 345</span></label><label><input type="radio" autocomplete="off" name="radio_MSUSFNCGSQ" value="answer"><span>291 and 20</span></label><label><input type="radio" autocomplete="off" name="radio_MSUSFNCGSQ" value=""><span>600 and 23</span></label>
</div>
</div>
<div class="webex-check">
QUESTION: How many cases have ‘age’ missing?
<div id="radio_QDDGYCDTZH" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_QDDGYCDTZH" value="answer"><span>8</span></label><label><input type="radio" autocomplete="off" name="radio_QDDGYCDTZH" value=""><span>14</span></label><label><input type="radio" autocomplete="off" name="radio_QDDGYCDTZH" value=""><span>1</span></label><label><input type="radio" autocomplete="off" name="radio_QDDGYCDTZH" value=""><span>0</span></label>
</div>
</div>
<div class="webex-check">
QUESTION: What is the class of the column ‘salmon’?
<div id="radio_PWWSUOKSLC" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_PWWSUOKSLC" value=""><span>factor</span></label><label><input type="radio" autocomplete="off" name="radio_PWWSUOKSLC" value="answer"><span>integer</span></label><label><input type="radio" autocomplete="off" name="radio_PWWSUOKSLC" value=""><span>character</span></label><label><input type="radio" autocomplete="off" name="radio_PWWSUOKSLC" value=""><span>logical</span></label>
</div>
</div>
<div class="webex-check">
QUESTION: What percentage of attendees ate tomato?
<div id="radio_ONREPYUSDA" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_ONREPYUSDA" value=""><span>83%</span></label><label><input type="radio" autocomplete="off" name="radio_ONREPYUSDA" value=""><span>70%</span></label><label><input type="radio" autocomplete="off" name="radio_ONREPYUSDA" value="answer"><span>29%</span></label><label><input type="radio" autocomplete="off" name="radio_ONREPYUSDA" value=""><span>6%</span></label>
</div>
</div>
<div class="webex-check">
QUESTION: What is the class of the column ‘dateonset’?
<div id="radio_PYEXOURDGP" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_PYEXOURDGP" value=""><span>factor</span></label><label><input type="radio" autocomplete="off" name="radio_PYEXOURDGP" value=""><span>character</span></label><label><input type="radio" autocomplete="off" name="radio_PYEXOURDGP" value="answer"><span>date</span></label><label><input type="radio" autocomplete="off" name="radio_PYEXOURDGP" value=""><span>numeric</span></label>
</div>
</div>
<div class="webex-check">
QUESTION: How are missing categorised in the variables ‘salmon’, ‘horseradish’ and ‘pork’?
<div id="radio_ZPDJYTMCPF" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_ZPDJYTMCPF" value=""><span>As 'NA'</span></label><label><input type="radio" autocomplete="off" name="radio_ZPDJYTMCPF" value=""><span>As empy spaces</span></label><label><input type="radio" autocomplete="off" name="radio_ZPDJYTMCPF" value=""><span>With an 'Unknown' cateogry</span></label><label><input type="radio" autocomplete="off" name="radio_ZPDJYTMCPF" value="answer"><span>With the number 9</span></label>
</div>
</div>
<details><summary style="text-decoration: underline; color: darkgreen;"><p><svg aria-hidden="true" role="img" viewbox="0 0 384 512" style="height:1em;width:0.75em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:gold;overflow:visible;position:relative;"><path d="M297.2 248.9C311.6 228.3 320 203.2 320 176c0-70.7-57.3-128-128-128S64 105.3 64 176c0 27.2 8.4 52.3 22.8 72.9c3.7 5.3 8.1 11.3 12.8 17.7l0 0c12.9 17.7 28.3 38.9 39.8 59.8c10.4 19 15.7 38.8 18.3 57.5H109c-2.2-12-5.9-23.7-11.8-34.5c-9.9-18-22.2-34.9-34.5-51.8l0 0 0 0c-5.2-7.1-10.4-14.2-15.4-21.4C27.6 247.9 16 213.3 16 176C16 78.8 94.8 0 192 0s176 78.8 176 176c0 37.3-11.6 71.9-31.4 100.3c-5 7.2-10.2 14.3-15.4 21.4l0 0 0 0c-12.3 16.8-24.6 33.7-34.5 51.8c-5.9 10.8-9.6 22.5-11.8 34.5H226.4c2.6-18.7 7.9-38.6 18.3-57.5c11.5-20.9 26.9-42.1 39.8-59.8l0 0 0 0 0 0c4.7-6.4 9-12.4 12.7-17.7zM192 128c-26.5 0-48 21.5-48 48c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-44.2 35.8-80 80-80c8.8 0 16 7.2 16 16s-7.2 16-16 16zm0 384c-44.2 0-80-35.8-80-80V416H272v16c0 44.2-35.8 80-80 80z"></path></svg> Click to read a hint</p>
</summary><p><br></p>
<p>An efficient way to explore data is to use the function <code>skim()</code> from the {skimr} package, as it gives you all the information needed with only one command. Of course, there are several alternatives. You can also have a look at <code>glimpse()</code> from {dplyr}, for example. An easy way to explore single variables that have categories is to use <code>tabyl()</code> from {janitor} <br></p>
</details><details><summary style="text-decoration: underline; color: red;"><p><svg aria-hidden="true" role="img" viewbox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:red;overflow:visible;position:relative;"><path d="M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg>Click to see a solution (try it yourself first!)</p>
</summary><p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Inspect your dataset and generate basic statistics using the skim function  </span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">skim</span>(tira_raw)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<caption>Data summary</caption>
<tbody>
<tr class="odd">
<td style="text-align: left;">Name</td>
<td style="text-align: left;">tira_raw</td>
</tr>
<tr class="even">
<td style="text-align: left;">Number of rows</td>
<td style="text-align: left;">291</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Number of columns</td>
<td style="text-align: left;">20</td>
</tr>
<tr class="even">
<td style="text-align: left;">_______________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Column type frequency:</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">Date</td>
<td style="text-align: left;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">numeric</td>
<td style="text-align: left;">19</td>
</tr>
<tr class="even">
<td style="text-align: left;">________________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Group variables</td>
<td style="text-align: left;">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: Date</strong></p>
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 17%">
<col style="width: 12%">
<col style="width: 17%">
<col style="width: 13%">
<col style="width: 13%">
<col style="width: 13%">
<col style="width: 11%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: left;">min</th>
<th style="text-align: left;">max</th>
<th style="text-align: left;">median</th>
<th style="text-align: right;">n_unique</th>
</tr></thead>
<tbody><tr class="odd">
<td style="text-align: left;">dateonset</td>
<td style="text-align: right;">160</td>
<td style="text-align: right;">0.45</td>
<td style="text-align: left;">1998-06-26</td>
<td style="text-align: left;">1998-07-09</td>
<td style="text-align: left;">1998-06-28</td>
<td style="text-align: right;">11</td>
</tr></tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 12%">
<col style="width: 8%">
<col style="width: 12%">
<col style="width: 6%">
<col style="width: 5%">
<col style="width: 2%">
<col style="width: 4%">
<col style="width: 3%">
<col style="width: 5%">
<col style="width: 4%">
<col style="width: 35%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">sd</th>
<th style="text-align: right;">p0</th>
<th style="text-align: right;">p25</th>
<th style="text-align: right;">p50</th>
<th style="text-align: right;">p75</th>
<th style="text-align: right;">p100</th>
<th style="text-align: left;">hist</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">uniquekey</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">146.00</td>
<td style="text-align: right;">84.15</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">73.5</td>
<td style="text-align: right;">146</td>
<td style="text-align: right;">218.5</td>
<td style="text-align: right;">291</td>
<td style="text-align: left;">▇▇▇▇▇</td>
</tr>
<tr class="even">
<td style="text-align: left;">ill</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">0.35</td>
<td style="text-align: right;">0.48</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">▇▁▁▁▅</td>
</tr>
<tr class="odd">
<td style="text-align: left;">sex</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">0.52</td>
<td style="text-align: right;">0.50</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">▇▁▁▁▇</td>
</tr>
<tr class="even">
<td style="text-align: left;">age</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">0.97</td>
<td style="text-align: right;">26.66</td>
<td style="text-align: right;">14.33</td>
<td style="text-align: right;">12</td>
<td style="text-align: right;">18.0</td>
<td style="text-align: right;">20</td>
<td style="text-align: right;">27.0</td>
<td style="text-align: right;">80</td>
<td style="text-align: left;">▇▁▂▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">tira</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.98</td>
<td style="text-align: right;">0.42</td>
<td style="text-align: right;">0.49</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">▇▁▁▁▆</td>
</tr>
<tr class="even">
<td style="text-align: left;">tportion</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.98</td>
<td style="text-align: right;">0.67</td>
<td style="text-align: right;">0.90</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">3</td>
<td style="text-align: left;">▇▃▁▂▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">wmousse</td>
<td style="text-align: right;">14</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">0.26</td>
<td style="text-align: right;">0.44</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">▇▁▁▁▃</td>
</tr>
<tr class="even">
<td style="text-align: left;">dmousse</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0.99</td>
<td style="text-align: right;">0.39</td>
<td style="text-align: right;">0.49</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">▇▁▁▁▅</td>
</tr>
<tr class="odd">
<td style="text-align: left;">mportion</td>
<td style="text-align: right;">12</td>
<td style="text-align: right;">0.96</td>
<td style="text-align: right;">0.65</td>
<td style="text-align: right;">0.90</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">3</td>
<td style="text-align: left;">▇▂▁▂▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">beer</td>
<td style="text-align: right;">20</td>
<td style="text-align: right;">0.93</td>
<td style="text-align: right;">0.39</td>
<td style="text-align: right;">0.49</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">▇▁▁▁▅</td>
</tr>
<tr class="odd">
<td style="text-align: left;">redjelly</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">0.27</td>
<td style="text-align: right;">0.45</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">▇▁▁▁▃</td>
</tr>
<tr class="even">
<td style="text-align: left;">fruitsalad</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">0.24</td>
<td style="text-align: right;">0.43</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">▇▁▁▁▂</td>
</tr>
<tr class="odd">
<td style="text-align: left;">tomato</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">0.29</td>
<td style="text-align: right;">0.45</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">▇▁▁▁▃</td>
</tr>
<tr class="even">
<td style="text-align: left;">mince</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">0.30</td>
<td style="text-align: right;">0.46</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">▇▁▁▁▃</td>
</tr>
<tr class="odd">
<td style="text-align: left;">salmon</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">0.48</td>
<td style="text-align: right;">1.12</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">9</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">horseradish</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">0.31</td>
<td style="text-align: right;">0.84</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">9</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">chickenwin</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">0.29</td>
<td style="text-align: right;">0.45</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">▇▁▁▁▃</td>
</tr>
<tr class="even">
<td style="text-align: left;">roastbeef</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">0.10</td>
<td style="text-align: right;">0.30</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">pork</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">0.47</td>
<td style="text-align: right;">0.86</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">9</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Glimpse is an alternative to skim which gives more accurate information about the nature of the  variables</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(tira_raw)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 291
Columns: 20
$ uniquekey   &lt;int&gt; 210, 12, 288, 186, 20, 148, 201, 106, 272, 50, 216, 141, 9~
$ ill         &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1~
$ dateonset   &lt;IDate&gt; 1998-06-27, 1998-06-27, 1998-06-27, 1998-06-27, 1998-06-~
$ sex         &lt;int&gt; 1, 0, 1, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 1, 0, 0, 0, 0, 1, 1~
$ age         &lt;int&gt; 18, 57, 56, 17, 19, 16, 19, 19, 40, 53, 20, 23, 17, 19, 15~
$ tira        &lt;int&gt; 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1~
$ tportion    &lt;int&gt; 3, 1, 0, 1, 2, 2, 3, 2, 2, 1, 3, 2, 1, 1, 1, 2, 1, 2, 2, 2~
$ wmousse     &lt;int&gt; 0, 0, 0, 1, 0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 1, 0, 0, 1, 0, 0~
$ dmousse     &lt;int&gt; 1, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1, NA, 1, 0, 1, 0, 1, 1, 1, ~
$ mportion    &lt;int&gt; 1, 1, 0, NA, 0, 1, 1, 1, 2, 1, 3, 1, 1, 0, 2, 0, 1, 2, 2, ~
$ beer        &lt;int&gt; 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 0, NA, ~
$ redjelly    &lt;int&gt; 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 1~
$ fruitsalad  &lt;int&gt; 0, 1, 0, 0, 0, 1, 1, 1, 0, 0, 1, 1, 0, 0, 1, 1, 1, 0, 0, 1~
$ tomato      &lt;int&gt; 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 1, 0, 0, 0, 1, 0~
$ mince       &lt;int&gt; 0, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 1, 0, 0, 0~
$ salmon      &lt;int&gt; 0, 1, 1, 9, 0, 1, 0, 0, 1, 1, 1, 0, 0, 0, 0, 1, 1, 0, 1, 0~
$ horseradish &lt;int&gt; 0, 1, 0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 0, 0, 0, 1, 0, 0, 0, 0~
$ chickenwin  &lt;int&gt; 0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0~
$ roastbeef   &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0~
$ pork        &lt;int&gt; 1, 0, 0, 9, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 1, 0, 1, 0~</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># To see the different categories of the variables</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tabyl</span>(tira_raw, tomato)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="table table-sm table-striped small">
<thead><tr class="header">
<th style="text-align: right;">tomato</th>
<th style="text-align: right;">n</th>
<th style="text-align: right;">percent</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">0</td>
<td style="text-align: right;">208</td>
<td style="text-align: right;">0.7147766</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: right;">83</td>
<td style="text-align: right;">0.2852234</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p><br></p>
</details></section><section id="step-2.3-explore-age-in-more-detail" class="level4"><h4 class="anchored" data-anchor-id="step-2.3-explore-age-in-more-detail">Step 2.3: Explore age in more detail</h4>
<p><strong>Task</strong> Explore the age of attendees by:</p>
<ul>
<li><p>Getting summary statistics</p></li>
<li><p>Generating a boxplot of age by illness status.</p></li>
</ul>
<details><summary style="text-decoration: underline; color: darkgreen;"><p><svg aria-hidden="true" role="img" viewbox="0 0 384 512" style="height:1em;width:0.75em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:gold;overflow:visible;position:relative;"><path d="M297.2 248.9C311.6 228.3 320 203.2 320 176c0-70.7-57.3-128-128-128S64 105.3 64 176c0 27.2 8.4 52.3 22.8 72.9c3.7 5.3 8.1 11.3 12.8 17.7l0 0c12.9 17.7 28.3 38.9 39.8 59.8c10.4 19 15.7 38.8 18.3 57.5H109c-2.2-12-5.9-23.7-11.8-34.5c-9.9-18-22.2-34.9-34.5-51.8l0 0 0 0c-5.2-7.1-10.4-14.2-15.4-21.4C27.6 247.9 16 213.3 16 176C16 78.8 94.8 0 192 0s176 78.8 176 176c0 37.3-11.6 71.9-31.4 100.3c-5 7.2-10.2 14.3-15.4 21.4l0 0 0 0c-12.3 16.8-24.6 33.7-34.5 51.8c-5.9 10.8-9.6 22.5-11.8 34.5H226.4c2.6-18.7 7.9-38.6 18.3-57.5c11.5-20.9 26.9-42.1 39.8-59.8l0 0 0 0 0 0c4.7-6.4 9-12.4 12.7-17.7zM192 128c-26.5 0-48 21.5-48 48c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-44.2 35.8-80 80-80c8.8 0 16 7.2 16 16s-7.2 16-16 16zm0 384c-44.2 0-80-35.8-80-80V416H272v16c0 44.2-35.8 80-80 80z"></path></svg> Click to read a hint</p>
</summary><p><br></p>
<p>You can create a boxplot with {ggplot2} by using the geom <code>geom_boxplot()</code>. In order to create two boxes, one for each illness status, you can assign in the aesthetics the column <em>ill</em> to both the x-axis and the fill. Don’t worry if it doesn’t look good right now….it should look like the solution below. If you need a refresher on how ggplot works, have a look at the EpiRhandbook <a href="https://epirhandbook.com/new_pages/ggplot_basics.html">Chapter</a></p>
<p><br></p>
</details><details><summary style="text-decoration: underline; color: red;"><p><svg aria-hidden="true" role="img" viewbox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:red;overflow:visible;position:relative;"><path d="M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg>Click to see a solution (try it yourself first!)</p>
</summary><p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Generate summary statistics </span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(tira_raw<span class="sc">$</span>age)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
  12.00   18.00   20.00   26.66   27.00   80.00       8 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Creating a boxplot of age by illness status</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>boxplot_age <span class="ot">&lt;-</span> tira_raw <span class="sc">%&gt;%</span> </span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> ill,</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>                       <span class="at">y =</span> age,</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>                       <span class="at">fill =</span> ill)) <span class="sc">+</span> </span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span> </span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Boxplot: Age distribution per illness status"</span>,</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Disease status"</span>,</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Age"</span>,</span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"Illness (0=No;1=Yes)"</span></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>boxplot_age</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Continuous x aesthetic
i did you forget `aes(group = ...)`?</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 8 rows containing non-finite values (`stat_boxplot()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The following aesthetics were dropped during statistical transformation: fill
i This can happen when ggplot fails to infer the correct grouping structure in
  the data.
i Did you forget to specify a `group` aesthetic or to convert a numerical
  variable into a factor?</code></pre>
</div>
<div class="cell-output-display">
<p><img src="stengen-en_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p><br></p>
</details><div class="webex-check">
QUESTION: Which group (ill or not ill) has more variation around age’s median?
<div id="radio_SWCEWAOCFH" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_SWCEWAOCFH" value=""><span>No ill</span></label><label><input type="radio" autocomplete="off" name="radio_SWCEWAOCFH" value=""><span>Ill</span></label><label><input type="radio" autocomplete="off" name="radio_SWCEWAOCFH" value="answer"><span>Impossible to know from this boxplot</span></label>
</div>
</div>
<p>We were not able to create the boxplot that we aimed for. In fact, you can see that a warning message appeared in your console saying: “Did you forget to specify a <code>group</code> aesthetic or to convert a numerical variable into a factor?”</p>
<p>Looks like all columns that consist of 1 (present) and 0 (absent) values are of class ‘integer’, including “ill”. Integer means that they are considered numbers. However, we want them to be categories, otherwise we won’t be able to carry out many of the analysis we want (including this boxplot). So, now we’ll sort this out alongside other cleaning operations.</p>
</section></section><section id="step-3-clean-the-data" class="level3"><h3 class="anchored" data-anchor-id="step-3-clean-the-data"><strong>Step 3: Clean the data</strong></h3>
<section id="step-3.1-transform-categorical-variables" class="level4"><h4 class="anchored" data-anchor-id="step-3.1-transform-categorical-variables">Step 3.1: Transform categorical variables</h4>
<p><strong>Task</strong>: Change all present (1) / absent (0) variables from integer to factors. Do the same for the variables that record the number of portions eaten.</p>
<details><summary style="text-decoration: underline; color: darkgreen;"><p><svg aria-hidden="true" role="img" viewbox="0 0 384 512" style="height:1em;width:0.75em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:gold;overflow:visible;position:relative;"><path d="M297.2 248.9C311.6 228.3 320 203.2 320 176c0-70.7-57.3-128-128-128S64 105.3 64 176c0 27.2 8.4 52.3 22.8 72.9c3.7 5.3 8.1 11.3 12.8 17.7l0 0c12.9 17.7 28.3 38.9 39.8 59.8c10.4 19 15.7 38.8 18.3 57.5H109c-2.2-12-5.9-23.7-11.8-34.5c-9.9-18-22.2-34.9-34.5-51.8l0 0 0 0c-5.2-7.1-10.4-14.2-15.4-21.4C27.6 247.9 16 213.3 16 176C16 78.8 94.8 0 192 0s176 78.8 176 176c0 37.3-11.6 71.9-31.4 100.3c-5 7.2-10.2 14.3-15.4 21.4l0 0 0 0c-12.3 16.8-24.6 33.7-34.5 51.8c-5.9 10.8-9.6 22.5-11.8 34.5H226.4c2.6-18.7 7.9-38.6 18.3-57.5c11.5-20.9 26.9-42.1 39.8-59.8l0 0 0 0 0 0c4.7-6.4 9-12.4 12.7-17.7zM192 128c-26.5 0-48 21.5-48 48c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-44.2 35.8-80 80-80c8.8 0 16 7.2 16 16s-7.2 16-16 16zm0 384c-44.2 0-80-35.8-80-80V416H272v16c0 44.2-35.8 80-80 80z"></path></svg> Click to read a hint</p>
</summary><p><br></p>
<p>You can do this one by one, or you could do all at the same time using the <code>across()</code> function from {dplyr}. If you are not sure how to use the <code>across()</code> function, read the section on <a href="https://epirhandbook.com/en/new_pages/cleaning.html#clean_across">Transform multiple columns</a> from the EpiRhandbook. <br></p>
</details><details><summary style="text-decoration: underline; color: red;"><p><svg aria-hidden="true" role="img" viewbox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:red;overflow:visible;position:relative;"><path d="M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg>Click to see a solution (try it yourself first!)</p>
</summary><p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>tira_clean <span class="ot">&lt;-</span> tira_raw <span class="sc">%&gt;%</span> <span class="co"># tira_clean will be out clean dataframe after we have performed cleaning tasks on tira_raw</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># this would be changing one-by-one the columns into factors</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ill =</span> <span class="fu">as.factor</span>(ill)) <span class="sc">%&gt;%</span> </span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># this would change all columns we are interested into 'factors' in only one command</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="at">.cols =</span> <span class="sc">!</span><span class="fu">c</span>(uniquekey, dateonset, age), <span class="co"># with the exclamation mark before c() we are telling R that we want all columns, except those in the c() list, to be transformed into factors</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>                <span class="at">.fns =</span> <span class="sc">~</span> <span class="fu">as.factor</span>(.x)))</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Check that the changes have been succesful</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(tira_clean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 291
Columns: 20
$ uniquekey   &lt;int&gt; 210, 12, 288, 186, 20, 148, 201, 106, 272, 50, 216, 141, 9~
$ ill         &lt;fct&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1~
$ dateonset   &lt;IDate&gt; 1998-06-27, 1998-06-27, 1998-06-27, 1998-06-27, 1998-06-~
$ sex         &lt;fct&gt; 1, 0, 1, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 1, 0, 0, 0, 0, 1, 1~
$ age         &lt;int&gt; 18, 57, 56, 17, 19, 16, 19, 19, 40, 53, 20, 23, 17, 19, 15~
$ tira        &lt;fct&gt; 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1~
$ tportion    &lt;fct&gt; 3, 1, 0, 1, 2, 2, 3, 2, 2, 1, 3, 2, 1, 1, 1, 2, 1, 2, 2, 2~
$ wmousse     &lt;fct&gt; 0, 0, 0, 1, 0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 1, 0, 0, 1, 0, 0~
$ dmousse     &lt;fct&gt; 1, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1, NA, 1, 0, 1, 0, 1, 1, 1, ~
$ mportion    &lt;fct&gt; 1, 1, 0, NA, 0, 1, 1, 1, 2, 1, 3, 1, 1, 0, 2, 0, 1, 2, 2, ~
$ beer        &lt;fct&gt; 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 0, NA, ~
$ redjelly    &lt;fct&gt; 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 1~
$ fruitsalad  &lt;fct&gt; 0, 1, 0, 0, 0, 1, 1, 1, 0, 0, 1, 1, 0, 0, 1, 1, 1, 0, 0, 1~
$ tomato      &lt;fct&gt; 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 1, 0, 0, 0, 1, 0~
$ mince       &lt;fct&gt; 0, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 1, 0, 0, 0~
$ salmon      &lt;fct&gt; 0, 1, 1, 9, 0, 1, 0, 0, 1, 1, 1, 0, 0, 0, 0, 1, 1, 0, 1, 0~
$ horseradish &lt;fct&gt; 0, 1, 0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 0, 0, 0, 1, 0, 0, 0, 0~
$ chickenwin  &lt;fct&gt; 0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0~
$ roastbeef   &lt;fct&gt; 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0~
$ pork        &lt;fct&gt; 1, 0, 0, 9, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 1, 0, 1, 0~</code></pre>
</div>
</div>
<p><br></p>
</details></section><section id="step-3.2-categorise-missing-as-na" class="level4"><h4 class="anchored" data-anchor-id="step-3.2-categorise-missing-as-na">Step 3.2: Categorise “missing” as NA</h4>
<p>We saw with the <code>skim()</code> overview -and in the data dictionary- that the variables <em>salmon</em>, <em>pork</em> and <em>horseradish</em> have ‘missing’ codified with number ‘9’. In most analysis and visualisations, it is very important that R considers missing data truly as “missing”. To do that, missing data needs to be coded as NA (<strong>without quotes</strong>). Other codifications of missing data, such as empty spaces or the number 9 (as in this case) will mean that R will treat this data as a category or a number. For R, 9 is not different from number 1.</p>
<p><strong>Task</strong> Recode the columns salmon, pork and horseradish so that values of 9 are coded as NA. Add the new code to the cleaning pipeline initiated in the previous step</p>
<details><summary style="text-decoration: underline; color: darkgreen;"><p><svg aria-hidden="true" role="img" viewbox="0 0 384 512" style="height:1em;width:0.75em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:gold;overflow:visible;position:relative;"><path d="M297.2 248.9C311.6 228.3 320 203.2 320 176c0-70.7-57.3-128-128-128S64 105.3 64 176c0 27.2 8.4 52.3 22.8 72.9c3.7 5.3 8.1 11.3 12.8 17.7l0 0c12.9 17.7 28.3 38.9 39.8 59.8c10.4 19 15.7 38.8 18.3 57.5H109c-2.2-12-5.9-23.7-11.8-34.5c-9.9-18-22.2-34.9-34.5-51.8l0 0 0 0c-5.2-7.1-10.4-14.2-15.4-21.4C27.6 247.9 16 213.3 16 176C16 78.8 94.8 0 192 0s176 78.8 176 176c0 37.3-11.6 71.9-31.4 100.3c-5 7.2-10.2 14.3-15.4 21.4l0 0 0 0c-12.3 16.8-24.6 33.7-34.5 51.8c-5.9 10.8-9.6 22.5-11.8 34.5H226.4c2.6-18.7 7.9-38.6 18.3-57.5c11.5-20.9 26.9-42.1 39.8-59.8l0 0 0 0 0 0c4.7-6.4 9-12.4 12.7-17.7zM192 128c-26.5 0-48 21.5-48 48c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-44.2 35.8-80 80-80c8.8 0 16 7.2 16 16s-7.2 16-16 16zm0 384c-44.2 0-80-35.8-80-80V416H272v16c0 44.2-35.8 80-80 80z"></path></svg> Click to read a hint</p>
</summary><p><br></p>
<p>For this task you can use the <code>mutate()</code> function in combination with <code>recode()</code> or <code>if_else()</code>. The former is used specifically for recoding, whereas the latter is used to create/modify columns based on logical conditions. In any case, functions like <code>if_else()</code> and <code>recode()</code> may require you to specify the type of NA (e.g., NA_character_, NA_real_, NA_integer_) to ensure that the resulting vector maintains a consistent data type. This is important because R is strongly typed, meaning that each vector must contain elements of the same type. If you want to know more about recoding, read the EpiRhandbook section on <a href="https://epirhandbook.com/new_pages/cleaning.html#re-code-values">Recoding</a>. Regardless of the approach that you choose, add it to the cleaning pipe command you started before, so that your code is tidy. <br></p>
</details><details><summary style="text-decoration: underline; color: red;"><p><svg aria-hidden="true" role="img" viewbox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:red;overflow:visible;position:relative;"><path d="M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg>Click to see a solution (try it yourself first!)</p>
</summary><p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>tira_clean <span class="ot">&lt;-</span> tira_raw <span class="sc">%&gt;%</span> <span class="co"># tira_clean will be out clean dataframe after we have performed cleaning tasks on tira_raw</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># this would be changing one-by-one the columns into factors</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ill =</span> <span class="fu">as.factor</span>(ill)) <span class="sc">%&gt;%</span> </span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># this would change all columns we are interested into 'factors' in only one command</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="at">.cols =</span> <span class="sc">!</span><span class="fu">c</span>(uniquekey, dateonset, age), <span class="co"># with the exclamation mark before c() we are telling R that we want all columns, except those in the c() list, to be transformed into factors</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>                <span class="at">.fns =</span> <span class="sc">~</span> <span class="fu">as.factor</span>(.x))) <span class="sc">%&gt;%</span> </span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># we can do all columns at the same time with across(). Here we use recode for this example </span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="at">.cols =</span> <span class="fu">c</span>(salmon, horseradish, pork), <span class="at">.fns =</span> <span class="sc">~</span> <span class="fu">recode</span>(.x, <span class="st">"9"</span> <span class="ot">=</span> <span class="cn">NA_character_</span>)))</span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Check that the changes have been succesful</span></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a><span class="fu">tabyl</span>(tira_clean, pork)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="table table-sm table-striped small">
<thead><tr class="header">
<th style="text-align: left;">pork</th>
<th style="text-align: right;">n</th>
<th style="text-align: right;">percent</th>
<th style="text-align: right;">valid_percent</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">0</td>
<td style="text-align: right;">169</td>
<td style="text-align: right;">0.5807560</td>
<td style="text-align: right;">0.5847751</td>
</tr>
<tr class="even">
<td style="text-align: left;">1</td>
<td style="text-align: right;">120</td>
<td style="text-align: right;">0.4123711</td>
<td style="text-align: right;">0.4152249</td>
</tr>
<tr class="odd">
<td style="text-align: left;">NA</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0.0068729</td>
<td style="text-align: right;">NA</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p><br></p>
</details></section><section id="step-3.3-re-categorise-mousse-and-tiramisu-portions" class="level4"><h4 class="anchored" data-anchor-id="step-3.3-re-categorise-mousse-and-tiramisu-portions">Step 3.3: Re-categorise mousse and tiramisu portions</h4>
<p>We saw that there are two columns -<em>tportion</em> and <em>mportion</em>- that have four categories according to the number of portions eaten. However, exploring these columns we can see that few people ate 3 portions. The low number in this category means that it will be very difficult to have meaningful results due to the wide uncertainty that we’ll find in the estimates.</p>
<p><strong>Task</strong>: Re-categorise these columns so that they have three categories: 0,1 and 2+ portions eaten. Add the new code to the cleaning pipeline initiated previously.</p>
<details><summary style="text-decoration: underline; color: darkgreen;"><p><svg aria-hidden="true" role="img" viewbox="0 0 384 512" style="height:1em;width:0.75em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:gold;overflow:visible;position:relative;"><path d="M297.2 248.9C311.6 228.3 320 203.2 320 176c0-70.7-57.3-128-128-128S64 105.3 64 176c0 27.2 8.4 52.3 22.8 72.9c3.7 5.3 8.1 11.3 12.8 17.7l0 0c12.9 17.7 28.3 38.9 39.8 59.8c10.4 19 15.7 38.8 18.3 57.5H109c-2.2-12-5.9-23.7-11.8-34.5c-9.9-18-22.2-34.9-34.5-51.8l0 0 0 0c-5.2-7.1-10.4-14.2-15.4-21.4C27.6 247.9 16 213.3 16 176C16 78.8 94.8 0 192 0s176 78.8 176 176c0 37.3-11.6 71.9-31.4 100.3c-5 7.2-10.2 14.3-15.4 21.4l0 0 0 0c-12.3 16.8-24.6 33.7-34.5 51.8c-5.9 10.8-9.6 22.5-11.8 34.5H226.4c2.6-18.7 7.9-38.6 18.3-57.5c11.5-20.9 26.9-42.1 39.8-59.8l0 0 0 0 0 0c4.7-6.4 9-12.4 12.7-17.7zM192 128c-26.5 0-48 21.5-48 48c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-44.2 35.8-80 80-80c8.8 0 16 7.2 16 16s-7.2 16-16 16zm0 384c-44.2 0-80-35.8-80-80V416H272v16c0 44.2-35.8 80-80 80z"></path></svg> Click to read a hint</p>
</summary><p><br></p>
<p>We will now use the <code>mutate()</code> function in combination with <code>if_else()</code>. As specified above, this function is used for simple logical recoding, which is what we want to do now. There are three “partner” functions called <code>if_else()</code> from {dplyr}, <code>ifelse()</code> from {base} and <code>fifelse()</code> from {data.table}. They all have the same syntax. <code>ifelse()</code> has the advantage of being embedded in R, which guarantees its stability and sustainability. <code>if_else()</code> has some advantages compared to <code>ifelse()</code> that are important in epi analysis. For example, it does not convert Date objects to numeric (which can be a headache) and verifies that both alternatives in the if and else statements are of the same class. Finally, <code>fifelse()</code> is the fastest, so it has its advantages when we’re analysis a large database.</p>
<p>If you want to know more about simple logical recoding, have a look at the dedicated <a href="https://epirhandbook.com/new_pages/cleaning.html#ifelse-and-if_else">section</a> of the EpiRhandbook.</p>
<p><br></p>
</details><details><summary style="text-decoration: underline; color: red;"><p><svg aria-hidden="true" role="img" viewbox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:red;overflow:visible;position:relative;"><path d="M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg>Click to see a solution (try it yourself first!)</p>
</summary><p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Check portion before</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tabyl</span>(tira_clean, tportion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="table table-sm table-striped small">
<thead><tr class="header">
<th style="text-align: left;">tportion</th>
<th style="text-align: right;">n</th>
<th style="text-align: right;">percent</th>
<th style="text-align: right;">valid_percent</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">0</td>
<td style="text-align: right;">165</td>
<td style="text-align: right;">0.5670103</td>
<td style="text-align: right;">0.5769231</td>
</tr>
<tr class="even">
<td style="text-align: left;">1</td>
<td style="text-align: right;">65</td>
<td style="text-align: right;">0.2233677</td>
<td style="text-align: right;">0.2272727</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2</td>
<td style="text-align: right;">42</td>
<td style="text-align: right;">0.1443299</td>
<td style="text-align: right;">0.1468531</td>
</tr>
<tr class="even">
<td style="text-align: left;">3</td>
<td style="text-align: right;">14</td>
<td style="text-align: right;">0.0481100</td>
<td style="text-align: right;">0.0489510</td>
</tr>
<tr class="odd">
<td style="text-align: left;">NA</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0171821</td>
<td style="text-align: right;">NA</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tabyl</span>(tira_clean, mportion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="table table-sm table-striped small">
<thead><tr class="header">
<th style="text-align: left;">mportion</th>
<th style="text-align: right;">n</th>
<th style="text-align: right;">percent</th>
<th style="text-align: right;">valid_percent</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">0</td>
<td style="text-align: right;">166</td>
<td style="text-align: right;">0.5704467</td>
<td style="text-align: right;">0.5949821</td>
</tr>
<tr class="even">
<td style="text-align: left;">1</td>
<td style="text-align: right;">55</td>
<td style="text-align: right;">0.1890034</td>
<td style="text-align: right;">0.1971326</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2</td>
<td style="text-align: right;">47</td>
<td style="text-align: right;">0.1615120</td>
<td style="text-align: right;">0.1684588</td>
</tr>
<tr class="even">
<td style="text-align: left;">3</td>
<td style="text-align: right;">11</td>
<td style="text-align: right;">0.0378007</td>
<td style="text-align: right;">0.0394265</td>
</tr>
<tr class="odd">
<td style="text-align: left;">NA</td>
<td style="text-align: right;">12</td>
<td style="text-align: right;">0.0412371</td>
<td style="text-align: right;">NA</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Run cleaning pipe line with new code</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>tira_clean <span class="ot">&lt;-</span> tira_raw <span class="sc">%&gt;%</span> <span class="co"># tira_clean will be out clean dataframe after we have performed cleaning tasks on tira_raw</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># this would be changing one-by-one the columns into factors</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ill =</span> <span class="fu">as.factor</span>(ill)) <span class="sc">%&gt;%</span> </span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># this would change all columns we are interested into 'factors' in only one command</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="at">.cols =</span> <span class="sc">!</span><span class="fu">c</span>(uniquekey, dateonset, age), <span class="co"># with the exclamation mark before c() we are telling R that we want all columns, except those in the c() list, to be transformed into factors</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>                <span class="at">.fns =</span> <span class="sc">~</span> <span class="fu">as.factor</span>(.x))) <span class="sc">%&gt;%</span> </span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># we can do all columns at the same time with across(). Here we use recode for this example </span></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="at">.cols =</span> <span class="fu">c</span>(salmon, horseradish, pork), <span class="at">.fns =</span> <span class="sc">~</span> <span class="fu">recode</span>(.x, <span class="st">"9"</span> <span class="ot">=</span> <span class="cn">NA_character_</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># simple logical recoding with if_else()</span></span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="at">.cols =</span> <span class="fu">c</span>(tportion, mportion), <span class="at">.fns =</span> <span class="sc">~</span><span class="fu">if_else</span>(.x <span class="sc">==</span> <span class="st">"3"</span> <span class="sc">|</span> .x <span class="sc">==</span> <span class="st">"2"</span>, <span class="st">"2+"</span>, .x)))</span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a><span class="co">#Check portion after to verify changes</span></span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a><span class="fu">tabyl</span>(tira_clean, tportion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="table table-sm table-striped small">
<thead><tr class="header">
<th style="text-align: left;">tportion</th>
<th style="text-align: right;">n</th>
<th style="text-align: right;">percent</th>
<th style="text-align: right;">valid_percent</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">0</td>
<td style="text-align: right;">165</td>
<td style="text-align: right;">0.5670103</td>
<td style="text-align: right;">0.5769231</td>
</tr>
<tr class="even">
<td style="text-align: left;">1</td>
<td style="text-align: right;">65</td>
<td style="text-align: right;">0.2233677</td>
<td style="text-align: right;">0.2272727</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2+</td>
<td style="text-align: right;">56</td>
<td style="text-align: right;">0.1924399</td>
<td style="text-align: right;">0.1958042</td>
</tr>
<tr class="even">
<td style="text-align: left;">NA</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0171821</td>
<td style="text-align: right;">NA</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tabyl</span>(tira_clean, mportion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="table table-sm table-striped small">
<thead><tr class="header">
<th style="text-align: left;">mportion</th>
<th style="text-align: right;">n</th>
<th style="text-align: right;">percent</th>
<th style="text-align: right;">valid_percent</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">0</td>
<td style="text-align: right;">166</td>
<td style="text-align: right;">0.5704467</td>
<td style="text-align: right;">0.5949821</td>
</tr>
<tr class="even">
<td style="text-align: left;">1</td>
<td style="text-align: right;">55</td>
<td style="text-align: right;">0.1890034</td>
<td style="text-align: right;">0.1971326</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2+</td>
<td style="text-align: right;">58</td>
<td style="text-align: right;">0.1993127</td>
<td style="text-align: right;">0.2078853</td>
</tr>
<tr class="even">
<td style="text-align: left;">NA</td>
<td style="text-align: right;">12</td>
<td style="text-align: right;">0.0412371</td>
<td style="text-align: right;">NA</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p><br></p>
</details></section><section id="step-3.4-create-age-groups" class="level4"><h4 class="anchored" data-anchor-id="step-3.4-create-age-groups">Step 3.4: Create age groups</h4>
<p><strong>Task</strong>: Create a new variable with two categories (those aged &lt; age’s median and those &gt;=age’s median). <strong>Add the code to create this new variable to the cleaning command you created above to ensure your code is tidy. Do not write multiple cleaning commands</strong></p>
<details><summary style="text-decoration: underline; color: darkgreen;"><p><svg aria-hidden="true" role="img" viewbox="0 0 384 512" style="height:1em;width:0.75em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:gold;overflow:visible;position:relative;"><path d="M297.2 248.9C311.6 228.3 320 203.2 320 176c0-70.7-57.3-128-128-128S64 105.3 64 176c0 27.2 8.4 52.3 22.8 72.9c3.7 5.3 8.1 11.3 12.8 17.7l0 0c12.9 17.7 28.3 38.9 39.8 59.8c10.4 19 15.7 38.8 18.3 57.5H109c-2.2-12-5.9-23.7-11.8-34.5c-9.9-18-22.2-34.9-34.5-51.8l0 0 0 0c-5.2-7.1-10.4-14.2-15.4-21.4C27.6 247.9 16 213.3 16 176C16 78.8 94.8 0 192 0s176 78.8 176 176c0 37.3-11.6 71.9-31.4 100.3c-5 7.2-10.2 14.3-15.4 21.4l0 0 0 0c-12.3 16.8-24.6 33.7-34.5 51.8c-5.9 10.8-9.6 22.5-11.8 34.5H226.4c2.6-18.7 7.9-38.6 18.3-57.5c11.5-20.9 26.9-42.1 39.8-59.8l0 0 0 0 0 0c4.7-6.4 9-12.4 12.7-17.7zM192 128c-26.5 0-48 21.5-48 48c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-44.2 35.8-80 80-80c8.8 0 16 7.2 16 16s-7.2 16-16 16zm0 384c-44.2 0-80-35.8-80-80V416H272v16c0 44.2-35.8 80-80 80z"></path></svg> Click to read a hint</p>
</summary><p><br></p>
<p>You can create the age group column with the function <code>age_categories()</code> from {epikit}. If you’re not familiar with this function, try looking in the <em>Help</em> on how it works, or read the specific EpiRhandbook <a href="https://epirhandbook.com/new_pages/cleaning.html#age_categories">Section</a> <br></p>
</details><details><summary style="text-decoration: underline; color: red;"><p><svg aria-hidden="true" role="img" viewbox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:red;overflow:visible;position:relative;"><path d="M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg>Click to see a solution (try it yourself first!)</p>
</summary><p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>tira_clean <span class="ot">&lt;-</span> tira_raw <span class="sc">%&gt;%</span> <span class="co"># tira_clean will be out clean dataframe after we have performed cleaning tasks on tira_raw</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># this would be changing one-by-one the columns into factors</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ill =</span> <span class="fu">as.factor</span>(ill)) <span class="sc">%&gt;%</span> </span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># this would change all columns we are interested into 'factors' in only one command</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="at">.cols =</span> <span class="sc">!</span><span class="fu">c</span>(uniquekey, dateonset, age), <span class="co"># with the exclamation mark before c() we are telling R that we want all columns, except those in the c() list, to be transformed into factors</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>                <span class="at">.fns =</span> <span class="sc">~</span> <span class="fu">as.factor</span>(.x))) <span class="sc">%&gt;%</span> </span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># we can do all columns at the same time with across(). Here we use recode for this example </span></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="at">.cols =</span> <span class="fu">c</span>(salmon, horseradish, pork), <span class="at">.fns =</span> <span class="sc">~</span> <span class="fu">recode</span>(.x, <span class="st">"9"</span> <span class="ot">=</span> <span class="cn">NA_character_</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># simple logical recoding with if_else()</span></span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="at">.cols =</span> <span class="fu">c</span>(tportion, mportion), <span class="at">.fns =</span> <span class="sc">~</span><span class="fu">if_else</span>(.x <span class="sc">==</span> <span class="st">"3"</span> <span class="sc">|</span> .x <span class="sc">==</span> <span class="st">"2"</span>, <span class="st">"2+"</span>, .x))) <span class="sc">%&gt;%</span> </span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>  <span class="co"># create age categories</span></span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">age_group =</span> <span class="fu">age_categories</span>(age,           <span class="co"># the column to use to create the cateogories </span></span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">lower =</span> <span class="dv">0</span>,     <span class="co"># the lower value</span></span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">upper =</span> <span class="dv">20</span>,    <span class="co"># the upper value (we want a group of 20+)</span></span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">by =</span> <span class="dv">20</span>))      <span class="co"># as we only want two groups, this is also 20</span></span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-24"><a href="#cb22-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Check that the changes have been succesful</span></span>
<span id="cb22-25"><a href="#cb22-25" aria-hidden="true" tabindex="-1"></a><span class="fu">tabyl</span>(tira_clean, age_group)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="table table-sm table-striped small">
<thead><tr class="header">
<th style="text-align: left;">age_group</th>
<th style="text-align: right;">n</th>
<th style="text-align: right;">percent</th>
<th style="text-align: right;">valid_percent</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">0-19</td>
<td style="text-align: right;">137</td>
<td style="text-align: right;">0.4707904</td>
<td style="text-align: right;">0.4840989</td>
</tr>
<tr class="even">
<td style="text-align: left;">20+</td>
<td style="text-align: right;">146</td>
<td style="text-align: right;">0.5017182</td>
<td style="text-align: right;">0.5159011</td>
</tr>
<tr class="odd">
<td style="text-align: left;">NA</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">0.0274914</td>
<td style="text-align: right;">NA</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p><br></p>
</details></section><section id="step-3.5-re-create-the-boxplot" class="level4"><h4 class="anchored" data-anchor-id="step-3.5-re-create-the-boxplot">Step 3.5: Re-create the boxplot</h4>
<p><strong>Task</strong>: Create the boxplot we tried in <strong>Step 2.3</strong> using the clean version of the data. Save the boxplot in the subfolder “outputs”.</p>
<details><summary style="text-decoration: underline; color: red;"><p><svg aria-hidden="true" role="img" viewbox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:red;overflow:visible;position:relative;"><path d="M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg>Click to see a solution (try it yourself first!)</p>
</summary><p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Boxplot of age by illness status</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>boxplot_age <span class="ot">&lt;-</span> tira_clean <span class="sc">%&gt;%</span> </span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> ill,</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>                       <span class="at">y =</span> age,</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>                       <span class="at">fill =</span> ill)) <span class="sc">+</span> </span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span> </span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Boxplot: Age distribution per disease status"</span>,</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Disease status"</span>,</span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Age"</span>,</span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"Illness (0=No;1=Yes)"</span></span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a>boxplot_age</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="stengen-en_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Save the boxplot</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="do">#### A static way of saving it</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename =</span> <span class="st">"outputs/boxplot_age.png"</span>, <span class="at">plot =</span> boxplot_age)</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="do">#### A dynamic way of doing it so that it contains the date of the analysis</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename =</span> <span class="fu">str_glue</span>(<span class="st">"outputs/boxplot_age_"</span>,             <span class="co">#First we write the beginning of the file name until the date </span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>                           <span class="fu">str_replace_all</span>(<span class="fu">Sys.Date</span>(), <span class="st">"-"</span>, <span class="st">""</span>),  <span class="co">#Sys.Date() gives us the date of analysis. Str_replace_all() removes all hyphens </span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>                           <span class="st">".png"</span>),                               <span class="co"># Finally we add the ending which is the file type</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">plot =</span> boxplot_age)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
</details><div class="webex-check">
QUESTION: Which group (ill or not ill) has more variation around age’s median?
<div id="radio_IMACZEGMEU" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_IMACZEGMEU" value=""><span>No ill</span></label><label><input type="radio" autocomplete="off" name="radio_IMACZEGMEU" value="answer"><span>Ill</span></label><label><input type="radio" autocomplete="off" name="radio_IMACZEGMEU" value=""><span>Impossible to know from this boxplot</span></label>
</div>
</div>
</section></section><section id="step-4-descriptive-analysis" class="level3"><h3 class="anchored" data-anchor-id="step-4-descriptive-analysis"><strong>Step 4: Descriptive analysis</strong></h3>
<p>Now that we have explored and cleaned our data, we can start with the descriptive analysis. As you know, we normally describe the data by time, person and place. We won’t do the “place” analysis because in this outbreak, that element is not relevant.</p>
<section id="step-4.2-analysis-by-time" class="level4"><h4 class="anchored" data-anchor-id="step-4.2-analysis-by-time">Step 4.2: Analysis by time</h4>
<p><strong>Task</strong>: Generate an epidemic curve with the dates of onset. Display in the x-axis each day of the study period.</p>
<details><summary style="text-decoration: underline; color: darkgreen;"><p><svg aria-hidden="true" role="img" viewbox="0 0 384 512" style="height:1em;width:0.75em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:gold;overflow:visible;position:relative;"><path d="M297.2 248.9C311.6 228.3 320 203.2 320 176c0-70.7-57.3-128-128-128S64 105.3 64 176c0 27.2 8.4 52.3 22.8 72.9c3.7 5.3 8.1 11.3 12.8 17.7l0 0c12.9 17.7 28.3 38.9 39.8 59.8c10.4 19 15.7 38.8 18.3 57.5H109c-2.2-12-5.9-23.7-11.8-34.5c-9.9-18-22.2-34.9-34.5-51.8l0 0 0 0c-5.2-7.1-10.4-14.2-15.4-21.4C27.6 247.9 16 213.3 16 176C16 78.8 94.8 0 192 0s176 78.8 176 176c0 37.3-11.6 71.9-31.4 100.3c-5 7.2-10.2 14.3-15.4 21.4l0 0 0 0c-12.3 16.8-24.6 33.7-34.5 51.8c-5.9 10.8-9.6 22.5-11.8 34.5H226.4c2.6-18.7 7.9-38.6 18.3-57.5c11.5-20.9 26.9-42.1 39.8-59.8l0 0 0 0 0 0c4.7-6.4 9-12.4 12.7-17.7zM192 128c-26.5 0-48 21.5-48 48c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-44.2 35.8-80 80-80c8.8 0 16 7.2 16 16s-7.2 16-16 16zm0 384c-44.2 0-80-35.8-80-80V416H272v16c0 44.2-35.8 80-80 80z"></path></svg> Click to read a hint</p>
</summary><p><br></p>
<p>You should be able, by now, to create the histogram required for this epicurve. For the x-axis breaks, remember there are two distinct elements in a <code>ggplot()</code>. Inside <code>geom_histogram()</code> we can specify the <code>binwidth =</code> of the bins to the unit we want (e.g, 1 for daily, 7 for weekly etc.). This will change the whole epicurve. The second element is the scale. Scales change the way the axis or the colours are displayed, but the epicurve remains the same. In this case, as we want to modify the X-axis which is a date, we should use the function <code>scale_x_date()</code> and specify inside that we want <code>date_breaks =</code> by “day”. If you are struggling, have a look at the <a href="https://epirhandbook.com/new_pages/epicurves.html#epicurves-with-ggplot2">Epicurves</a> chapter of the EpiRhandbook. <br></p>
</details><details><summary style="text-decoration: underline; color: red;"><p><svg aria-hidden="true" role="img" viewbox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:red;overflow:visible;position:relative;"><path d="M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg>Click to see a solution (try it yourself first!)</p>
</summary><p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>tira_clean <span class="sc">%&gt;%</span> </span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> dateonset)) <span class="sc">+</span> </span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">1</span>,             <span class="co"># we assign the width of the bins to one day</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>                 <span class="at">color =</span> <span class="st">"darkgreen"</span>,      <span class="co"># color of lines around bars</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>                 <span class="at">fill =</span> <span class="st">"lightgreen"</span> )  <span class="sc">+</span>  <span class="co"># color of fill within bars </span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_date</span>(<span class="at">date_breaks =</span> <span class="st">"day"</span>) <span class="sc">+</span>      <span class="co"># we want each day to be shown in the x-axis</span></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Epicurve of cases by date of onset"</span>,</span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Number of cases"</span>,</span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">""</span>                                 <span class="co"># we leave x-axis title blank because we already say in title it is date of onset</span></span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span>                             <span class="co"># predefined theme</span></span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>)) <span class="co"># we change the angle of the days in the x-axis so it is readble. Important this happens at the end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="stengen-en_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p><br></p>
</details><div class="webex-check">
QUESTION: How long after the party was the peak day in cases?
<div id="radio_KGEEIDLOBJ" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_KGEEIDLOBJ" value=""><span>48h</span></label><label><input type="radio" autocomplete="off" name="radio_KGEEIDLOBJ" value=""><span>A week later</span></label><label><input type="radio" autocomplete="off" name="radio_KGEEIDLOBJ" value="answer"><span>24h</span></label><label><input type="radio" autocomplete="off" name="radio_KGEEIDLOBJ" value=""><span>The day of the party</span></label>
</div>
</div>
</section><section id="step-4.3-analysis-by-person" class="level4"><h4 class="anchored" data-anchor-id="step-4.3-analysis-by-person">Step 4.3: Analysis by person</h4>
<p><strong>Task</strong>: Generate 2-by-2 tables with sex and age group by illness status</p>
<details><summary style="text-decoration: underline; color: darkgreen;"><p><svg aria-hidden="true" role="img" viewbox="0 0 384 512" style="height:1em;width:0.75em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:gold;overflow:visible;position:relative;"><path d="M297.2 248.9C311.6 228.3 320 203.2 320 176c0-70.7-57.3-128-128-128S64 105.3 64 176c0 27.2 8.4 52.3 22.8 72.9c3.7 5.3 8.1 11.3 12.8 17.7l0 0c12.9 17.7 28.3 38.9 39.8 59.8c10.4 19 15.7 38.8 18.3 57.5H109c-2.2-12-5.9-23.7-11.8-34.5c-9.9-18-22.2-34.9-34.5-51.8l0 0 0 0c-5.2-7.1-10.4-14.2-15.4-21.4C27.6 247.9 16 213.3 16 176C16 78.8 94.8 0 192 0s176 78.8 176 176c0 37.3-11.6 71.9-31.4 100.3c-5 7.2-10.2 14.3-15.4 21.4l0 0 0 0c-12.3 16.8-24.6 33.7-34.5 51.8c-5.9 10.8-9.6 22.5-11.8 34.5H226.4c2.6-18.7 7.9-38.6 18.3-57.5c11.5-20.9 26.9-42.1 39.8-59.8l0 0 0 0 0 0c4.7-6.4 9-12.4 12.7-17.7zM192 128c-26.5 0-48 21.5-48 48c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-44.2 35.8-80 80-80c8.8 0 16 7.2 16 16s-7.2 16-16 16zm0 384c-44.2 0-80-35.8-80-80V416H272v16c0 44.2-35.8 80-80 80z"></path></svg> Click to read a hint</p>
</summary><p><br></p>
<p>There are several approaches to generate descriptive tables and cross-tabulations. You could use <code>tabyl()</code> from {janitor}, which is a very fast approach; or you could use <code>group_by()</code> in combination with <code>summarise()</code>, from {dplyr} which is the most flexible. In this case, however, we show you the solution with a very efficient approach: <code>tbl_summary()</code> from {gtsummary} <br></p>
</details><details><summary style="text-decoration: underline; color: red;"><p><svg aria-hidden="true" role="img" viewbox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:red;overflow:visible;position:relative;"><path d="M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg>Click to see a solution (try it yourself first!)</p>
</summary><p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>tira_clean <span class="sc">%&gt;%</span> </span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(sex, age_group, ill) <span class="sc">%&gt;%</span>  <span class="co"># we select the columns we're interested in</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tbl_summary</span>(<span class="at">by =</span> ill, <span class="at">percent =</span> <span class="st">"column"</span>) <span class="co"># we assign the grouping column and define that we want the percentages by column</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div id="iitbkfrehd" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#iitbkfrehd table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#iitbkfrehd thead, #iitbkfrehd tbody, #iitbkfrehd tfoot, #iitbkfrehd tr, #iitbkfrehd td, #iitbkfrehd th {
  border-style: none;
}

#iitbkfrehd p {
  margin: 0;
  padding: 0;
}

#iitbkfrehd .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#iitbkfrehd .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#iitbkfrehd .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#iitbkfrehd .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#iitbkfrehd .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#iitbkfrehd .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#iitbkfrehd .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#iitbkfrehd .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#iitbkfrehd .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#iitbkfrehd .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#iitbkfrehd .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#iitbkfrehd .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#iitbkfrehd .gt_spanner_row {
  border-bottom-style: hidden;
}

#iitbkfrehd .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#iitbkfrehd .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#iitbkfrehd .gt_from_md > :first-child {
  margin-top: 0;
}

#iitbkfrehd .gt_from_md > :last-child {
  margin-bottom: 0;
}

#iitbkfrehd .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#iitbkfrehd .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#iitbkfrehd .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#iitbkfrehd .gt_row_group_first td {
  border-top-width: 2px;
}

#iitbkfrehd .gt_row_group_first th {
  border-top-width: 2px;
}

#iitbkfrehd .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#iitbkfrehd .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#iitbkfrehd .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#iitbkfrehd .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#iitbkfrehd .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#iitbkfrehd .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#iitbkfrehd .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#iitbkfrehd .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#iitbkfrehd .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#iitbkfrehd .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#iitbkfrehd .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#iitbkfrehd .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#iitbkfrehd .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#iitbkfrehd .gt_left {
  text-align: left;
}

#iitbkfrehd .gt_center {
  text-align: center;
}

#iitbkfrehd .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#iitbkfrehd .gt_font_normal {
  font-weight: normal;
}

#iitbkfrehd .gt_font_bold {
  font-weight: bold;
}

#iitbkfrehd .gt_font_italic {
  font-style: italic;
}

#iitbkfrehd .gt_super {
  font-size: 65%;
}

#iitbkfrehd .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#iitbkfrehd .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#iitbkfrehd .gt_indent_1 {
  text-indent: 5px;
}

#iitbkfrehd .gt_indent_2 {
  text-indent: 10px;
}

#iitbkfrehd .gt_indent_3 {
  text-indent: 15px;
}

#iitbkfrehd .gt_indent_4 {
  text-indent: 20px;
}

#iitbkfrehd .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead><tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="&lt;strong&gt;Characteristic&lt;/strong&gt;"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id='&lt;strong&gt;0&lt;/strong&gt;, N = 188&lt;span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/span&gt;'>
<strong>0</strong>, N = 188<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span>
</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id='&lt;strong&gt;1&lt;/strong&gt;, N = 103&lt;span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/span&gt;'>
<strong>1</strong>, N = 103<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span>
</th>
    </tr></thead>
<tbody class="gt_table_body">
<tr>
<td headers="label" class="gt_row gt_left">sex</td>
<td headers="stat_1" class="gt_row gt_center"><br></td>
<td headers="stat_2" class="gt_row gt_center"><br></td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    0</td>
<td headers="stat_1" class="gt_row gt_center">86 (46%)</td>
<td headers="stat_2" class="gt_row gt_center">53 (51%)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    1</td>
<td headers="stat_1" class="gt_row gt_center">102 (54%)</td>
<td headers="stat_2" class="gt_row gt_center">50 (49%)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">age_group</td>
<td headers="stat_1" class="gt_row gt_center"><br></td>
<td headers="stat_2" class="gt_row gt_center"><br></td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    0-19</td>
<td headers="stat_1" class="gt_row gt_center">87 (48%)</td>
<td headers="stat_2" class="gt_row gt_center">50 (50%)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    20+</td>
<td headers="stat_1" class="gt_row gt_center">96 (52%)</td>
<td headers="stat_2" class="gt_row gt_center">50 (50%)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    Unknown</td>
<td headers="stat_1" class="gt_row gt_center">5</td>
<td headers="stat_2" class="gt_row gt_center">3</td>
</tr>
</tbody>
<tfoot class="gt_footnotes"><tr>
<td class="gt_footnote" colspan="3">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span> n (%)</td>
    </tr></tfoot>
</table>
</div>
</div>
</div>
<p><br></p>
</details><div class="webex-check">
QUESTION: What percentage of ill cases was female?
<div id="radio_LNOGSOCGUG" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_LNOGSOCGUG" value="answer"><span>51%</span></label><label><input type="radio" autocomplete="off" name="radio_LNOGSOCGUG" value=""><span>49%</span></label><label><input type="radio" autocomplete="off" name="radio_LNOGSOCGUG" value=""><span>45%</span></label><label><input type="radio" autocomplete="off" name="radio_LNOGSOCGUG" value=""><span>80%</span></label>
</div>
</div>
</section></section><section id="step-5-develop-and-test-hypothesis" class="level3"><h3 class="anchored" data-anchor-id="step-5-develop-and-test-hypothesis"><strong>Step 5: Develop and test hypothesis</strong></h3>
<p>In the previous step we have described the number of ill attendees by date of onset, and we have described how sex and age were distributed according to illness status. The next step in an outbreak investigation would be to develop and test hypothesis about the possible source of the outbreak.</p>
<section id="step-5.1-compute-food-specific-attack-rates-and-of-cases-exposed" class="level4"><h4 class="anchored" data-anchor-id="step-5.1-compute-food-specific-attack-rates-and-of-cases-exposed">Step 5.1: Compute food-specific attack rates and % of cases exposed</h4>
<p><strong>Task</strong>: Create 2 by 2 tables with exposure and outcome and calculate the attack rates.</p>
<details><summary style="text-decoration: underline; color: darkgreen;"><p><svg aria-hidden="true" role="img" viewbox="0 0 384 512" style="height:1em;width:0.75em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:gold;overflow:visible;position:relative;"><path d="M297.2 248.9C311.6 228.3 320 203.2 320 176c0-70.7-57.3-128-128-128S64 105.3 64 176c0 27.2 8.4 52.3 22.8 72.9c3.7 5.3 8.1 11.3 12.8 17.7l0 0c12.9 17.7 28.3 38.9 39.8 59.8c10.4 19 15.7 38.8 18.3 57.5H109c-2.2-12-5.9-23.7-11.8-34.5c-9.9-18-22.2-34.9-34.5-51.8l0 0 0 0c-5.2-7.1-10.4-14.2-15.4-21.4C27.6 247.9 16 213.3 16 176C16 78.8 94.8 0 192 0s176 78.8 176 176c0 37.3-11.6 71.9-31.4 100.3c-5 7.2-10.2 14.3-15.4 21.4l0 0 0 0c-12.3 16.8-24.6 33.7-34.5 51.8c-5.9 10.8-9.6 22.5-11.8 34.5H226.4c2.6-18.7 7.9-38.6 18.3-57.5c11.5-20.9 26.9-42.1 39.8-59.8l0 0 0 0 0 0c4.7-6.4 9-12.4 12.7-17.7zM192 128c-26.5 0-48 21.5-48 48c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-44.2 35.8-80 80-80c8.8 0 16 7.2 16 16s-7.2 16-16 16zm0 384c-44.2 0-80-35.8-80-80V416H272v16c0 44.2-35.8 80-80 80z"></path></svg> Click to read a hint</p>
</summary><p><br></p>
<p>You could use the same approach we used before with <code>tbl_summary()</code> from {gtsummary}, but to calculate attack rates, you’ll need to change from column to row percentages. <br></p>
</details><details><summary style="text-decoration: underline; color: red;"><p><svg aria-hidden="true" role="img" viewbox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:red;overflow:visible;position:relative;"><path d="M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg>Click to see a solution (try it yourself first!)</p>
</summary><p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>tira_clean <span class="sc">%&gt;%</span> </span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(tira, wmousse, dmousse, wmousse, beer, </span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>         redjelly, fruitsalad, tomato, mince, salmon,</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>         horseradish, chickenwin, roastbeef, pork, ill) <span class="sc">%&gt;%</span> <span class="co"># we select the columns we're interested in</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tbl_summary</span>(<span class="at">by =</span> ill, <span class="at">percent =</span> <span class="st">"row"</span>) <span class="sc">%&gt;%</span> <span class="co">#we assign the grouping column and define that we want the percentages by row</span></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_overall</span>()    <span class="co"># we add the overall counts</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div id="okxubzyini" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#okxubzyini table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#okxubzyini thead, #okxubzyini tbody, #okxubzyini tfoot, #okxubzyini tr, #okxubzyini td, #okxubzyini th {
  border-style: none;
}

#okxubzyini p {
  margin: 0;
  padding: 0;
}

#okxubzyini .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#okxubzyini .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#okxubzyini .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#okxubzyini .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#okxubzyini .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#okxubzyini .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#okxubzyini .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#okxubzyini .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#okxubzyini .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#okxubzyini .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#okxubzyini .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#okxubzyini .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#okxubzyini .gt_spanner_row {
  border-bottom-style: hidden;
}

#okxubzyini .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#okxubzyini .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#okxubzyini .gt_from_md > :first-child {
  margin-top: 0;
}

#okxubzyini .gt_from_md > :last-child {
  margin-bottom: 0;
}

#okxubzyini .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#okxubzyini .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#okxubzyini .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#okxubzyini .gt_row_group_first td {
  border-top-width: 2px;
}

#okxubzyini .gt_row_group_first th {
  border-top-width: 2px;
}

#okxubzyini .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#okxubzyini .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#okxubzyini .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#okxubzyini .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#okxubzyini .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#okxubzyini .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#okxubzyini .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#okxubzyini .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#okxubzyini .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#okxubzyini .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#okxubzyini .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#okxubzyini .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#okxubzyini .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#okxubzyini .gt_left {
  text-align: left;
}

#okxubzyini .gt_center {
  text-align: center;
}

#okxubzyini .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#okxubzyini .gt_font_normal {
  font-weight: normal;
}

#okxubzyini .gt_font_bold {
  font-weight: bold;
}

#okxubzyini .gt_font_italic {
  font-style: italic;
}

#okxubzyini .gt_super {
  font-size: 65%;
}

#okxubzyini .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#okxubzyini .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#okxubzyini .gt_indent_1 {
  text-indent: 5px;
}

#okxubzyini .gt_indent_2 {
  text-indent: 10px;
}

#okxubzyini .gt_indent_3 {
  text-indent: 15px;
}

#okxubzyini .gt_indent_4 {
  text-indent: 20px;
}

#okxubzyini .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead><tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="&lt;strong&gt;Characteristic&lt;/strong&gt;"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id='&lt;strong&gt;Overall&lt;/strong&gt;, N = 291&lt;span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/span&gt;'>
<strong>Overall</strong>, N = 291<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span>
</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id='&lt;strong&gt;0&lt;/strong&gt;, N = 188&lt;span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/span&gt;'>
<strong>0</strong>, N = 188<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span>
</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id='&lt;strong&gt;1&lt;/strong&gt;, N = 103&lt;span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/span&gt;'>
<strong>1</strong>, N = 103<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span>
</th>
    </tr></thead>
<tbody class="gt_table_body">
<tr>
<td headers="label" class="gt_row gt_left">tira</td>
<td headers="stat_0" class="gt_row gt_center"><br></td>
<td headers="stat_1" class="gt_row gt_center"><br></td>
<td headers="stat_2" class="gt_row gt_center"><br></td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    0</td>
<td headers="stat_0" class="gt_row gt_center">165 (100%)</td>
<td headers="stat_1" class="gt_row gt_center">158 (96%)</td>
<td headers="stat_2" class="gt_row gt_center">7 (4.2%)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    1</td>
<td headers="stat_0" class="gt_row gt_center">121 (100%)</td>
<td headers="stat_1" class="gt_row gt_center">27 (22%)</td>
<td headers="stat_2" class="gt_row gt_center">94 (78%)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    Unknown</td>
<td headers="stat_0" class="gt_row gt_center">5</td>
<td headers="stat_1" class="gt_row gt_center">3</td>
<td headers="stat_2" class="gt_row gt_center">2</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">wmousse</td>
<td headers="stat_0" class="gt_row gt_center"><br></td>
<td headers="stat_1" class="gt_row gt_center"><br></td>
<td headers="stat_2" class="gt_row gt_center"><br></td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    0</td>
<td headers="stat_0" class="gt_row gt_center">205 (100%)</td>
<td headers="stat_1" class="gt_row gt_center">156 (76%)</td>
<td headers="stat_2" class="gt_row gt_center">49 (24%)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    1</td>
<td headers="stat_0" class="gt_row gt_center">72 (100%)</td>
<td headers="stat_1" class="gt_row gt_center">23 (32%)</td>
<td headers="stat_2" class="gt_row gt_center">49 (68%)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    Unknown</td>
<td headers="stat_0" class="gt_row gt_center">14</td>
<td headers="stat_1" class="gt_row gt_center">9</td>
<td headers="stat_2" class="gt_row gt_center">5</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">dmousse</td>
<td headers="stat_0" class="gt_row gt_center"><br></td>
<td headers="stat_1" class="gt_row gt_center"><br></td>
<td headers="stat_2" class="gt_row gt_center"><br></td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    0</td>
<td headers="stat_0" class="gt_row gt_center">174 (100%)</td>
<td headers="stat_1" class="gt_row gt_center">148 (85%)</td>
<td headers="stat_2" class="gt_row gt_center">26 (15%)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    1</td>
<td headers="stat_0" class="gt_row gt_center">113 (100%)</td>
<td headers="stat_1" class="gt_row gt_center">37 (33%)</td>
<td headers="stat_2" class="gt_row gt_center">76 (67%)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    Unknown</td>
<td headers="stat_0" class="gt_row gt_center">4</td>
<td headers="stat_1" class="gt_row gt_center">3</td>
<td headers="stat_2" class="gt_row gt_center">1</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">beer</td>
<td headers="stat_0" class="gt_row gt_center"><br></td>
<td headers="stat_1" class="gt_row gt_center"><br></td>
<td headers="stat_2" class="gt_row gt_center"><br></td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    0</td>
<td headers="stat_0" class="gt_row gt_center">165 (100%)</td>
<td headers="stat_1" class="gt_row gt_center">96 (58%)</td>
<td headers="stat_2" class="gt_row gt_center">69 (42%)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    1</td>
<td headers="stat_0" class="gt_row gt_center">106 (100%)</td>
<td headers="stat_1" class="gt_row gt_center">76 (72%)</td>
<td headers="stat_2" class="gt_row gt_center">30 (28%)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    Unknown</td>
<td headers="stat_0" class="gt_row gt_center">20</td>
<td headers="stat_1" class="gt_row gt_center">16</td>
<td headers="stat_2" class="gt_row gt_center">4</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">redjelly</td>
<td headers="stat_0" class="gt_row gt_center"><br></td>
<td headers="stat_1" class="gt_row gt_center"><br></td>
<td headers="stat_2" class="gt_row gt_center"><br></td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    0</td>
<td headers="stat_0" class="gt_row gt_center">212 (100%)</td>
<td headers="stat_1" class="gt_row gt_center">154 (73%)</td>
<td headers="stat_2" class="gt_row gt_center">58 (27%)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    1</td>
<td headers="stat_0" class="gt_row gt_center">79 (100%)</td>
<td headers="stat_1" class="gt_row gt_center">34 (43%)</td>
<td headers="stat_2" class="gt_row gt_center">45 (57%)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">fruitsalad</td>
<td headers="stat_0" class="gt_row gt_center"><br></td>
<td headers="stat_1" class="gt_row gt_center"><br></td>
<td headers="stat_2" class="gt_row gt_center"><br></td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    0</td>
<td headers="stat_0" class="gt_row gt_center">220 (100%)</td>
<td headers="stat_1" class="gt_row gt_center">163 (74%)</td>
<td headers="stat_2" class="gt_row gt_center">57 (26%)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    1</td>
<td headers="stat_0" class="gt_row gt_center">71 (100%)</td>
<td headers="stat_1" class="gt_row gt_center">25 (35%)</td>
<td headers="stat_2" class="gt_row gt_center">46 (65%)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">tomato</td>
<td headers="stat_0" class="gt_row gt_center"><br></td>
<td headers="stat_1" class="gt_row gt_center"><br></td>
<td headers="stat_2" class="gt_row gt_center"><br></td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    0</td>
<td headers="stat_0" class="gt_row gt_center">208 (100%)</td>
<td headers="stat_1" class="gt_row gt_center">140 (67%)</td>
<td headers="stat_2" class="gt_row gt_center">68 (33%)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    1</td>
<td headers="stat_0" class="gt_row gt_center">83 (100%)</td>
<td headers="stat_1" class="gt_row gt_center">48 (58%)</td>
<td headers="stat_2" class="gt_row gt_center">35 (42%)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">mince</td>
<td headers="stat_0" class="gt_row gt_center"><br></td>
<td headers="stat_1" class="gt_row gt_center"><br></td>
<td headers="stat_2" class="gt_row gt_center"><br></td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    0</td>
<td headers="stat_0" class="gt_row gt_center">204 (100%)</td>
<td headers="stat_1" class="gt_row gt_center">133 (65%)</td>
<td headers="stat_2" class="gt_row gt_center">71 (35%)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    1</td>
<td headers="stat_0" class="gt_row gt_center">87 (100%)</td>
<td headers="stat_1" class="gt_row gt_center">55 (63%)</td>
<td headers="stat_2" class="gt_row gt_center">32 (37%)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">salmon</td>
<td headers="stat_0" class="gt_row gt_center"><br></td>
<td headers="stat_1" class="gt_row gt_center"><br></td>
<td headers="stat_2" class="gt_row gt_center"><br></td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    0</td>
<td headers="stat_0" class="gt_row gt_center">183 (100%)</td>
<td headers="stat_1" class="gt_row gt_center">120 (66%)</td>
<td headers="stat_2" class="gt_row gt_center">63 (34%)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    1</td>
<td headers="stat_0" class="gt_row gt_center">104 (100%)</td>
<td headers="stat_1" class="gt_row gt_center">67 (64%)</td>
<td headers="stat_2" class="gt_row gt_center">37 (36%)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    Unknown</td>
<td headers="stat_0" class="gt_row gt_center">4</td>
<td headers="stat_1" class="gt_row gt_center">1</td>
<td headers="stat_2" class="gt_row gt_center">3</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">horseradish</td>
<td headers="stat_0" class="gt_row gt_center"><br></td>
<td headers="stat_1" class="gt_row gt_center"><br></td>
<td headers="stat_2" class="gt_row gt_center"><br></td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    0</td>
<td headers="stat_0" class="gt_row gt_center">217 (100%)</td>
<td headers="stat_1" class="gt_row gt_center">145 (67%)</td>
<td headers="stat_2" class="gt_row gt_center">72 (33%)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    1</td>
<td headers="stat_0" class="gt_row gt_center">72 (100%)</td>
<td headers="stat_1" class="gt_row gt_center">42 (58%)</td>
<td headers="stat_2" class="gt_row gt_center">30 (42%)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    Unknown</td>
<td headers="stat_0" class="gt_row gt_center">2</td>
<td headers="stat_1" class="gt_row gt_center">1</td>
<td headers="stat_2" class="gt_row gt_center">1</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">chickenwin</td>
<td headers="stat_0" class="gt_row gt_center"><br></td>
<td headers="stat_1" class="gt_row gt_center"><br></td>
<td headers="stat_2" class="gt_row gt_center"><br></td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    0</td>
<td headers="stat_0" class="gt_row gt_center">207 (100%)</td>
<td headers="stat_1" class="gt_row gt_center">137 (66%)</td>
<td headers="stat_2" class="gt_row gt_center">70 (34%)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    1</td>
<td headers="stat_0" class="gt_row gt_center">84 (100%)</td>
<td headers="stat_1" class="gt_row gt_center">51 (61%)</td>
<td headers="stat_2" class="gt_row gt_center">33 (39%)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">roastbeef</td>
<td headers="stat_0" class="gt_row gt_center"><br></td>
<td headers="stat_1" class="gt_row gt_center"><br></td>
<td headers="stat_2" class="gt_row gt_center"><br></td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    0</td>
<td headers="stat_0" class="gt_row gt_center">262 (100%)</td>
<td headers="stat_1" class="gt_row gt_center">167 (64%)</td>
<td headers="stat_2" class="gt_row gt_center">95 (36%)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    1</td>
<td headers="stat_0" class="gt_row gt_center">29 (100%)</td>
<td headers="stat_1" class="gt_row gt_center">21 (72%)</td>
<td headers="stat_2" class="gt_row gt_center">8 (28%)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">pork</td>
<td headers="stat_0" class="gt_row gt_center"><br></td>
<td headers="stat_1" class="gt_row gt_center"><br></td>
<td headers="stat_2" class="gt_row gt_center"><br></td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    0</td>
<td headers="stat_0" class="gt_row gt_center">169 (100%)</td>
<td headers="stat_1" class="gt_row gt_center">115 (68%)</td>
<td headers="stat_2" class="gt_row gt_center">54 (32%)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    1</td>
<td headers="stat_0" class="gt_row gt_center">120 (100%)</td>
<td headers="stat_1" class="gt_row gt_center">72 (60%)</td>
<td headers="stat_2" class="gt_row gt_center">48 (40%)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    Unknown</td>
<td headers="stat_0" class="gt_row gt_center">2</td>
<td headers="stat_1" class="gt_row gt_center">1</td>
<td headers="stat_2" class="gt_row gt_center">1</td>
</tr>
</tbody>
<tfoot class="gt_footnotes"><tr>
<td class="gt_footnote" colspan="4">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span> n (%)</td>
    </tr></tfoot>
</table>
</div>
</div>
</div>
<p><br></p>
</details><div class="webex-check">
QUESTION: What is the attack rate in those who ate white mousse?
<div id="radio_SDZFPVXUCD" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_SDZFPVXUCD" value=""><span>39%</span></label><label><input type="radio" autocomplete="off" name="radio_SDZFPVXUCD" value=""><span>25%</span></label><label><input type="radio" autocomplete="off" name="radio_SDZFPVXUCD" value=""><span>78%</span></label><label><input type="radio" autocomplete="off" name="radio_SDZFPVXUCD" value="answer"><span>68%</span></label>
</div>
</div>
</section><section id="step-5.2-estimate-the-relative-risk-of-the-different-exposures" class="level4"><h4 class="anchored" data-anchor-id="step-5.2-estimate-the-relative-risk-of-the-different-exposures">Step 5.2: Estimate the relative risk of the different exposures</h4>
<p>We have calculated attack rates in exposed and unexposed, which already gives us a lot of information. For example, we see little difference in the attack rates of those who ate and did not ate salmon; but we observe a much higher attack rate among those who ate tiramisu, than among those who did not eat it. We also see a higher attack rate in those who did not drink beer than in those who drank it.</p>
<p>To have a better understanding of the exposures, we will now calculate relative risks.</p>
<p><strong>Task</strong>: First, estimate the relative risk for the exposure of having eaten white mousse at the dinner</p>
<details><summary style="text-decoration: underline; color: darkgreen;"><p><svg aria-hidden="true" role="img" viewbox="0 0 384 512" style="height:1em;width:0.75em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:gold;overflow:visible;position:relative;"><path d="M297.2 248.9C311.6 228.3 320 203.2 320 176c0-70.7-57.3-128-128-128S64 105.3 64 176c0 27.2 8.4 52.3 22.8 72.9c3.7 5.3 8.1 11.3 12.8 17.7l0 0c12.9 17.7 28.3 38.9 39.8 59.8c10.4 19 15.7 38.8 18.3 57.5H109c-2.2-12-5.9-23.7-11.8-34.5c-9.9-18-22.2-34.9-34.5-51.8l0 0 0 0c-5.2-7.1-10.4-14.2-15.4-21.4C27.6 247.9 16 213.3 16 176C16 78.8 94.8 0 192 0s176 78.8 176 176c0 37.3-11.6 71.9-31.4 100.3c-5 7.2-10.2 14.3-15.4 21.4l0 0 0 0c-12.3 16.8-24.6 33.7-34.5 51.8c-5.9 10.8-9.6 22.5-11.8 34.5H226.4c2.6-18.7 7.9-38.6 18.3-57.5c11.5-20.9 26.9-42.1 39.8-59.8l0 0 0 0 0 0c4.7-6.4 9-12.4 12.7-17.7zM192 128c-26.5 0-48 21.5-48 48c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-44.2 35.8-80 80-80c8.8 0 16 7.2 16 16s-7.2 16-16 16zm0 384c-44.2 0-80-35.8-80-80V416H272v16c0 44.2-35.8 80-80 80z"></path></svg> Click to read a hint</p>
</summary><p><br></p>
<p>You could do this manually, but you could use the function <code>riskratio()</code> from the package {epitools}, which will give you a lot of interesting information, besides the RR and its 95%CI. In this function, you need first to write the exposure and then the predictor. Try reading the documentation of the function if you have any doubts.</p>
<p><br></p>
</details><details><summary style="text-decoration: underline; color: red;"><p><svg aria-hidden="true" role="img" viewbox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:red;overflow:visible;position:relative;"><path d="M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg>Click to see a solution (try it yourself first!)</p>
</summary><p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Relative risk wmousse</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="fu">riskratio</span>(tira_clean<span class="sc">$</span>wmousse, tira_clean<span class="sc">$</span>ill)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$data
         Outcome
Predictor   0  1 Total
    0     156 49   205
    1      23 49    72
    Total 179 98   277

$measure
         risk ratio with 95% C.I.
Predictor estimate    lower    upper
        0 1.000000       NA       NA
        1 2.847222 2.128267 3.809049

$p.value
         two-sided
Predictor   midp.exact fisher.exact   chi.square
        0           NA           NA           NA
        1 4.219824e-11 5.825494e-11 1.576275e-11

$correction
[1] FALSE

attr(,"method")
[1] "Unconditional MLE &amp; normal approximation (Wald) CI"</code></pre>
</div>
</div>
<p><br></p>
</details><div class="webex-check">
QUESTION: What is the risk of illness among those who ate white mousse compared to those who did not have this food ?
<div id="radio_XFPGYMSAUW" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_XFPGYMSAUW" value=""><span>2.1</span></label><label><input type="radio" autocomplete="off" name="radio_XFPGYMSAUW" value=""><span>179</span></label><label><input type="radio" autocomplete="off" name="radio_XFPGYMSAUW" value="answer"><span>2.8</span></label><label><input type="radio" autocomplete="off" name="radio_XFPGYMSAUW" value=""><span>1.0</span></label>
</div>
</div>
<p><strong>Task</strong>: Calculate now the risk ratio for all the other exposures to develop hypothesis of the possible source</p>
<details><summary style="text-decoration: underline; color: darkgreen;"><p><svg aria-hidden="true" role="img" viewbox="0 0 384 512" style="height:1em;width:0.75em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:gold;overflow:visible;position:relative;"><path d="M297.2 248.9C311.6 228.3 320 203.2 320 176c0-70.7-57.3-128-128-128S64 105.3 64 176c0 27.2 8.4 52.3 22.8 72.9c3.7 5.3 8.1 11.3 12.8 17.7l0 0c12.9 17.7 28.3 38.9 39.8 59.8c10.4 19 15.7 38.8 18.3 57.5H109c-2.2-12-5.9-23.7-11.8-34.5c-9.9-18-22.2-34.9-34.5-51.8l0 0 0 0c-5.2-7.1-10.4-14.2-15.4-21.4C27.6 247.9 16 213.3 16 176C16 78.8 94.8 0 192 0s176 78.8 176 176c0 37.3-11.6 71.9-31.4 100.3c-5 7.2-10.2 14.3-15.4 21.4l0 0 0 0c-12.3 16.8-24.6 33.7-34.5 51.8c-5.9 10.8-9.6 22.5-11.8 34.5H226.4c2.6-18.7 7.9-38.6 18.3-57.5c11.5-20.9 26.9-42.1 39.8-59.8l0 0 0 0 0 0c4.7-6.4 9-12.4 12.7-17.7zM192 128c-26.5 0-48 21.5-48 48c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-44.2 35.8-80 80-80c8.8 0 16 7.2 16 16s-7.2 16-16 16zm0 384c-44.2 0-80-35.8-80-80V416H272v16c0 44.2-35.8 80-80 80z"></path></svg> Click to read a hint</p>
</summary><p><br></p>
<p>You could write the <code>riskratio()</code> function changing the exposure variable one by one. However, to save time, avoid making errors and being more efficient, you could try to use approaches that allow you to apply the same function to many different objects (e.g., multiple columns) simultaneously. There are different options for this such as <em>loops</em>, <em>lapply</em> or <em>purrr</em>. Here we give the solution with <em>purrr</em>, so if you want to explore further purrr have a look at the dedicated <a href="https://epirhandbook.com/new_pages/iteration.html#iter_purrr">section</a> in the EpiRhandbook. <br></p>
</details><details><summary style="text-decoration: underline; color: red;"><p><svg aria-hidden="true" role="img" viewbox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:red;overflow:visible;position:relative;"><path d="M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg>Click to see a solution (try it yourself first!)</p>
</summary><p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>tira_clean <span class="sc">%&gt;%</span> </span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>uniquekey, <span class="sc">-</span>age, <span class="sc">-</span>age_group, <span class="sc">-</span>sex, <span class="sc">-</span>dateonset, <span class="sc">-</span>ill) <span class="sc">%&gt;%</span> <span class="co"># we first remove the columns we're not interested + the outcome column</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="at">.f =</span> <span class="sc">~</span><span class="fu">riskratio</span>(.x, tira_clean<span class="sc">$</span>ill))     <span class="co"># here we call the function for each column. ".x" represents all the columns in the database that have not been removed previously</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$tira
$tira$data
         Outcome
Predictor   0   1 Total
    0     158   7   165
    1      27  94   121
    Total 185 101   286

$tira$measure
         risk ratio with 95% C.I.
Predictor estimate    lower    upper
        0  1.00000       NA       NA
        1 18.31169 8.814202 38.04291

$tira$p.value
         two-sided
Predictor midp.exact fisher.exact   chi.square
        0         NA           NA           NA
        1          0 1.794084e-41 9.939537e-38

$tira$correction
[1] FALSE

attr(,"method")
[1] "Unconditional MLE &amp; normal approximation (Wald) CI"

$tportion
$tportion$data
         Outcome
Predictor   0   1 Total
    0     158   7   165
    1      21  44    65
    2+      6  50    56
    Total 185 101   286

$tportion$measure
         risk ratio with 95% C.I.
Predictor estimate    lower    upper
       0   1.00000       NA       NA
       1  15.95604  7.58160 33.58069
       2+ 21.04592 10.13646 43.69680

$tportion$p.value
         two-sided
Predictor midp.exact fisher.exact   chi.square
       0          NA           NA           NA
       1           0 8.032814e-24 1.810033e-25
       2+          0 5.002260e-35 3.112720e-36

$tportion$correction
[1] FALSE

attr(,"method")
[1] "Unconditional MLE &amp; normal approximation (Wald) CI"

$wmousse
$wmousse$data
         Outcome
Predictor   0  1 Total
    0     156 49   205
    1      23 49    72
    Total 179 98   277

$wmousse$measure
         risk ratio with 95% C.I.
Predictor estimate    lower    upper
        0 1.000000       NA       NA
        1 2.847222 2.128267 3.809049

$wmousse$p.value
         two-sided
Predictor   midp.exact fisher.exact   chi.square
        0           NA           NA           NA
        1 4.219824e-11 5.825494e-11 1.576275e-11

$wmousse$correction
[1] FALSE

attr(,"method")
[1] "Unconditional MLE &amp; normal approximation (Wald) CI"

$dmousse
$dmousse$data
         Outcome
Predictor   0   1 Total
    0     148  26   174
    1      37  76   113
    Total 185 102   287

$dmousse$measure
         risk ratio with 95% C.I.
Predictor estimate    lower    upper
        0 1.000000       NA       NA
        1 4.501021 3.086945 6.562862

$dmousse$p.value
         two-sided
Predictor midp.exact fisher.exact   chi.square
        0         NA           NA           NA
        1          0 1.167009e-19 1.474249e-19

$dmousse$correction
[1] FALSE

attr(,"method")
[1] "Unconditional MLE &amp; normal approximation (Wald) CI"

$mportion
$mportion$data
         Outcome
Predictor   0  1 Total
    0     144 22   166
    1      17 38    55
    2+     21 37    58
    Total 182 97   279

$mportion$measure
         risk ratio with 95% C.I.
Predictor estimate    lower    upper
       0  1.000000       NA       NA
       1  5.213223 3.399895 7.993687
       2+ 4.813480 3.116181 7.435251

$mportion$p.value
         two-sided
Predictor   midp.exact fisher.exact   chi.square
       0            NA           NA           NA
       1  1.421085e-14 1.319062e-14 7.031442e-16
       2+ 7.656098e-13 7.069771e-13 5.375359e-14

$mportion$correction
[1] FALSE

attr(,"method")
[1] "Unconditional MLE &amp; normal approximation (Wald) CI"

$beer
$beer$data
         Outcome
Predictor   0  1 Total
    0      96 69   165
    1      76 30   106
    Total 172 99   271

$beer$measure
         risk ratio with 95% C.I.
Predictor  estimate     lower   upper
        0 1.0000000        NA      NA
        1 0.6767842 0.4757688 0.96273

$beer$p.value
         two-sided
Predictor midp.exact fisher.exact chi.square
        0         NA           NA         NA
        1 0.02439079   0.02806394 0.02413045

$beer$correction
[1] FALSE

attr(,"method")
[1] "Unconditional MLE &amp; normal approximation (Wald) CI"

$redjelly
$redjelly$data
         Outcome
Predictor   0   1 Total
    0     154  58   212
    1      34  45    79
    Total 188 103   291

$redjelly$measure
         risk ratio with 95% C.I.
Predictor estimate    lower    upper
        0  1.00000       NA       NA
        1  2.08206 1.555917 2.786123

$redjelly$p.value
         two-sided
Predictor   midp.exact fisher.exact   chi.square
        0           NA           NA           NA
        1 4.364656e-06 4.415074e-06 2.646618e-06

$redjelly$correction
[1] FALSE

attr(,"method")
[1] "Unconditional MLE &amp; normal approximation (Wald) CI"

$fruitsalad
$fruitsalad$data
         Outcome
Predictor   0   1 Total
    0     163  57   220
    1      25  46    71
    Total 188 103   291

$fruitsalad$measure
         risk ratio with 95% C.I.
Predictor estimate    lower    upper
        0 1.000000       NA       NA
        1 2.500618 1.886773 3.314171

$fruitsalad$p.value
         two-sided
Predictor   midp.exact fisher.exact   chi.square
        0           NA           NA           NA
        1 6.152039e-09 9.998203e-09 2.572527e-09

$fruitsalad$correction
[1] FALSE

attr(,"method")
[1] "Unconditional MLE &amp; normal approximation (Wald) CI"

$tomato
$tomato$data
         Outcome
Predictor   0   1 Total
    0     140  68   208
    1      48  35    83
    Total 188 103   291

$tomato$measure
         risk ratio with 95% C.I.
Predictor estimate     lower    upper
        0 1.000000        NA       NA
        1 1.289865 0.9379601 1.773799

$tomato$p.value
         two-sided
Predictor midp.exact fisher.exact chi.square
        0         NA           NA         NA
        1   0.131876    0.1368934  0.1269162

$tomato$correction
[1] FALSE

attr(,"method")
[1] "Unconditional MLE &amp; normal approximation (Wald) CI"

$mince
$mince$data
         Outcome
Predictor   0   1 Total
    0     133  71   204
    1      55  32    87
    Total 188 103   291

$mince$measure
         risk ratio with 95% C.I.
Predictor estimate     lower    upper
        0 1.000000        NA       NA
        1 1.056824 0.7571858 1.475036

$mince$p.value
         two-sided
Predictor midp.exact fisher.exact chi.square
        0         NA           NA         NA
        1  0.7455228    0.7893882  0.7467072

$mince$correction
[1] FALSE

attr(,"method")
[1] "Unconditional MLE &amp; normal approximation (Wald) CI"

$salmon
$salmon$data
         Outcome
Predictor   0   1 Total
    0     120  63   183
    1      67  37   104
    Total 187 100   287

$salmon$measure
         risk ratio with 95% C.I.
Predictor estimate     lower    upper
        0 1.000000        NA       NA
        1 1.033425 0.7452531 1.433026

$salmon$p.value
         two-sided
Predictor midp.exact fisher.exact chi.square
        0         NA           NA         NA
        1  0.8427855    0.8976422  0.8440915

$salmon$correction
[1] FALSE

attr(,"method")
[1] "Unconditional MLE &amp; normal approximation (Wald) CI"

$horseradish
$horseradish$data
         Outcome
Predictor   0   1 Total
    0     145  72   217
    1      42  30    72
    Total 187 102   289

$horseradish$measure
         risk ratio with 95% C.I.
Predictor estimate     lower    upper
        0 1.000000        NA       NA
        1 1.255787 0.9008457 1.750578

$horseradish$p.value
         two-sided
Predictor midp.exact fisher.exact chi.square
        0         NA           NA         NA
        1  0.1973981    0.2026013  0.1916218

$horseradish$correction
[1] FALSE

attr(,"method")
[1] "Unconditional MLE &amp; normal approximation (Wald) CI"

$chickenwin
$chickenwin$data
         Outcome
Predictor   0   1 Total
    0     137  70   207
    1      51  33    84
    Total 188 103   291

$chickenwin$measure
         risk ratio with 95% C.I.
Predictor estimate     lower    upper
        0 1.000000        NA       NA
        1 1.161735 0.8376217 1.611261

$chickenwin$p.value
         two-sided
Predictor midp.exact fisher.exact chi.square
        0         NA           NA         NA
        1  0.3803364    0.4176598  0.3766386

$chickenwin$correction
[1] FALSE

attr(,"method")
[1] "Unconditional MLE &amp; normal approximation (Wald) CI"

$roastbeef
$roastbeef$data
         Outcome
Predictor   0   1 Total
    0     167  95   262
    1      21   8    29
    Total 188 103   291

$roastbeef$measure
         risk ratio with 95% C.I.
Predictor  estimate     lower    upper
        0 1.0000000        NA       NA
        1 0.7607985 0.4129094 1.401795

$roastbeef$p.value
         two-sided
Predictor midp.exact fisher.exact chi.square
        0         NA           NA         NA
        1   0.365577    0.4172932  0.3540318

$roastbeef$correction
[1] FALSE

attr(,"method")
[1] "Unconditional MLE &amp; normal approximation (Wald) CI"

$pork
$pork$data
         Outcome
Predictor   0   1 Total
    0     115  54   169
    1      72  48   120
    Total 187 102   289

$pork$measure
         risk ratio with 95% C.I.
Predictor estimate     lower    upper
        0 1.000000        NA       NA
        1 1.251852 0.9176849 1.707703

$pork$p.value
         two-sided
Predictor midp.exact fisher.exact chi.square
        0         NA           NA         NA
        1  0.1620037    0.1708777  0.1583527

$pork$correction
[1] FALSE

attr(,"method")
[1] "Unconditional MLE &amp; normal approximation (Wald) CI"</code></pre>
</div>
</div>
<p><br></p>
</details><div class="webex-check">
QUESTION: Which exposure has the highest risk ratio?
<div id="radio_JSNYWYUVAF" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_JSNYWYUVAF" value=""><span>beer</span></label><label><input type="radio" autocomplete="off" name="radio_JSNYWYUVAF" value="answer"><span>tiramisu</span></label><label><input type="radio" autocomplete="off" name="radio_JSNYWYUVAF" value=""><span>pork</span></label><label><input type="radio" autocomplete="off" name="radio_JSNYWYUVAF" value=""><span>dark mousse</span></label>
</div>
</div>
<div class="webex-check">
QUESTION: Which of the following seems like a protective factor?
<div id="radio_HRDUKPBIMQ" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_HRDUKPBIMQ" value="answer"><span>beer</span></label><label><input type="radio" autocomplete="off" name="radio_HRDUKPBIMQ" value=""><span>tiramisu</span></label><label><input type="radio" autocomplete="off" name="radio_HRDUKPBIMQ" value=""><span>pork</span></label><label><input type="radio" autocomplete="off" name="radio_HRDUKPBIMQ" value=""><span>dark mousse</span></label>
</div>
</div>
<div class="webex-check">
QUESTION: Which of the following has a non-significant association?
<div id="radio_QBCPHPCRXL" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_QBCPHPCRXL" value=""><span>beer</span></label><label><input type="radio" autocomplete="off" name="radio_QBCPHPCRXL" value=""><span>tiramisu</span></label><label><input type="radio" autocomplete="off" name="radio_QBCPHPCRXL" value="answer"><span>pork</span></label><label><input type="radio" autocomplete="off" name="radio_QBCPHPCRXL" value=""><span>dark mousse</span></label>
</div>
</div>
<div class="webex-check">
QUESTION: Is there a dose-response in the association between illness and tiramisu?
<div id="radio_WNQGQBCJXI" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_WNQGQBCJXI" value="answer"><span>Yes</span></label><label><input type="radio" autocomplete="off" name="radio_WNQGQBCJXI" value=""><span>No</span></label>
</div>
</div>
<p>Several food items seemed to be associated with the occurrence of illness; <strong>tiramisu, dark and white chocolate mousse, fruit salad, and red jelly</strong>. They can potentially explain up to 94, 76, 49, 46, and 45 of the 103 cases, respectively. Investigators decided to identify their respective roles in the occurrence of illness. There also seems to be a <strong>dose-response</strong> in the amount of tiramisu eaten, with those eating 2 or more portions having a higher risk than those eating only 1 (who had a higher risk than those who did not eat tiramisu)</p>
<p>From the crude analysis, epidemiologists noticed that the occurrence of <strong>gastroenteritis was lower among those attendants who had drunk beer.</strong> They also decided to assess if beer had a protective effect on the occurrence of gastroenteritis.</p>
</section><section id="step-5.3-confounding-and-effect-modification" class="level4"><h4 class="anchored" data-anchor-id="step-5.3-confounding-and-effect-modification">Step 5.3: Confounding and effect modification</h4>
<p>The finding that beer had a protective effect on GI illness is surprising. One of your colleagues suggested that tiramisu might be confounding this association. Given that tiramisu has the highest risk ratio, it might be that the dessert is associated with the outcome (causes it) and to the exposure (those drinking beer might have preferred not to ruin its sour flavour with the sweetness of tiramisu). Another colleague disagrees and thinks that, actually, tiramisu might be an effect modifier in the relation between beer and illness.</p>
<p>QUESTION: How would you check if tiramisu is a confounder or an effect modifier in the association between beer and illness?</p>
<details><summary style="text-decoration: underline; color: red;"><p><svg aria-hidden="true" role="img" viewbox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:red;overflow:visible;position:relative;"><path d="M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg>Click to see a solution (try it yourself first!)</p>
</summary><p><br></p>
<p>To check both things: confounding and effect modification, we should stratify our data by tiramisu consumption. Once stratified, we can calculate risk ratios in both strata and an adjusted risk ratio: <strong>the adjusted Mantel–Haenszel risk ratio</strong>. If this risk ratio is very different from the crude risk ratio (the overall risk ratio between beer and illness), we could say that tiramisu is confounding the association between beer and illness. We normally define as “very different” when: <span class="math inline">\((RRcrude/RRadjusted - 1)*100\)</span> is larger than 10-20% difference (no strict threshold, your interpretation and expertise counts!).</p>
<p>If there is confounding but no effect modification, the adjusted M-H risk ratio should be different from the crude RR, but <strong>the risk ratios in each strata -tiramisu yes and tiramisu no- should not be significantly different</strong>. If they are significantly different then there is <strong>effect modification</strong>. How do we know if they are significantly different? We can run a test to tell us that called <strong>the Mantel–Haenszel test of homogeneity</strong>. <br></p>
</details><p><strong>Task</strong>: Check if tiramisu is a confounder or an effect modifier in the association between beer and illness</p>
<p>Try doing this task with the function <code>epi.2by2()</code> from the {epiR} package. <strong>Read very carefully the documentation of the function</strong>. Pay special attention at how the data needs to be structured. Read the hint if you are struggling</p>
<details><summary style="text-decoration: underline; color: darkgreen;"><p><svg aria-hidden="true" role="img" viewbox="0 0 384 512" style="height:1em;width:0.75em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:gold;overflow:visible;position:relative;"><path d="M297.2 248.9C311.6 228.3 320 203.2 320 176c0-70.7-57.3-128-128-128S64 105.3 64 176c0 27.2 8.4 52.3 22.8 72.9c3.7 5.3 8.1 11.3 12.8 17.7l0 0c12.9 17.7 28.3 38.9 39.8 59.8c10.4 19 15.7 38.8 18.3 57.5H109c-2.2-12-5.9-23.7-11.8-34.5c-9.9-18-22.2-34.9-34.5-51.8l0 0 0 0c-5.2-7.1-10.4-14.2-15.4-21.4C27.6 247.9 16 213.3 16 176C16 78.8 94.8 0 192 0s176 78.8 176 176c0 37.3-11.6 71.9-31.4 100.3c-5 7.2-10.2 14.3-15.4 21.4l0 0 0 0c-12.3 16.8-24.6 33.7-34.5 51.8c-5.9 10.8-9.6 22.5-11.8 34.5H226.4c2.6-18.7 7.9-38.6 18.3-57.5c11.5-20.9 26.9-42.1 39.8-59.8l0 0 0 0 0 0c4.7-6.4 9-12.4 12.7-17.7zM192 128c-26.5 0-48 21.5-48 48c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-44.2 35.8-80 80-80c8.8 0 16 7.2 16 16s-7.2 16-16 16zm0 384c-44.2 0-80-35.8-80-80V416H272v16c0 44.2-35.8 80-80 80z"></path></svg> Click to read a hint</p>
</summary><p><br></p>
<p>Unfortunately <code>epi.2by2()</code> is a very “picky” function. Although you can pass data into <code>epi.2by2()</code> in different formats, the easiest way is to create a new data frame grouped by the three columns that we will use: tira, beer and ill.  You could pass this new dataframe into <code>epi.2by2()</code> and it may work, but be careful. <code>epi.2by2()</code> will consider as <em>exposed</em> and as <em>ill</em> the first levels of your factor data, as per the image they have in the documentation and that we show you below:</p>
<p><img src="../images/stengen/epi.2by2_data.png" class="img-fluid"> Now run this line of code <code>riskratio(tira_clean$beer, tira_clean$ill)</code> and look at the first part of the output. You should see something like this:</p>
<p><img src="../images/stengen/beer_data_before.png" class="img-fluid"></p>
<p>As you see, in the top left (96) we have unexposed who did not become ill, but in the previous image we saw that <code>epi.2by2()</code> will consider those in the top left (a) as exposed and ill. How to overcome this? The trick is to change the levels of the factor variables. By default, they have “0” as first level and “1” as second level. So, we can add a line that changes the order of the levels before we groups the data (See the solution if you don’t know what its meant)</p>
<p><br></p>
</details><details><summary style="text-decoration: underline; color: red;"><p><svg aria-hidden="true" role="img" viewbox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:red;overflow:visible;position:relative;"><path d="M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg>Click to see a solution (try it yourself first!)</p>
</summary><p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Group the dataframe</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>group_data <span class="ot">&lt;-</span> tira_clean <span class="sc">%&gt;%</span> </span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="at">.cols =</span> <span class="fu">c</span>(tira, beer, ill), <span class="at">.fns =</span> <span class="sc">~</span><span class="fu">factor</span>(.x, <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">0</span>)))) <span class="sc">%&gt;%</span> <span class="co"># we change the order of the levels</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(tira, beer, ill) <span class="sc">%&gt;%</span> <span class="co"># it's important to group them in this order: strata, exposure, outcome</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>()) </span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a><span class="do">### Run the function to obtain M-H estimates</span></span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>strat_analysis <span class="ot">&lt;-</span> <span class="fu">epi.2by2</span>(<span class="at">dat =</span> group_data, <span class="at">method =</span> <span class="st">"cohort.count"</span>,  <span class="co"># the method specifies that we are dealing with a cohort study</span></span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>           <span class="at">conf.level =</span> <span class="fl">0.95</span>, <span class="at">outcome =</span> <span class="st">"as.columns"</span>)                  <span class="co"># we set up confidence intervals to 95 and we specify that the outcome variable is a column in the data</span></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a><span class="co">#Print the results</span></span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>strat_analysis</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>             Outcome +    Outcome -      Total                 Inc risk *
Exposed +           30           74        104     28.85 (20.38 to 38.55)
Exposed -           67           95        162     41.36 (33.69 to 49.35)
Total               97          169        266     36.47 (30.67 to 42.56)


Point estimates and 95% CIs:
-------------------------------------------------------------------
Inc risk ratio (crude)                         0.70 (0.49, 0.99)
Inc risk ratio (M-H)                           0.80 (0.62, 1.03)
Inc risk ratio (crude:M-H)                     0.87
Inc odds ratio (crude)                         0.57 (0.34, 0.97)
Inc odds ratio (M-H)                           0.48 (0.22, 1.05)
Inc odds ratio (crude:M-H)                     1.19
Attrib risk in the exposed (crude) *           -12.51 (-24.06, -0.97)
Attrib risk in the exposed (M-H) *             -7.53 (-15.59, 0.52)
Attrib risk (crude:M-H)                        1.66
-------------------------------------------------------------------
 M-H test of homogeneity of IRRs: chi2(1) = 0.136 Pr&gt;chi2 = 0.713
 M-H test of homogeneity of ORs: chi2(1) = 1.512 Pr&gt;chi2 = 0.219
 Test that M-H adjusted OR = 1:  chi2(1) = 3.590 Pr&gt;chi2 = 0.029
 Wald confidence limits
 M-H: Mantel-Haenszel; CI: confidence interval
 * Outcomes per 100 population units </code></pre>
</div>
</div>
<p><br></p>
</details><div class="webex-check">
QUESTION: Look at the results, what’s the magnitude of the difference between the adjusted MH risk ratio and the crude one?
<div id="radio_PBRSGWJOCU" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_PBRSGWJOCU" value="answer"><span>13%</span></label><label><input type="radio" autocomplete="off" name="radio_PBRSGWJOCU" value=""><span>87%</span></label><label><input type="radio" autocomplete="off" name="radio_PBRSGWJOCU" value=""><span>30%</span></label><label><input type="radio" autocomplete="off" name="radio_PBRSGWJOCU" value=""><span>20%</span></label>
</div>
</div>
<div class="webex-check">
QUESTION: Look at the results, is tiramisu an effect modifier in the association between beer and illness?
<div id="radio_FZDGTCCSZL" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_FZDGTCCSZL" value="answer"><span>No</span></label><label><input type="radio" autocomplete="off" name="radio_FZDGTCCSZL" value=""><span>Yes</span></label>
</div>
</div>
<p>You got several results. Let’s now review them to make sense of them:</p>
<p>The first part is a table in which you get the overall table for the association between beer and illness. The second part, titled <em>Point estimates and 95% CIs:</em> has different estimates depending on whether you’re interested in risk ratios, odds ratios or attributable risks. As we are carrying out a cohort study, we’re interested in the ones for <strong>risk ratios</strong>.</p>
<ul>
<li><p><strong>Inc risk ratio (crude)</strong>: The crude incidence risk ratio, comparing the risk of the outcome between exposed and unexposed groups, with 95% confidence intervals. In this case, this is the overall risk of illness in those who drank beer compared to those who did not drink it.</p></li>
<li><p><strong>Inc risk ratio (M-H):</strong> The Mantel-Haenszel adjusted incidence risk ratio, accounting for stratification by tiramisu, with 95% confidence intervals.</p></li>
<li><p><strong>Inc risk ratio (crude:M-H):</strong> The ratio of the crude incidence risk ratio to the Mantel-Haenszel adjusted incidence risk ratio.</p></li>
</ul>
<p>This is all we need to evaluate confounding. As we said before, we need to evaluate if the crude and the adjusted risk ratios are very different. We said that we can do that with the formula <span class="math inline">\((RRcrude/RRadjusted - 1)*100\)</span>. Here, the <strong>Inc risk ratio (crude:M-H):</strong> corresponds to the first part: <span class="math inline">\(RRcrude/RRadjusted\)</span>. So we need to substract 1 and multiple by 100: (0.87-1)*100. If you do that you’ll get 13%, which is borderline, but we can say that tiramisu is not massively confounding the association between beer and illness.</p>
<p>To know whether there is effect modification, you can check the <strong>M-H test of homogeneity of IRRs</strong> in the lower part of the results. As it is not significant (p = 0.713), we can conclude there is no effect modification of tiramisu on the association between beer and illness.</p>


</section></section></section></main><!-- /main --><script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  var t = document.getElementsByClassName("webex-total_correct");
  for (var i = 0; i < t.length; i++) {
    p = t[i].parentElement;
    var correct = p.getElementsByClassName("webex-correct").length;
    var solvemes = p.getElementsByClassName("webex-solveme").length;
    var radiogroups = p.getElementsByClassName("webex-radiogroup").length;
    var selects = p.getElementsByClassName("webex-select").length;

    t[i].innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  console.log("webex: toggle hide");

  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* check answers */
check_func = function() {
  console.log("webex: check answers");

  var cl = this.parentElement.classList;
  if (cl.contains('unchecked')) {
    cl.remove("unchecked");
    this.innerHTML = "Hide Answers";
  } else {
    cl.add("unchecked");
    this.innerHTML = "Show Answers";
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  console.log("webex: check solveme");

  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");

  var cl = this.classList

  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;

  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }

  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

window.onload = function() {
  console.log("webex onload");
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  var check_sections = document.getElementsByClassName("webex-check");
  console.log("check:", check_sections.length);
  for (var i = 0; i < check_sections.length; i++) {
    check_sections[i].classList.add("unchecked");

    let btn = document.createElement("button");
    btn.innerHTML = "Show Answers";
    btn.classList.add("webex-check-button");
    btn.onclick = check_func;
    check_sections[i].appendChild(btn);

    let spn = document.createElement("span");
    spn.classList.add("webex-total_correct");
    check_sections[i].appendChild(spn);
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;

    solveme[i].insertAdjacentHTML("afterend", " <span class='webex-icon'></span>")
  }

  /* set up radiogroups */
  var radiogroups = document.getElementsByClassName("webex-radiogroup");
  for (var i = 0; i < radiogroups.length; i++) {
    radiogroups[i].onchange = radiogroups_func;
  }

  /* set up selects */
  var selects = document.getElementsByClassName("webex-select");
  for (var i = 0; i < selects.length; i++) {
    selects[i].onchange = select_func;
    selects[i].insertAdjacentHTML("afterend", " <span class='webex-icon'></span>")
  }

  update_total_correct();
}

</script><script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  var t = document.getElementsByClassName("webex-total_correct");
  for (var i = 0; i < t.length; i++) {
    p = t[i].parentElement;
    var correct = p.getElementsByClassName("webex-correct").length;
    var solvemes = p.getElementsByClassName("webex-solveme").length;
    var radiogroups = p.getElementsByClassName("webex-radiogroup").length;
    var selects = p.getElementsByClassName("webex-select").length;

    t[i].innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  console.log("webex: toggle hide");

  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* check answers */
check_func = function() {
  console.log("webex: check answers");

  var cl = this.parentElement.classList;
  if (cl.contains('unchecked')) {
    cl.remove("unchecked");
    this.innerHTML = "Hide Answers";
  } else {
    cl.add("unchecked");
    this.innerHTML = "Show Answers";
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  console.log("webex: check solveme");

  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");

  var cl = this.classList

  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;

  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }

  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

window.onload = function() {
  console.log("webex onload");
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  var check_sections = document.getElementsByClassName("webex-check");
  console.log("check:", check_sections.length);
  for (var i = 0; i < check_sections.length; i++) {
    check_sections[i].classList.add("unchecked");

    let btn = document.createElement("button");
    btn.innerHTML = "Show Answers";
    btn.classList.add("webex-check-button");
    btn.onclick = check_func;
    check_sections[i].appendChild(btn);

    let spn = document.createElement("span");
    spn.classList.add("webex-total_correct");
    check_sections[i].appendChild(spn);
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;

    solveme[i].insertAdjacentHTML("afterend", " <span class='webex-icon'></span>")
  }

  /* set up radiogroups */
  var radiogroups = document.getElementsByClassName("webex-radiogroup");
  for (var i = 0; i < radiogroups.length; i++) {
    radiogroups[i].onchange = radiogroups_func;
  }

  /* set up selects */
  var selects = document.getElementsByClassName("webex-select");
  for (var i = 0; i < selects.length; i++) {
    selects[i].onchange = select_func;
    selects[i].insertAdjacentHTML("afterend", " <span class='webex-icon'></span>")
  }

  update_total_correct();
}

</script><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="../pages/tbe.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">TBE - Linear regression (ENG)</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../pages/openxlsx2_tutorial-en_revised.html" class="pagination-link">
        <span class="nav-page-text">Creating reports with R and MS Excel: a tutorial using the openxls2 package (EN)</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body>
</html>
