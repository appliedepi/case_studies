<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>multidisease_surveillance_pt – Applied Epi Open Case Study Repository</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/cookie-consent/cookie-consent.js"></script>
<link href="../site_libs/cookie-consent/cookie-consent.css" rel="stylesheet">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark-b53751a350365c71b6c909e95f209ed1.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-5691fe21f15c47ebcb49dba363e4b95c.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark-f678271bfa5f89a12cd5988ebf25c028.min.css" rel="prefetch" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-YBNGPHQ4MK"></script>

<script type="text/plain" cookie-consent="tracking">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-YBNGPHQ4MK', { 'anonymize_ip': true});
</script>

<script type="text/javascript" charset="UTF-8">
document.addEventListener('DOMContentLoaded', function () {
cookieconsent.run({
  "notice_banner_type":"simple",
  "consent_type":"implied",
  "palette":"light",
  "language":"en",
  "page_load_consent_levels":["strictly-necessary","functionality","tracking","targeting"],
  "notice_banner_reject_button_hide":false,
  "preferences_center_close_button_hide":false,
  "website_name":""
  ,
"language":"en"
  });
});
</script> 
  
<link href="../site_libs/tabwid-1.1.3/tabwid.css" rel="stylesheet">
<script src="../site_libs/tabwid-1.1.3/tabwid.js"></script>


<link rel="stylesheet" href="webex.css">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Applied Epi Open Case Study Repository</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="../index.html" aria-current="page"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../pages/instructions.html"> 
<span class="menu-text">How-to Guide</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://appliedepi.org/"> 
<span class="menu-text">About Applied Epi</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools tools-wide">
    <a href="https://twitter.com/appliedepi" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-twitter"></i></a>
    <a href="https://www.linkedin.com/company/appliedepi/" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-linkedin"></i></a>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
      <a href="../index.html" class="sidebar-logo-link">
      <img src="../images/logos/Applied_Epi_logo.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
      </div>
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#multi_disease_lab" id="toc-multi_disease_lab" class="nav-link active" data-scroll-target="#multi_disease_lab">Ligação e análise de dados de notificação e de dados laboratoriais em R</a>
  <ul class="collapse">
  <li><a href="#cenário" id="toc-cenário" class="nav-link" data-scroll-target="#cenário">Cenário</a></li>
  <li><a href="#objetivos" id="toc-objetivos" class="nav-link" data-scroll-target="#objetivos">Objetivos</a></li>
  <li><a href="#passo-1.-configuração" id="toc-passo-1.-configuração" class="nav-link" data-scroll-target="#passo-1.-configuração">Passo 1. Configuração</a>
  <ul class="collapse">
  <li><a href="#começar-a-utilizar-o-rstudio" id="toc-começar-a-utilizar-o-rstudio" class="nav-link" data-scroll-target="#começar-a-utilizar-o-rstudio">1.1 Começar a utilizar o RStudio</a></li>
  <li><a href="#instalarcarregar-pacotes" id="toc-instalarcarregar-pacotes" class="nav-link" data-scroll-target="#instalarcarregar-pacotes">1.2 Instalar/carregar pacotes</a></li>
  </ul></li>
  <li><a href="#passo-2.-baixar-e-importar-os-dados" id="toc-passo-2.-baixar-e-importar-os-dados" class="nav-link" data-scroll-target="#passo-2.-baixar-e-importar-os-dados">Passo 2. Baixar e importar os dados</a>
  <ul class="collapse">
  <li><a href="#baixar-os-dados" id="toc-baixar-os-dados" class="nav-link" data-scroll-target="#baixar-os-dados">2.1: Baixar os dados</a></li>
  <li><a href="#importar-os-dados" id="toc-importar-os-dados" class="nav-link" data-scroll-target="#importar-os-dados">2.2 Importar os dados</a></li>
  </ul></li>
  <li><a href="#passo-3.-inspecionar-os-dados" id="toc-passo-3.-inspecionar-os-dados" class="nav-link" data-scroll-target="#passo-3.-inspecionar-os-dados">Passo 3. Inspecionar os dados</a>
  <ul class="collapse">
  <li><a href="#passo-3.1-inspecionar-os-dados-de-notificação" id="toc-passo-3.1-inspecionar-os-dados-de-notificação" class="nav-link" data-scroll-target="#passo-3.1-inspecionar-os-dados-de-notificação">Passo 3.1 Inspecionar os dados de notificação</a></li>
  <li><a href="#passo-3.2-inspecionar-os-dados-laboratoriais" id="toc-passo-3.2-inspecionar-os-dados-laboratoriais" class="nav-link" data-scroll-target="#passo-3.2-inspecionar-os-dados-laboratoriais">Passo 3.2 Inspecionar os dados laboratoriais</a></li>
  </ul></li>
  <li><a href="#passo-4.-limpar-e-descrever-os-dados-de-notificação" id="toc-passo-4.-limpar-e-descrever-os-dados-de-notificação" class="nav-link" data-scroll-target="#passo-4.-limpar-e-descrever-os-dados-de-notificação">Passo 4. Limpar e descrever os dados de notificação</a>
  <ul class="collapse">
  <li><a href="#passo-4.1-limpar-os-dados" id="toc-passo-4.1-limpar-os-dados" class="nav-link" data-scroll-target="#passo-4.1-limpar-os-dados">Passo 4.1 Limpar os dados</a></li>
  <li><a href="#etapa-4.2-análise-descritiva-simples" id="toc-etapa-4.2-análise-descritiva-simples" class="nav-link" data-scroll-target="#etapa-4.2-análise-descritiva-simples">Etapa 4.2 Análise descritiva simples</a></li>
  </ul></li>
  <li><a href="#passo-5.-limpar-consolidar-e-descrever-os-dados-laboratoriais" id="toc-passo-5.-limpar-consolidar-e-descrever-os-dados-laboratoriais" class="nav-link" data-scroll-target="#passo-5.-limpar-consolidar-e-descrever-os-dados-laboratoriais">Passo 5. Limpar, consolidar e descrever os dados laboratoriais</a>
  <ul class="collapse">
  <li><a href="#passo-5.1-normalizar-os-resultados-dos-testes" id="toc-passo-5.1-normalizar-os-resultados-dos-testes" class="nav-link" data-scroll-target="#passo-5.1-normalizar-os-resultados-dos-testes">Passo 5.1 Normalizar os resultados dos testes</a></li>
  <li><a href="#passo-5.2-consolidar-uma-linha-por-teste" id="toc-passo-5.2-consolidar-uma-linha-por-teste" class="nav-link" data-scroll-target="#passo-5.2-consolidar-uma-linha-por-teste">Passo 5.2 Consolidar uma linha por teste</a></li>
  <li><a href="#passo-5.3-análise-descritiva-simples" id="toc-passo-5.3-análise-descritiva-simples" class="nav-link" data-scroll-target="#passo-5.3-análise-descritiva-simples">Passo 5.3 Análise descritiva simples</a></li>
  </ul></li>
  <li><a href="#etapa-6.-vinculação-e-processamento-final" id="toc-etapa-6.-vinculação-e-processamento-final" class="nav-link" data-scroll-target="#etapa-6.-vinculação-e-processamento-final">Etapa 6. Vinculação e processamento final</a>
  <ul class="collapse">
  <li><a href="#passo-6.1-vincular-os-dados-de-notificação-e-os-dados-laboratoriais" id="toc-passo-6.1-vincular-os-dados-de-notificação-e-os-dados-laboratoriais" class="nav-link" data-scroll-target="#passo-6.1-vincular-os-dados-de-notificação-e-os-dados-laboratoriais">Passo 6.1 Vincular os dados de notificação e os dados laboratoriais</a></li>
  <li><a href="#passo-6.2-rotular-os-casos-confirmados-descartados-e-suspeitos" id="toc-passo-6.2-rotular-os-casos-confirmados-descartados-e-suspeitos" class="nav-link" data-scroll-target="#passo-6.2-rotular-os-casos-confirmados-descartados-e-suspeitos">Passo 6.2 Rotular os casos confirmados, descartados e suspeitos</a></li>
  <li><a href="#passo-6.3-analisar-a-distribuição-dos-resultados-laboratoriais-entre-os-casos" id="toc-passo-6.3-analisar-a-distribuição-dos-resultados-laboratoriais-entre-os-casos" class="nav-link" data-scroll-target="#passo-6.3-analisar-a-distribuição-dos-resultados-laboratoriais-entre-os-casos">Passo 6.3 Analisar a distribuição dos resultados laboratoriais entre os casos</a></li>
  <li><a href="#passo-6.4-criar-uma-lista-com-apenas-casos-confirmados" id="toc-passo-6.4-criar-uma-lista-com-apenas-casos-confirmados" class="nav-link" data-scroll-target="#passo-6.4-criar-uma-lista-com-apenas-casos-confirmados">Passo 6.4 Criar uma lista com apenas casos confirmados</a></li>
  </ul></li>
  <li><a href="#passo-7.-análise-descritiva-dos-casos-confirmados" id="toc-passo-7.-análise-descritiva-dos-casos-confirmados" class="nav-link" data-scroll-target="#passo-7.-análise-descritiva-dos-casos-confirmados">Passo 7. Análise descritiva dos casos confirmados</a>
  <ul class="collapse">
  <li><a href="#passo-7.1-descrever-os-casos-por-distrito" id="toc-passo-7.1-descrever-os-casos-por-distrito" class="nav-link" data-scroll-target="#passo-7.1-descrever-os-casos-por-distrito">Passo 7.1 Descrever os casos por distrito</a></li>
  <li><a href="#passo-7.2-descrever-os-casos-ao-longo-do-tempo" id="toc-passo-7.2-descrever-os-casos-ao-longo-do-tempo" class="nav-link" data-scroll-target="#passo-7.2-descrever-os-casos-ao-longo-do-tempo">Passo 7.2 Descrever os casos ao longo do tempo</a></li>
  </ul></li>
  <li><a href="#conclusão" id="toc-conclusão" class="nav-link" data-scroll-target="#conclusão">Conclusão</a></li>
  <li><a href="#código-para-limpeza-e-análise-dos-dados" id="toc-código-para-limpeza-e-análise-dos-dados" class="nav-link" data-scroll-target="#código-para-limpeza-e-análise-dos-dados">Código para limpeza e análise dos dados</a></li>
  <li><a href="#informações-sobre-o-estudo-de-caso" id="toc-informações-sobre-o-estudo-de-caso" class="nav-link" data-scroll-target="#informações-sobre-o-estudo-de-caso">Informações sobre o estudo de caso</a></li>
  <li><a href="#termos-de-uso" id="toc-termos-de-uso" class="nav-link" data-scroll-target="#termos-de-uso">Termos de uso</a></li>
  </ul></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block"></header>




<section id="multi_disease_lab" class="level1">
<h1>Ligação e análise de dados de notificação e de dados laboratoriais em R</h1>
<div class="callout callout-style-simple callout-note no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><strong>Ferramenta</strong>: R <strong>Complexidade técnica</strong>: Intermédiaria <strong>Complexidade metodológica</strong>: Básica</p>
<p><strong>Conhecimentos prévios necessários:</strong> <a href="https://epirhandbook.com/pt/basics.pt.html">Noções básicas de R</a> (Utilizando Rstudio; pacotes R, funções e argumentos, utilização de pipes), bem como as principais funções tidyverse e ggplots)</p>
<p><strong>Fonte:</strong> Applied Epi, com apoio técnico fornecido pelo CDC Global Surveillance, Laboratory, and Data Systems Branch em colaboração com a TEPHINET.</p>
</div>
</div>
</div>
<p>Para obter instruções sobre como utilizar os nossos estudos de caso, consulte o nosso <a href="instructions.html">guia</a>. Agradecemos comentários e sugestões via <a href="mailto:contact@appliedepi.org">contact@appliedepi.org</a>. Também pode discutir o estudo de caso ou conceitos relacionados na <a href="https://community.appliedepi.org/">Comunidade Applied Epi</a>.</p>
<section id="cenário" class="level2">
<h2 class="anchored" data-anchor-id="cenário">Cenário</h2>
<p>Você é um epidemiologista que trabalha no serviço nacional de vigilância de Feveria, um país tropical muito pequeno. Existem três distritos em Feveria:</p>
<ul>
<li><strong>Feveria Central</strong>:uma área urbana superpovoada, com infraestrutura de água e saneamento às vezes precária.</li>
<li><strong>Lago Minara</strong>: uma zona lacustre com boa infra-estrutura mas muitos mosquitos nos meses mais quentes do ano.</li>
<li><strong>Kasara</strong>: uma zona mais suburbana do outro lado de Feveria Central.</li>
</ul>
<p><strong>Mapa dos distritos do país Feveria</strong></p>
<p><img src="../images/multidisease_surveillance/map_pt.png" class="img-fluid" style="width:70.0%"></p>
<p>É janeiro de 2025, e sua supervisora gostaria que você transferisse o processamento rotineiro dos dados de doenças de notificação compulsória do Excel para o R e realizasse algumas análises com os dados. Ela quer saber pelo menos:</p>
<ul>
<li>Quantos casos suspeitos das diferentes doenças de notificação compulsória foram notificados em 2024 e qual foi a mais comum?</li>
<li>Qual porcentagem deles acabou sendo confirmada?</li>
<li>Quantos casos confirmados das diferentes doenças de notificação compulsória foram notificados em 2024 e qual foi a mais comum?</li>
<li>Como é que os casos confirmados foram distribuídos geográfica e temporalmente em Feveria?</li>
</ul>
<p>Ela pede que você escreva código para importar, limpar, relacionar e analisar as seguintes listas de casos (linelists):</p>
<ul>
<li><strong>Dados de vigilância de doenças notificáveis de 2024:</strong> Também designados por “dados de notificação”, estes são dados de vigilância de cinco doenças notificáveis comunicadas pelas clínicas do Feveria: dengue, malária, cólera, febre tifoide e febre amarela. Trata-se de casos suspeitos, baseados nos sintomas dos pacientes. Os médicos introduzem cada notificação num sistema em linha todos os dias da semana.</li>
<li><strong>2024 dados de resultados de testes laboratoriais:</strong> Estes dados provêm de resultados de análises laboratoriais de três grandes laboratórios de Feveria. Estes resultados referem-se a amostras colhidas dos casos suspeitos de doenças notificáveis mencionados acima.</li>
</ul>
<p>Vamos lá!</p>
</section>
<section id="objetivos" class="level2">
<h2 class="anchored" data-anchor-id="objetivos">Objetivos</h2>
<p>Neste estudo de caso, você vai:</p>
<ol type="1">
<li>Usar funções-chave do R para limpar os dados, reorganizar os conjuntos de dados, relacionar fontes de dados e criar novas colunas usando condições lógicas, a fim de preparar os dados para análise.</li>
<li>Realizar inspecções de dados e verificações da qualidade dos dados em várias fases do projeto e compreender a sua importância para uma análise confiável.</li>
<li>Realizar análises descritivas básicas para comparar as tendências das doenças entre diferentes fontes de dados, antes e depois do linkage.</li>
<li>Interpretar as diferenças nos resultados entre as fontes de dados e compreender como elas refletem a estrutura e o desenho do sistema de vigilância como um todo.</li>
</ol>
</section>
<section id="passo-1.-configuração" class="level2">
<h2 class="anchored" data-anchor-id="passo-1.-configuração">Passo 1. Configuração</h2>
<section id="começar-a-utilizar-o-rstudio" class="level3">
<h3 class="anchored" data-anchor-id="começar-a-utilizar-o-rstudio">1.1 Começar a utilizar o RStudio</h3>
<p>Comece por estabelecer um fluxo de trabalho reproduzível e bem organizado. Este facilitará a repetição da sua análise sempre que necessário.</p>
<p><strong>Tarefas:</strong></p>
<ul>
<li>Configurar um projeto RStudio</li>
<li>Configurar subpastas claras onde o seu código, dados e resultados serão colocados</li>
<li>Crie um script R, ou um arquivo R Markdown, se preferir. Certifique-se de que que o objetivo do script, a data e o autor estão escritos como comentários no topo.</li>
<li>Extra: Certifique-se de que a sua linguagem de trabalho no RStudio é apropriada (por exemplo, inglês para este exercício)</li>
</ul>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Clique para ler uma dica
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<ul>
<li><p>Crie uma pasta para onde irá todo o trabalho deste estudo de caso. Por exemplo, crie a pasta ‘multidoencas_lab’ no ambiente de trabalho do seu computador. Crie o seu projeto RStudio para ser baseado nesta pasta.</p></li>
<li><p>Sugerimos que crie as seguintes subpastas: <code>scripts</code> (para os códigos), <code>data</code> (para os seus dados), e <code>outputs</code> (para os resultados da análise).</p></li>
</ul>
</div>
</div>
</div>
<div class="callout callout-style-default callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Clique para ver a solução (tente sozinho primeiro!)
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Crie uma pasta (por exemplo, ‘multidoencas_lab’ no seu ambiente de trabalho) para o seu trabalho. Para criar um projeto Rstudio na sua nova pasta, clique em <code>New Project…</code> no canto superior esquerdo do seu R Studio e, em seguida <code>Existing Directory</code> e, em seguida <code>Browse</code> para selecionar a sua nova pasta. Para mais informações, consulte a secção <a href="https://epirhandbook.com/pt/r_projects.pt.html">Projetos R</a> do Manual de R para Epidemiologistas</p>
<p>Inicie um novo script R clicando em <code>New File…</code> no canto superior esquerdo do seu R Studio e, em seguida <code>R Script</code>. Salve-o imediatamente no local apropriado, por exemplo, em uma subpasta ‘scripts’ dentro da pasta que contém seu projeto RStudio.</p>
<p>No topo do seu novo script R, escreva algumas informações essenciais como o seu nome, o objetivo do script e a data.</p>
<p>O locale do R determina o idioma e as definições regionais utilizadas para o coisas como formatos de data e traduções. Se a sua localidade for diferente do idioma que pretende para o seu relatório (por exemplo, uma localidade francesa vs.&nbsp;uma localidade em inglês), pode alterá-la para inglês executando <code>Sys.setlocale("LC_ALL", "English")</code>. Inclua isto no seu script se necessário, ou ignore-o se a sua localidade for normalmente apropriada. Isto é explicado em mais detalhes na seção <a href="pages/instructions.qmd">Guia de instruções</a>.</p>
</div>
</div>
</div>
</section>
<section id="instalarcarregar-pacotes" class="level3">
<h3 class="anchored" data-anchor-id="instalarcarregar-pacotes">1.2 Instalar/carregar pacotes</h3>
<p>A seguir, no seu script R, você precisa instalar e carregar os pacotes R necessários. Isto garante que as funções necessárias estarão disponíveis para sua análise.</p>
<p>São necessários os seguintes pacotes: <code>{rio}</code> (para importação de dados),<code>{skimr}</code> (para explroar os dados), <code>{janitor}</code> (para limpeza de dados), <code>{lubridate}</code> (para limpeza de datas), <code>{epikit}</code> (para tarefas relacionadas com epidemiologia), <code>{gtsummary}</code> (para estatísticas resumidas/testes e regressão), <code>{apyramid}</code> (para pirâmides etárias), <code>{flextable}</code> (para tabelas prontas para apresentação), <code>{naniar}</code> (para avaliar dados faltantes), e <code>{tidyverse}</code> (para tarefas gerais de manipulação de dados). Também vai precisar do <code>{remotes}</code> para baixar os dados - o que explicaremos na seção de download.</p>
<p>Ao começar, seu colega de confiança te cutuca e sussurra: “Ouvi dizer que uma ótima forma de gerenciar seus pacotes é com o pacote <code>{pacman}</code>”.</p>
<p>Agora é com você!</p>
<div class="callout callout-style-default callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Clique para ver a solução (tente sozinho primeiro!)
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Utilize a função <code>p_load()</code> do pacote <code>pacman</code> para esta tarefa. Você fornece uma lista de pacotes que deseja utilizar. A função executará dois passos por pacote: 1) Verificar se o pacote está instalado no seu computador, e instalá-lo se necessário, depois 2) Carregar o pacote para que ele possa ser usado durante esta sessão do R.</p>
<p>Se ainda não tem <code>pacman</code> instalado, será necessário instalar ele da “maneira tradicional”, com <code>install.packages()</code>.</p>
<p>Note que a ordem dos pacotes na sua função p_load pode ser importante. Se dois pacotes tiverem os mesmos nomes de função (por exemplo <code>select()</code> no pacote <code>MASS</code> e <code>select()</code> na <code>tidyverse</code>, que fazem diferentes coisas), então o R utilizará a função do pacote mais recentemente carregado. Para dar prioridade às funções do tidyverse, que são normalmente utilizadas para manipulação e visualização de dados, carregue sempre tidyverse por último.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Garante que o pacote "pacman" está instalado</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">"pacman"</span>)) {</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>     <span class="fu">install.packages</span>(<span class="st">"pacman"</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Instala (se necessário) a partir do CRAN e carrega os pacotes a serem usados</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>  rio,        <span class="co"># importar dados</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>  skimr,      <span class="co"># obter visão geral dos dados</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>  janitor,    <span class="co"># limpeza de dados e criação de tabelas</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>  lubridate,  <span class="co"># trabalhar com datas</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>  epikit,     <span class="co"># criar categorias de idade</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>  gtsummary,  <span class="co"># estatísticas resumidas, testes e regressões</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>  apyramid,   <span class="co"># plotar pirâmides etárias</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>  flextable,  <span class="co"># tabelas prontas para apresentação</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>  naniar,     <span class="co"># avaliar dados ausentes</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>  remotes,    <span class="co"># usado para instalar pacotes para baixar dados</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>  tidyverse   <span class="co"># gestão de dados e visualização</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="passo-2.-baixar-e-importar-os-dados" class="level2">
<h2 class="anchored" data-anchor-id="passo-2.-baixar-e-importar-os-dados">Passo 2. Baixar e importar os dados</h2>
<section id="baixar-os-dados" class="level3">
<h3 class="anchored" data-anchor-id="baixar-os-dados">2.1: Baixar os dados</h3>
<p>O seu escritório fornece-lhe dois arquivos para a sua análise, ambos com dados relativos a 2024 e atualizados a partir de 15 de janeiro de 2025:</p>
<ul>
<li>Um conjunto de dados no nível de notificação de doenças (<em>“notificacoes_multidoencas.xlsx”</em>) com informações de casos de 5 centros de saúde.</li>
<li>Um conjunto de dados a nível de exames laboratoriais (<em>“testes_multidoencas.csv”</em>) apresentado por três laboratórios que efetuam exames para os 5 centros de saúde.</li>
</ul>
<p>Para este estudo de caso, você pode baixar os dados através do repositório de dados muito útil do Applied Epi, que pode ser acessado usando o pacote <code>{appliedepidata}</code>.</p>
<p>Siga estes passos:</p>
<ol type="1">
<li>Instale o pacote <code>{appliedepidata}</code> do GitHub usando a função <code>install_github()</code> do pacote <code>{remotes}</code> (que você instalou anteriormente).</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use a função install_github do pacote remotes para instalar o appliedepidata</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">"appliedepi/appliedepidata"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="2" type="1">
<li>Salve os dois conjuntos de dados numa pasta específica utilizando a função <code>save_data()</code> do pacote <code>{appliedepidata}</code>. Execute o código abaixo. O exemplo abaixo salva os dados em uma subpasta <code>data</code> dentro do projeto do RStudio. Observe que, se você não especificar um local no argumento <code>path</code> da função, uma janela será exibida pedindo para selecionar manualmente uma pasta.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Salva os dois arquivos de dados usando a função save_data() do pacote appliedepidata</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>appliedepidata<span class="sc">::</span><span class="fu">save_data</span>(<span class="st">"testes_multidoencas"</span>,</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>                        <span class="at">path =</span> <span class="st">"data"</span>)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>appliedepidata<span class="sc">::</span><span class="fu">save_data</span>(<span class="st">"notificacoes_multidoencas"</span>,</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>                          <span class="at">path =</span> <span class="st">"data"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="importar-os-dados" class="level3">
<h3 class="anchored" data-anchor-id="importar-os-dados">2.2 Importar os dados</h3>
<p>Ótimo! Obrigado ao escritório do país e à Applied Epi! Agora é hora de importar os dados dessa pasta para o RStudio, para que você possa analisá-los.</p>
<section id="tarefa-a-importar-os-dois-arquivos-de-dados-baixados-para-o-seu-ambiente-r-studio-environment" class="level4">
<h4 class="anchored" data-anchor-id="tarefa-a-importar-os-dois-arquivos-de-dados-baixados-para-o-seu-ambiente-r-studio-environment"><strong>Tarefa A: Importar os dois arquivos de dados baixados para o seu ambiente R Studio (Environment)</strong></h4>
<p>Idealmente, utilizará a mesma função para importar ambos os conjuntos de dados, apesar de uma ser um arquivo .csv e o outro um arquivo .xlsx. Nota: daqui para a frente, diremos simplesmente “ambiente” quando nos referirmos ao painel ambiente (Environment) no R Studio.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Clique para ler uma dica
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Use a função <code>import</code> do pacote <code>{rio}</code> que consegue reconhecer e importar diferentes tipos de arquivos. Ela substitui funções de importação específicas para cada tipo de arquivo, como <code>read.csv()</code> do <code>{base}</code> para arquivos .csv e <code>read_excel()</code> do <code>{readxl}</code> para importar arquivos .xlsx.</p>
<p>Se achar que precisa de saber mais sobre funções de importação, leia o capítulo <a href="https://epirhandbook.com/pt/importing.pt.html?q=impo">Importar e exportar</a> do Manual de R para Epidemiologistas</p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-5-contents" aria-controls="callout-5" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Clique para ver a solução (tente sozinho primeiro!)
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-5" class="callout-5-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Abaixo usamos a função import para carregar os dois arquivos. Note que estamos atribuindo os dados importados a dois objetos: um chamado <em>dados_notif_bruto</em> e outro chamado <em>dados_lab_bruto</em>. Adicionamos o sufixo ‘bruto’ para diferenciar esses dados das versões limpas que criaremos posteriormente.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Importar dados</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Dados de notificação</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>dados_notif_bruto <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="st">"data/notificacoes_multidoencas.xlsx"</span>)</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Dados laboratoriais</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>dados_lab_bruto <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="st">"data/testes_multidoencas.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="passo-3.-inspecionar-os-dados" class="level2">
<h2 class="anchored" data-anchor-id="passo-3.-inspecionar-os-dados">Passo 3. Inspecionar os dados</h2>
<p>Os dados foram importados e agora é hora de ver que história eles contam. Faça uma análise inicial dos dois data frames brutos para verificar seu conteúdo e qualidade.</p>
<section id="passo-3.1-inspecionar-os-dados-de-notificação" class="level3">
<h3 class="anchored" data-anchor-id="passo-3.1-inspecionar-os-dados-de-notificação">Passo 3.1 Inspecionar os dados de notificação</h3>
<section id="tarefa-a-primeiro-inspecionar-o-dimensões-e-o-conteúdo-geral-dos-dados-da-nota" class="level4">
<h4 class="anchored" data-anchor-id="tarefa-a-primeiro-inspecionar-o-dimensões-e-o-conteúdo-geral-dos-dados-da-nota"><strong>Tarefa A: Primeiro, inspecionar o <em>dimensões</em> e o conteúdo geral dos dados da nota</strong></h4>
<p><strong>Use as funções <code>skim()</code> do pacote <code>{skimr}</code>, <code>names()</code>, <code>ncol()</code> e <code>nrow()</code> para inspecionar seu conjunto de dados.</strong></p>
<p>A função <code>skim()</code> fornece muitas informações sobre a estrutura e o conteúdo dos dados, enquanto <code>names()</code> mostra os diferentes nomes das colunas. As funções <code>ncol()</code> e <code>nrow()</code> contam, respectivamente, o número de colunas e linhas do conjunto de dados. Você sabe o que colocar dentro dos parênteses?</p>
<p>O jeito mais fácil, no entanto, é olhar diretamente o ambiente do RStudio.<br>
Lembre-se: o objeto no seu ambiente referente às notificações se chama <code>dados_notif_bruto</code>.</p>
<p>Clique na caixa de solução abaixo das perguntas se precisar de ajuda.</p>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Perguntas
</div>
</div>
<div class="callout-body-container callout-body">
<div class="webex-check">
Quantas colunas existem nos dados de notificações?
<div id="radio_NTSUGYQUPQ" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_NTSUGYQUPQ" value=""> <span>10</span></label><label><input type="radio" autocomplete="off" name="radio_NTSUGYQUPQ" value=""> <span>11</span></label><label><input type="radio" autocomplete="off" name="radio_NTSUGYQUPQ" value="answer"> <span>12</span></label><label><input type="radio" autocomplete="off" name="radio_NTSUGYQUPQ" value=""> <span>13</span></label>
</div>
Quais dessas colunas NÃO estão nos dados?
<div id="radio_ZTABMQGAZW" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_ZTABMQGAZW" value=""> <span>Data de início dos sintomas</span></label><label><input type="radio" autocomplete="off" name="radio_ZTABMQGAZW" value=""> <span>Data comunicada pela unidade de saúde/comunidade</span></label><label><input type="radio" autocomplete="off" name="radio_ZTABMQGAZW" value=""> <span>Data do Resultado</span></label><label><input type="radio" autocomplete="off" name="radio_ZTABMQGAZW" value="answer"> <span>Data do teste</span></label><label><input type="radio" autocomplete="off" name="radio_ZTABMQGAZW" value=""> <span>Data de nascimento</span></label>
</div>
Qual é o nome da coluna nos dados de notificação que identifica cada notificação?
<div id="radio_RTASRYHSRF" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_RTASRYHSRF" value="answer"> <span>ID notificacao</span></label><label><input type="radio" autocomplete="off" name="radio_RTASRYHSRF" value=""> <span>ID do teste</span></label><label><input type="radio" autocomplete="off" name="radio_RTASRYHSRF" value=""> <span>Codigo da unidade de saude</span></label><label><input type="radio" autocomplete="off" name="radio_RTASRYHSRF" value=""> <span>Combinação de ID notificacao e Sexo</span></label>
</div>
Quantas linhas existem nos dados de notificação?
<div id="radio_TTXUOZSATI" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_TTXUOZSATI" value="answer"> <span>987</span></label><label><input type="radio" autocomplete="off" name="radio_TTXUOZSATI" value=""> <span>1314</span></label><label><input type="radio" autocomplete="off" name="radio_TTXUOZSATI" value=""> <span>950</span></label><label><input type="radio" autocomplete="off" name="radio_TTXUOZSATI" value=""> <span>778</span></label>
</div>
Que tipo de informação você NÃO consegue ver nos dados de notificação?
<div id="radio_UKYKHHXWYG" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_UKYKHHXWYG" value="answer"> <span>Resultados de exames laboratoriais</span></label><label><input type="radio" autocomplete="off" name="radio_UKYKHHXWYG" value=""> <span>Distrito de residência</span></label><label><input type="radio" autocomplete="off" name="radio_UKYKHHXWYG" value=""> <span>Data de nascimento e Sexo</span></label><label><input type="radio" autocomplete="off" name="radio_UKYKHHXWYG" value=""> <span>Unidade de saúde em que o caso foi diagnosticado</span></label><label><input type="radio" autocomplete="off" name="radio_UKYKHHXWYG" value=""> <span>Desfecho</span></label>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-7-contents" aria-controls="callout-7" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Clique para ver a solução (tente sozinho primeiro!)
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-7" class="callout-7-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Use a função <code>skim()</code> do pacote <code>{skimr}</code> para ver um resumo de todo o data frame, e <code>View()</code> para visualizar diretamente o data frame completo:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">skim</span>(dados_notif_bruto)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Ou você pode usar <code>names()</code> para exibir apenas os nomes das colunas. Com <code>skim()</code> ou <code>names()</code> você poderá ver os tipos de informação, incluindo: a unidade de saúde do caso, data de nascimento, sexo, um indicador de gravidez, distrito de residência, data de início dos sintomas, data comunicada pela clínica e informações sobre o desfecho.</p>
<p>Também existe um <code>ID notificacao</code>, que parece ser um identificador único para cada caso, mas é recomendável verificar duplicatas antes de ter certeza.</p>
<p>Observe que NÃO há resultados de testes nesses dados, pois essas notificações são de clínicas que diagnosticam doenças de notificação compulsória com base em definições clínicas de caso.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(dados_notif_bruto)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Nome da unidade organizacional"                  
 [2] "Codigo da unidade de saude"                      
 [3] "ID notificacao"                                  
 [4] "Data de nascimento"                              
 [5] "Sexo"                                            
 [6] "Gestante"                                        
 [7] "Distrito de residencia"                          
 [8] "Doenca notificada"                               
 [9] "Data de inicio dos sintomas"                     
[10] "Data comunicada pela unidade de saude/comunidade"
[11] "Resultado"                                       
[12] "Data do resultado"                               </code></pre>
</div>
</div>
<p>Use <code>ncol()</code> e <code>nrow()</code> para exibir o número de colunas e linhas, assim:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ncol</span>(dados_notif_bruto)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(dados_notif_bruto)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Isso exibirá o número de colunas e linhas no console.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] 12</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 987</code></pre>
</div>
</div>
<p>De outro modo, ao olhar para o ambiente, você pode ver que o número de observações (que é o mesmo que o número de linhas) e o número de colunas estão listados ao lado do nome do data frame.</p>
</div>
</div>
</div>
</section>
<section id="tarefa-b-em-seguida-observe-as-classes-de-colunas-no-seu-data-frame-de-notificação-bruta" class="level4">
<h4 class="anchored" data-anchor-id="tarefa-b-em-seguida-observe-as-classes-de-colunas-no-seu-data-frame-de-notificação-bruta"><strong>Tarefa B: Em seguida, observe as classes de colunas no seu data frame de notificação bruta</strong></h4>
<p>Use a função <code>skim()</code> do pacote <code>{skimr}</code> ou <code>class()</code> para inspecionar as classes das colunas.</p>
<p>Você se lembra de como especificar a coluna de interesse dentro da função <code>class()</code>?<br>
Como alternativa, você pode simplesmente olhar para o ambiente.</p>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Perguntas
</div>
</div>
<div class="callout-body-container callout-body">
<div class="webex-check">
Quantas colunas do data frame de notificações são reconhecidas pelo R como colunas de data?
<div id="radio_OYXLHBUOHO" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_OYXLHBUOHO" value="answer"> <span>0</span></label><label><input type="radio" autocomplete="off" name="radio_OYXLHBUOHO" value=""> <span>2</span></label><label><input type="radio" autocomplete="off" name="radio_OYXLHBUOHO" value=""> <span>4</span></label>
</div>
Qual é a classe da maioria das colunas no data frame bruto de notificações?
<div id="radio_IDLMUIQGBY" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_IDLMUIQGBY" value="answer"> <span>character</span></label><label><input type="radio" autocomplete="off" name="radio_IDLMUIQGBY" value=""> <span>numeric</span></label><label><input type="radio" autocomplete="off" name="radio_IDLMUIQGBY" value=""> <span>factor</span></label>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-9-contents" aria-controls="callout-9" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Clique para ver a solução (tente sozinho primeiro!)
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-9" class="callout-9-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Você pode usar a função <code>class()</code> como no exemplo abaixo. O <code>$</code> é um operador usado para selecionar uma coluna específica do data frame <code>dados_notif_bruto</code>.</p>
<p>Observe que os acentos graves (<code>`</code>) são usados em torno de <code>Data de nascimento</code> porque o nome da coluna contém espaços.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(dados_notif_bruto<span class="sc">$</span><span class="st">`</span><span class="at">Data de nascimento</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Para verificar a classe pelo ambiente, clique na seta azul ao lado do nome do data frame.<br>
Os nomes das colunas aparecerão, com a classe ao lado (por exemplo, aparece “chr” para indicar que é do tipo character).</p>
<p>Você pode ver que nenhuma das colunas que deveriam ser datas é reconhecida como tal.<br>
Em vez disso, elas são reconhecidas como valores do tipo character.</p>
</div>
</div>
</div>
</section>
<section id="tarefa-c-inspecionar-valores-categóricos-e-dados-ausentes" class="level4">
<h4 class="anchored" data-anchor-id="tarefa-c-inspecionar-valores-categóricos-e-dados-ausentes"><strong>Tarefa C: Inspecionar valores categóricos e dados ausentes</strong></h4>
<p><strong>Use a função <code>tabyl()</code> para inspecionar os valores dentro de colunas categóricas</strong>, especificando o objeto do data frame no primeiro argumento e o nome da coluna no segundo argumento.</p>
<p>Por exemplo, este código tabula os valores da coluna <code>Sexo</code>. A saída mostra que “masculino” e “feminino” estão escritos de forma inconsistente nos dados. Essa coluna precisará de limpeza adicional antes da análise.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tabyl</span>(dados_notif_bruto, Sexo)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Sexo   n    percent valid_percent
         F  47 0.04761905    0.05452436
  FEMININO 146 0.14792300    0.16937355
         M  40 0.04052685    0.04640371
 MASCULINO 172 0.17426545    0.19953596
         f 154 0.15602837    0.17865429
  feminino  98 0.09929078    0.11368910
         m 119 0.12056738    0.13805104
 masculino  86 0.08713273    0.09976798
      &lt;NA&gt; 125 0.12664640            NA</code></pre>
</div>
</div>
<p>Para inspecionar dados ausentes, você pode usar a função <code>miss_var_summary()</code> do pacote <code>{naniar}</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">miss_var_summary</span>(dados_notif_bruto)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 3
   variable                                         n_miss pct_miss
   &lt;chr&gt;                                             &lt;int&gt;    &lt;num&gt;
 1 Data de inicio dos sintomas                         691     70.0
 2 Gestante                                            510     51.7
 3 Resultado                                           197     20.0
 4 Data do resultado                                   197     20.0
 5 Data de nascimento                                  168     17.0
 6 Sexo                                                125     12.7
 7 Nome da unidade organizacional                        0      0  
 8 Codigo da unidade de saude                            0      0  
 9 ID notificacao                                        0      0  
10 Distrito de residencia                                0      0  
11 Doenca notificada                                     0      0  
12 Data comunicada pela unidade de saude/comunidade      0      0  </code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Perguntas
</div>
</div>
<div class="callout-body-container callout-body">
<div class="webex-check">
Os valores na coluna <code>Distrito de residência</code> estão padronizados?
<div id="radio_PMLRPUNVZO" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_PMLRPUNVZO" value="answer"> <span>Não - precisam ser limpas</span></label><label><input type="radio" autocomplete="off" name="radio_PMLRPUNVZO" value=""> <span>Estão padronizadas e prontas para análise</span></label>
</div>
Os valores na coluna <code>Doença notificada</code> estão padronizados?
<div id="radio_WDBYPUXBVL" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_WDBYPUXBVL" value=""> <span>Não - precisam ser limpas</span></label><label><input type="radio" autocomplete="off" name="radio_WDBYPUXBVL" value="answer"> <span>Estão padronizadas e prontas para análise</span></label>
</div>
O que o R reconhece como valor ausente?
<div id="radio_BVTTAVJGBT" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_BVTTAVJGBT" value=""> <span>Ou nenhum valor, ou apenas um espaço, ou apenas um ponto</span></label><label><input type="radio" autocomplete="off" name="radio_BVTTAVJGBT" value="answer"> <span>Nenhum valor em uma célula, representado por NA</span></label><label><input type="radio" autocomplete="off" name="radio_BVTTAVJGBT" value=""> <span>As palavras Desconhecido e Incerto</span></label>
</div>
Com base na quantidade de valores ausentes, a coluna <code>Data de início dos sintomas</code> é útil?
<div id="radio_DCWIQDWDVE" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_DCWIQDWDVE" value=""> <span>Sim, o índice de ausentes é baixo, então esta coluna é útil</span></label><label><input type="radio" autocomplete="off" name="radio_DCWIQDWDVE" value="answer"> <span>Minimamente, pois o índice de ausentes é muito alto</span></label>
</div>
Por que algumas colunas nos dados de notificação podem ter diferentes grafias e categorias não padronizadas?
<div id="radio_IIBWQDAERT" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_IIBWQDAERT" value=""> <span>Um robô embaralha os dados para que fiquem menos identificáveis</span></label><label><input type="radio" autocomplete="off" name="radio_IIBWQDAERT" value="answer"> <span>Cada clínica pode usar softwares configurados de forma ligeiramente diferente ou permitir entradas em texto livre, gerando variações na escrita</span></label><label><input type="radio" autocomplete="off" name="radio_IIBWQDAERT" value=""> <span>O software do sistema de vigilância usado pelas unidades clínicas possui muitos erros</span></label>
</div>
Por que algumas colunas nos dados de notificação podem apresentar grande quantidade de valores ausentes?
<div id="radio_ENFLYHEYBS" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_ENFLYHEYBS" value=""> <span>O clínico não faz a pergunta ao paciente durante a consulta</span></label><label><input type="radio" autocomplete="off" name="radio_ENFLYHEYBS" value=""> <span>O paciente pode não saber ou não querer informar a resposta</span></label><label><input type="radio" autocomplete="off" name="radio_ENFLYHEYBS" value=""> <span>O clínico pode não ter tempo de priorizar o preenchimento desse campo, mesmo sabendo a informação</span></label><label><input type="radio" autocomplete="off" name="radio_ENFLYHEYBS" value="answer"> <span>Todas as alternativas acima, e muitos outros motivos</span></label>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-11-contents" aria-controls="callout-11" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Clique para ver a solução (tente sozinho primeiro!)
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-11" class="callout-11-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Use a função <code>tabyl()</code> para tabular os valores da coluna <code>Distrito de residencia</code>.<br>
Novamente, o primeiro argumento é o nome do objeto do data frame e o segundo argumento é o nome da coluna.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tabyl</span>(dados_notif_bruto, <span class="st">`</span><span class="at">Distrito de residencia</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Distrito de residencia   n    percent
              F Central  32 0.03242148
              FEVERIA C  23 0.02330294
        FEVERIA CENTRAL  85 0.08611955
              Feveria C  24 0.02431611
        Feveria Central  12 0.01215805
                 KASARA  64 0.06484296
                    KSR  17 0.01722391
                 Kasara 109 0.11043566
               L MINARA  50 0.05065856
               L Minara 193 0.19554205
            LAGO MINARA 185 0.18743668
            Lago Minara  68 0.06889564
               Lakeside 125 0.12664640</code></pre>
</div>
</div>
<p>Você pode ver que cada uma das três localidades (Feveria Central, Lago Minara e Kasara) está escrita de maneiras diferentes e com capitalização diferente. Será necessário corrigir isso se quisermos analisar a distribuição geográfica das doenças de notificação compulsória.</p>
<p>De forma semelhante, use a função <code>tabyl()</code> para tabular os valores da coluna <code>Doença notificada</code>.<br>
Você pode ver que os nomes estão escritos de forma adequada e consistente, permitindo visualizar a distribuição de linhas por doença sem necessidade de limpeza adicional.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tabyl</span>(dados_notif_bruto, <span class="st">`</span><span class="at">Doenca notificada</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Doenca notificada   n    percent
            colera  46 0.04660588
            dengue 273 0.27659574
     febre amarela 100 0.10131712
     febre tifoide  35 0.03546099
           malaria 533 0.54002026</code></pre>
</div>
</div>
<p>Uma forma diferente de verificar dados ausentes é tabular o resultado da função <code>is.na()</code>. No exemplo abaixo, a função <code>is.na()</code> avalia cada célula da coluna <code>Data de início dos sintomas</code>, retornando <code>TRUE</code> para as ausentes e <code>FALSE</code> para as presentes.</p>
<p>Executar <code>tabyl()</code> sobre essa saída TRUE/FALSE fornece rapidamente a contagem e o percentual de valores ausentes e não ausentes nessa coluna. Lembre-se: valores como um espaço ou as palavras “Desconhecido” ou “Ausente” <strong>não</strong> serão reconhecidos pelo R como ausentes. O R reconhece apenas espaços verdadeiramente em branco como ausentes, representados por <code>NA</code>.</p>
<p>Para a coluna <code>Data de início dos sintomas</code>, você pode ver que 70% dos casos estão sem essa informação, sugerindo que essa coluna não seria particularmente útil para analisar tendências de doenças ao longo do tempo.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tabyl</span>(<span class="fu">is.na</span>(dados_notif_bruto<span class="sc">$</span><span class="st">`</span><span class="at">Data de inicio dos sintomas</span><span class="st">`</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> is.na(dados_notif_bruto$`Data de inicio dos sintomas`)   n   percent
                                                  FALSE 296 0.2998987
                                                   TRUE 691 0.7001013</code></pre>
</div>
</div>
<p>Dados ausentes ou não padronizados podem ocorrer por diversos motivos, incluindo o design da ferramenta de coleta de dados (por exemplo, se as perguntas são obrigatórias ou permitem texto livre versus listas suspensas), os processos e padrões estabelecidos (como quais campos a equipe é instruída a priorizar) e fatores contextuais (como se a equipe dispõe de tempo suficiente para coletar a informação) — entre muitos outros.</p>
</div>
</div>
</div>
</section>
</section>
<section id="passo-3.2-inspecionar-os-dados-laboratoriais" class="level3">
<h3 class="anchored" data-anchor-id="passo-3.2-inspecionar-os-dados-laboratoriais">Passo 3.2 Inspecionar os dados laboratoriais</h3>
<section id="tarefa-a-inspecionar-as-dimensões-e-o-conteúdo-geral-dos-dados-laboratoriais" class="level4">
<h4 class="anchored" data-anchor-id="tarefa-a-inspecionar-as-dimensões-e-o-conteúdo-geral-dos-dados-laboratoriais"><strong>Tarefa A: Inspecionar as <em>dimensões</em> e o conteúdo geral dos dados laboratoriais</strong></h4>
<p>Da mesma forma como acontece com os dados de notificação, <strong>utilize as funções <code>skim()</code>, <code>ncol()</code>, e <code>nrow()</code> ou verifique o objeto no ambiente para inspecionar os dados laboratoriais.</strong></p>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Perguntas
</div>
</div>
<div class="callout-body-container callout-body">
<div class="webex-check">
Qual data frame tem mais colunas - os dados de notificação ou os dados laboratoriais?
<div id="radio_PPERMVZEZM" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_PPERMVZEZM" value=""> <span>Dados laboratoriais</span></label><label><input type="radio" autocomplete="off" name="radio_PPERMVZEZM" value="answer"> <span>Dados de notificação</span></label><label><input type="radio" autocomplete="off" name="radio_PPERMVZEZM" value=""> <span>Eles têm o mesmo número de colunas</span></label>
</div>
Qual data frame tem mais linhas?
<div id="radio_GICYGUZOBP" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_GICYGUZOBP" value="answer"> <span>Dados laboratoriais</span></label><label><input type="radio" autocomplete="off" name="radio_GICYGUZOBP" value=""> <span>Dados de notificação</span></label><label><input type="radio" autocomplete="off" name="radio_GICYGUZOBP" value=""> <span>Eles têm o mesmo número de linhas</span></label>
</div>
Inspecione os dados laboratoriais com <code>View()</code>. Por que pode haver mais registros nos dados laboratoriais?
<div id="radio_TFOYXFGIDO" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_TFOYXFGIDO" value="answer"> <span>Pode haver vários testes ou alvos por amostra</span></label><label><input type="radio" autocomplete="off" name="radio_TFOYXFGIDO" value=""> <span>Existem muitos resultados de testes de ensaio nos dados</span></label><label><input type="radio" autocomplete="off" name="radio_TFOYXFGIDO" value=""> <span>Nem todas as notificações têm resultados de testes ainda</span></label>
</div>
Qual destas colunas NÃO está nos dados laboratoriais?
<div id="radio_VSIZIZCFZF" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_VSIZIZCFZF" value=""> <span>ID notificação</span></label><label><input type="radio" autocomplete="off" name="radio_VSIZIZCFZF" value=""> <span>ID da amostra</span></label><label><input type="radio" autocomplete="off" name="radio_VSIZIZCFZF" value=""> <span>Tipo de teste</span></label><label><input type="radio" autocomplete="off" name="radio_VSIZIZCFZF" value="answer"> <span>Data de nascimento</span></label><label><input type="radio" autocomplete="off" name="radio_VSIZIZCFZF" value=""> <span>Resultado do teste</span></label>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-13-contents" aria-controls="callout-13" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Clique para ver a solução (experimente primeiro!)
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-13" class="callout-13-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Assim como na seção 3.1, você pode usar a função <code>skim()</code> do pacote <code>{skimr}</code> para visualizar todos os dado laboratoriais com os resultados dos testes. Isso também mostrará os diferentes nomes de colunas nos dados, evidenciando que os dados laboratoriais contém apenas informações sobre o teste e não sobre o paciente. No entanto, ele também contém um <strong>ID notificação</strong>, assim como os dados das notificações.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">skim</span>(dados_lab_bruto)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Utilizar <code>ncol()</code> e <code>nrow()</code> para exibir o número de colunas e linhas, assim:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ncol</span>(dados_lab_bruto)</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(dados_lab_bruto)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Isto exibirá os números de colunas e linhas no painel console, mostrando que os dados do laboratório têm mais linhas do que os dados da notificação inspecionados anteriormente.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] 7</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1314</code></pre>
</div>
</div>
<p>Frequentemente há mais registros nos dados laboratoriais do que nos dados de notificação. Se você inspecionar os dados com <code>View(dados_lab_bruto)</code> e, em seguida, clicar na seta no topo da coluna <code>id_notificacao</code> para ordená-la alfabeticamente, verá que várias linhas compartilham o mesmo <code>id_notificacao</code>.</p>
<p>Isso pode acontecer quando múltiplos alvos são testados a partir da mesma amostra (mesmo ID de amostra) ou quando um caso é retestado (resultando em um ID de amostra diferente).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(dados_lab_bruto)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-a5b4ddd0{}.cl-a5a37bbc{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-a5abd19a{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-a5abd1ae{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-a5ac2974{width:2.017in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a5ac2992{width:1.219in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a5ac299c{width:1.041in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a5ac29a6{width:1.126in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a5ac29a7{width:1.746in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a5ac29b0{width:1.202in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a5ac29ba{width:0.914in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a5ac29bb{width:2.017in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a5ac29c4{width:1.219in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a5ac29ce{width:1.041in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a5ac29cf{width:1.126in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a5ac29d8{width:1.746in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a5ac29e2{width:1.202in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a5ac29e3{width:0.914in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a5ac29ec{width:2.017in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a5ac29ed{width:1.219in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a5ac29f6{width:1.041in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a5ac2a00{width:1.126in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a5ac2a0a{width:1.746in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a5ac2a0b{width:1.202in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a5ac2a14{width:0.914in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-a5b4ddd0"><thead><tr style="overflow-wrap:break-word;"><th class="cl-a5ac2974"><p class="cl-a5abd19a"><span class="cl-a5a37bbc">nome_laboratorio</span></p></th><th class="cl-a5ac2992"><p class="cl-a5abd19a"><span class="cl-a5a37bbc">id_notificacao</span></p></th><th class="cl-a5ac299c"><p class="cl-a5abd19a"><span class="cl-a5a37bbc">id_amostra</span></p></th><th class="cl-a5ac29a6"><p class="cl-a5abd1ae"><span class="cl-a5a37bbc">data_exame</span></p></th><th class="cl-a5ac29a7"><p class="cl-a5abd19a"><span class="cl-a5a37bbc">exame</span></p></th><th class="cl-a5ac29b0"><p class="cl-a5abd19a"><span class="cl-a5a37bbc">alvo</span></p></th><th class="cl-a5ac29ba"><p class="cl-a5abd19a"><span class="cl-a5a37bbc">resultado</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-a5ac29bb"><p class="cl-a5abd19a"><span class="cl-a5a37bbc">Hospital Geral de Feveria</span></p></td><td class="cl-a5ac29c4"><p class="cl-a5abd19a"><span class="cl-a5a37bbc">f21708</span></p></td><td class="cl-a5ac29ce"><p class="cl-a5abd19a"><span class="cl-a5a37bbc">48b00313</span></p></td><td class="cl-a5ac29cf"><p class="cl-a5abd1ae"><span class="cl-a5a37bbc">2024-06-07</span></p></td><td class="cl-a5ac29d8"><p class="cl-a5abd19a"><span class="cl-a5a37bbc">Dengue NS1/IgG/IgM</span></p></td><td class="cl-a5ac29e2"><p class="cl-a5abd19a"><span class="cl-a5a37bbc">Dengue NS.1</span></p></td><td class="cl-a5ac29e3"><p class="cl-a5abd19a"><span class="cl-a5a37bbc">N</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-a5ac29bb"><p class="cl-a5abd19a"><span class="cl-a5a37bbc">Hospital Geral de Feveria</span></p></td><td class="cl-a5ac29c4"><p class="cl-a5abd19a"><span class="cl-a5a37bbc">f21708</span></p></td><td class="cl-a5ac29ce"><p class="cl-a5abd19a"><span class="cl-a5a37bbc">48b00313</span></p></td><td class="cl-a5ac29cf"><p class="cl-a5abd1ae"><span class="cl-a5a37bbc">2024-06-07</span></p></td><td class="cl-a5ac29d8"><p class="cl-a5abd19a"><span class="cl-a5a37bbc">Dengue NS1/IgG/IgM</span></p></td><td class="cl-a5ac29e2"><p class="cl-a5abd19a"><span class="cl-a5a37bbc">Dengue IgG</span></p></td><td class="cl-a5ac29e3"><p class="cl-a5abd19a"><span class="cl-a5a37bbc">N</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-a5ac29bb"><p class="cl-a5abd19a"><span class="cl-a5a37bbc">Hospital Geral de Feveria</span></p></td><td class="cl-a5ac29c4"><p class="cl-a5abd19a"><span class="cl-a5a37bbc">f21708</span></p></td><td class="cl-a5ac29ce"><p class="cl-a5abd19a"><span class="cl-a5a37bbc">48b00313</span></p></td><td class="cl-a5ac29cf"><p class="cl-a5abd1ae"><span class="cl-a5a37bbc">2024-06-07</span></p></td><td class="cl-a5ac29d8"><p class="cl-a5abd19a"><span class="cl-a5a37bbc">Dengue NS1/IgG/IgM</span></p></td><td class="cl-a5ac29e2"><p class="cl-a5abd19a"><span class="cl-a5a37bbc">Dengue IgM</span></p></td><td class="cl-a5ac29e3"><p class="cl-a5abd19a"><span class="cl-a5a37bbc">P</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-a5ac29bb"><p class="cl-a5abd19a"><span class="cl-a5a37bbc">Hospital Geral de Feveria</span></p></td><td class="cl-a5ac29c4"><p class="cl-a5abd19a"><span class="cl-a5a37bbc">6a47a3</span></p></td><td class="cl-a5ac29ce"><p class="cl-a5abd19a"><span class="cl-a5a37bbc">ca5e865b</span></p></td><td class="cl-a5ac29cf"><p class="cl-a5abd1ae"><span class="cl-a5a37bbc">2024-06-15</span></p></td><td class="cl-a5ac29d8"><p class="cl-a5abd19a"><span class="cl-a5a37bbc">Dengue NS1/IgG/IgM</span></p></td><td class="cl-a5ac29e2"><p class="cl-a5abd19a"><span class="cl-a5a37bbc">Dengue NS.1</span></p></td><td class="cl-a5ac29e3"><p class="cl-a5abd19a"><span class="cl-a5a37bbc">N</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-a5ac29bb"><p class="cl-a5abd19a"><span class="cl-a5a37bbc">Hospital Geral de Feveria</span></p></td><td class="cl-a5ac29c4"><p class="cl-a5abd19a"><span class="cl-a5a37bbc">6a47a3</span></p></td><td class="cl-a5ac29ce"><p class="cl-a5abd19a"><span class="cl-a5a37bbc">ca5e865b</span></p></td><td class="cl-a5ac29cf"><p class="cl-a5abd1ae"><span class="cl-a5a37bbc">2024-06-15</span></p></td><td class="cl-a5ac29d8"><p class="cl-a5abd19a"><span class="cl-a5a37bbc">Dengue NS1/IgG/IgM</span></p></td><td class="cl-a5ac29e2"><p class="cl-a5abd19a"><span class="cl-a5a37bbc">Dengue IgG</span></p></td><td class="cl-a5ac29e3"><p class="cl-a5abd19a"><span class="cl-a5a37bbc">N</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-a5ac29ec"><p class="cl-a5abd19a"><span class="cl-a5a37bbc">Hospital Geral de Feveria</span></p></td><td class="cl-a5ac29ed"><p class="cl-a5abd19a"><span class="cl-a5a37bbc">6a47a3</span></p></td><td class="cl-a5ac29f6"><p class="cl-a5abd19a"><span class="cl-a5a37bbc">ca5e865b</span></p></td><td class="cl-a5ac2a00"><p class="cl-a5abd1ae"><span class="cl-a5a37bbc">2024-06-15</span></p></td><td class="cl-a5ac2a0a"><p class="cl-a5abd19a"><span class="cl-a5a37bbc">Dengue NS1/IgG/IgM</span></p></td><td class="cl-a5ac2a0b"><p class="cl-a5abd19a"><span class="cl-a5a37bbc">Dengue IgM</span></p></td><td class="cl-a5ac2a14"><p class="cl-a5abd19a"><span class="cl-a5a37bbc">P</span></p></td></tr></tbody></table></div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="tarefa-b-verificar-as-classes-os-valores-categóricos-e-os-valores-ausentes" class="level4">
<h4 class="anchored" data-anchor-id="tarefa-b-verificar-as-classes-os-valores-categóricos-e-os-valores-ausentes"><strong>Tarefa B: Verificar as classes, os valores categóricos e os valores ausentes</strong></h4>
<p>Como acima, <strong>utilize as funções <code>class()</code>, <code>skim()</code>, ou <code>tabyl()</code>, ou inspecione o objeto direto no ambiente RStudio, para analisar as suas colunas com mais detalhes.</strong></p>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Perguntas
</div>
</div>
<div class="callout-body-container callout-body">
<div class="webex-check">
Quantas colunas dos dados laboratoriais são reconhecidas pelo R como colunas de data?
<div id="radio_YIFTMAOBRR" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_YIFTMAOBRR" value=""> <span>0</span></label><label><input type="radio" autocomplete="off" name="radio_YIFTMAOBRR" value="answer"> <span>1</span></label><label><input type="radio" autocomplete="off" name="radio_YIFTMAOBRR" value=""> <span>2</span></label>
</div>
Quantas colunas nos dados laboratoriais possuem dados completos?
<div id="radio_SRCUKPSBMR" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_SRCUKPSBMR" value=""> <span>1</span></label><label><input type="radio" autocomplete="off" name="radio_SRCUKPSBMR" value=""> <span>3</span></label><label><input type="radio" autocomplete="off" name="radio_SRCUKPSBMR" value="answer"> <span>7 (todas elas!)</span></label>
</div>
Qual teste detecta múltiplos alvos (e, portanto, possui múltiplas linhas por amostra)?
<div id="radio_YXFVRVVWWP" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_YXFVRVVWWP" value=""> <span>Malária</span></label><label><input type="radio" autocomplete="off" name="radio_YXFVRVVWWP" value="answer"> <span>Dengue</span></label><label><input type="radio" autocomplete="off" name="radio_YXFVRVVWWP" value=""> <span>Febre Amarela</span></label><label><input type="radio" autocomplete="off" name="radio_YXFVRVVWWP" value=""> <span>Cólera</span></label><label><input type="radio" autocomplete="off" name="radio_YXFVRVVWWP" value=""> <span>Febre Tifoide</span></label>
</div>
Quantos valores possíveis de resultado de teste existem na coluna <code>resultado</code>?
<div id="radio_MFLVAVAGNQ" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_MFLVAVAGNQ" value="answer"> <span>5</span></label><label><input type="radio" autocomplete="off" name="radio_MFLVAVAGNQ" value=""> <span>3</span></label><label><input type="radio" autocomplete="off" name="radio_MFLVAVAGNQ" value=""> <span>4</span></label>
</div>
Qual NÃO é um resultado possível para o teste de cultura de fezes que detecta a bactéria <em>V. cholerae</em>?
<div id="radio_VTGVNGDGCN" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_VTGVNGDGCN" value="answer"> <span>P</span></label><label><input type="radio" autocomplete="off" name="radio_VTGVNGDGCN" value=""> <span>P01</span></label><label><input type="radio" autocomplete="off" name="radio_VTGVNGDGCN" value=""> <span>P0139</span></label><label><input type="radio" autocomplete="off" name="radio_VTGVNGDGCN" value=""> <span>N</span></label><label><input type="radio" autocomplete="off" name="radio_VTGVNGDGCN" value=""> <span>I</span></label>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-15-contents" aria-controls="callout-15" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Clique para ver a solução (tente sozinho primeiro!)
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-15" class="callout-15-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Os dados laboratoriais têm uma coluna de data, reconhecida pelo R como uma classe “IDate”. Esta é uma classe de data utilizada pela função <code>import()</code> do pacote <code>{rio}</code> ao importar arquivos csv. Da mesma forma como a classe Data do R base, ela permite ordenar pela data e analisar tendências ao longo do tempo.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(dados_lab_bruto<span class="sc">$</span>data_exame)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "IDate" "Date" </code></pre>
</div>
</div>
<p>O uso da função <code>miss_var_summary()</code> do pacote <code>{naniar}</code> demonstra que todas as colunas dos dados laboratoriais estão efetivamente completas. Isto talvez se deva ao fato de os sistemas laboratoriais utilizarem processos automatizados, por isso é muito menos provável que haja erro humano.</p>
<p>(<strong>Ponto importante</strong>: Nota-se que, na vida real, os dados laboratoriais provavelmente teriam alguns problemas!)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">miss_var_summary</span>(dados_lab_bruto)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 3
  variable         n_miss pct_miss
  &lt;chr&gt;             &lt;int&gt;    &lt;num&gt;
1 nome_laboratorio      0        0
2 id_notificacao        0        0
3 id_amostra            0        0
4 data_exame            0        0
5 exame                 0        0
6 alvo                  0        0
7 resultado             0        0</code></pre>
</div>
</div>
<p>Para ver quantos alvos são detectados por cada tipo de exame, faça uma tabulação cruzada das colunas <code>exame</code> e <code>alvo</code> com <code>tabyl()</code>. Escreva os nomes das colunas na função como dois argumentos separados. O resultado mostra que cada exame está claramente alinhado com um ou mais alvos, e apenas o teste da dengue detecta mais do que um alvo (IgG, IgM e NS.1).</p>
<p><strong>Dica:</strong> Experimente alterar a ordem dos nomes das colunas na função para ver o impacto na tabela.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tabyl</span>(dados_lab_bruto, alvo, exame)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                 alvo Cultura de fezes Dengue NS1/IgG/IgM Hemocultura IgM ELISA
    Bacteria S. Typhi                0                  0          33         0
 Bacteria V. cholerae               45                  0           0         0
           Dengue IgG                0                215           0         0
           Dengue IgM                0                215           0         0
          Dengue NS.1                0                215           0         0
    Febre Amarela IgM                0                  0           0        88
           Plasmodium                0                  0           0         0
 Microscopia de sangue total
                           0
                           0
                           0
                           0
                           0
                           0
                         503</code></pre>
</div>
</div>
<p>Finalmente, inspecione os diferentes valores dos resultados do teste na coluna <code>resultado</code> usando <code>tabyl()</code>. Pode ver que existem seis resultados possíveis, incluindo N para negativo, P para positivo e I para indeterminado. A cólera, especificamente, não apresenta P, mas pode apresentar P01 e P0139, o que, neste caso, significa ser positivo para os serogrupos O1 ou O139.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tabyl</span>(dados_lab_bruto, exame, resultado)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                       exame  I   N   P PO1 PO139
            Cultura de fezes  5   2   0  22    16
          Dengue NS1/IgG/IgM  0 354 291   0     0
                 Hemocultura  2  24   7   0     0
                   IgM ELISA 10  45  33   0     0
 Microscopia de sangue total 56 257 190   0     0</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="passo-4.-limpar-e-descrever-os-dados-de-notificação" class="level2">
<h2 class="anchored" data-anchor-id="passo-4.-limpar-e-descrever-os-dados-de-notificação">Passo 4. Limpar e descrever os dados de notificação</h2>
<p>Agora já sabemos que os dados de notificação (<code>dados_notif_bruto</code>) contêm informações sobre casos suspeitos, além de variáveis demográficas básicas (idade, sexo, gravidez, distrito de residência), bem como dados sobre a data de início dos sintomas, a dados de notificação pela unidade de saúde e o desfecho. Algumas dessas colunas precisam ser limpas antes da análise, seja por variações na ortografia de valores categóricos, seja porque algumas datas não foram corretamente reconhecidas como tal.</p>
<p>A partir deste ponto, você começará a escrever trechos mais longos de código para realizar a limpeza, utilizando várias funções do <code>{dplyr}</code> encadeadas com pipes (que se parecem com isso: <code>|&gt;</code>).</p>
<p><strong>NOTA SOBRE PIPES</strong> Os pipes permitem realizar várias operações em sequência, “encadeando” diferentes funções. O resultado de uma função passa a ser a entrada como primeiro argumento da seguinte.</p>
<p>Caso queira mais detalhes sobre o uso de pipes, veja a seção do <a href="https://epirhandbook.com/pt/cleaning.pt.html#conduta-de-limpeza">Manual de R para Epidemiologistas</a>.</p>
<p>Neste exercício será utilizado o <strong>pipe nativo do R</strong> (<code>|&gt;</code>), que é mais rápido e não exige instalação de pacotes adicionais. Se preferir, você também pode usar o pipe do pacote <strong>magrittr</strong> (<code>%&gt;%</code>).</p>
<section id="passo-4.1-limpar-os-dados" class="level3">
<h3 class="anchored" data-anchor-id="passo-4.1-limpar-os-dados">Passo 4.1 Limpar os dados</h3>
<section id="tarefa-a-limpar-os-nomes-das-colunas-e-selecionar-colunas-para-análise" class="level4">
<h4 class="anchored" data-anchor-id="tarefa-a-limpar-os-nomes-das-colunas-e-selecionar-colunas-para-análise"><strong>Tarefa A: Limpar os nomes das colunas e selecionar colunas para análise</strong></h4>
<p>Devido a questões de qualidade e armazenamento de dados, a sua equipe recomenda que seja criado um data frame limpo, contendo apenas as seguintes variáveis: identificador único, localização do caso, doença e a data em que a notificação foi registrada no sistema de vigilância.</p>
<p><strong>Escreva um código em R para produzir um novo data frame limpo chamado <code>dados_notif</code></strong>, aplicando as seguintes tarefas de limpeza:</p>
<ul>
<li>Renomear as colunas para serem mais legíveis pela máquina (remover espaços e capitalização) usando a função <code>clean_names()</code> do pacote <code>{janitor}</code>.<br>
</li>
<li>Usar a função <code>rename()</code> do pacote <code>{dplyr}</code> para que a coluna com a data em que o caso foi notificado seja alterada para o nome mais conciso <code>data_notificacao</code>.</li>
<li>Selecionar colunas relevantes para análise com a função <code>select()</code> do pacote <code>{dplyr}</code>.</li>
</ul>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-16-contents" aria-controls="callout-16" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Clique para ler uma dica
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-16" class="callout-16-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Comece seu código com o nome do novo data frame, a seta do operador de atribuição e o nome do objeto de dados brutos. Isso indica que o resultado do processamento dos dados brutos será atribuído a um novo objeto chamado <code>dados_notif</code>. .</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>dados_notif <span class="ot">&lt;-</span> dados_notif_bruto</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Em seguida, desenvolva este código adicionando funções adicionais, encadeadas com um pipe. Isto permite executar várias operações em uma sequência contínua. Primeiro, utilize <code>clean_names()</code> para padronizar todos os nomes das suas colunas. Essa função substitui automaticamente espaços e caracteres especiais por sublinhados e converte tudo para minúsculas, tornando os nomes mais fáceis de trabalhar. Depois, você pode usar <code>rename()</code> para atribuir um novo nome a uma coluna. Lembre-se de que, ao utilizar <code>rename()</code>, a coluna já possui a versão de seu nome gerada pelo <code>clean_names()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>dados_notif <span class="ot">&lt;-</span> dados_notif_bruto <span class="sc">|&gt;</span> </span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_names</span>() <span class="sc">|&gt;</span> </span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">NOVO_NOME =</span> ANTIGO_NOME) <span class="sc">|&gt;</span> </span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(VAR_NOMES)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-17-contents" aria-controls="callout-17" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Clique para ver a solução (tente sozinho primeiro!)
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-17" class="callout-17-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Aqui está o código para limpar os nomes das colunas e selecionar as colunas certas para análise:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Limpeza dos dados</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>dados_notif <span class="ot">&lt;-</span> dados_notif_bruto <span class="sc">|&gt;</span> </span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_names</span>() <span class="sc">|&gt;</span> </span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">data_notificacao =</span>  data_comunicada_pela_unidade_de_saude_comunidade) <span class="sc">|&gt;</span> </span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id_notificacao, distrito_de_residencia, doenca_notificada, data_notificacao)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="tarefa-b-padronizar-valores-categóricos" class="level4">
<h4 class="anchored" data-anchor-id="tarefa-b-padronizar-valores-categóricos"><strong>Tarefa B: Padronizar valores categóricos</strong></h4>
<p>A partir da inspeção dos dados, já se sabe que os valores para distritonão estão padronizados.</p>
<p><strong>Adicione um</strong> <code>mutate()</code> <strong>para limpar a coluna</strong> <code>distrito_de_residencia</code> <strong>da seguinte maneira</strong>:</p>
<ul>
<li>Normalizar a capitalização dos valores dessa coluna</li>
<li>Substituir a coluna existente <code>distrito_de_residencia</code> existente por uma coluna limpa que contenha apenas estes valores de distrito: “Lago Minara”, “Feveria Central” e “Kasara”.</li>
</ul>
<p>Veja a dica para saber quais funções utilizar.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-18-contents" aria-controls="callout-18" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Clique para ler uma dica
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-18" class="callout-18-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Tente usar <code>str_to_title()</code> do pacote <code>{stringr}</code> para que a primeira letra de cada palavra seja maiúscula e todas as outras letras sejam minúsculas. Também pode utilizar <code>case_match()</code> para corrigir erros tipográficos específicos.</p>
<p>Use a funcionalidade de ajuda do RStudio para aprender a utilizar essas funções. Por exemplo, digite <code>?case_match</code> no console para abrir a página de ajuda e a documentação da função. <strong>Nota:</strong> <code>case_match()</code> é uma função muito útil para substituir ou corrigir valores, e pode substituir <code>recode()</code>.</p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-19-contents" aria-controls="callout-19" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Clique para ver a solução (tente sozinho primeiro!)
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-19" class="callout-19-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>O seu código de limpeza deve agora ter o seguinte aspecto:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Limpeza dos dados</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>dados_notif <span class="ot">&lt;-</span> dados_notif_bruto <span class="sc">|&gt;</span> </span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_names</span>() <span class="sc">|&gt;</span> </span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">data_notificacao =</span>  data_comunicada_pela_unidade_de_saude_comunidade) <span class="sc">|&gt;</span> </span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id_notificacao, distrito_de_residencia, doenca_notificada, data_notificacao) <span class="sc">|&gt;</span></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">distrito_de_residencia =</span> <span class="fu">str_to_title</span>(distrito_de_residencia)) <span class="sc">|&gt;</span> </span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">distrito_de_residencia =</span> <span class="fu">case_match</span>(distrito_de_residencia,</span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>                                           <span class="fu">c</span>(<span class="st">"F Central"</span>, <span class="st">"Feveria C"</span>, <span class="st">"Feveria Central"</span>) <span class="sc">~</span> <span class="st">"Feveria Central"</span>,</span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>                                           <span class="fu">c</span>(<span class="st">"Kasara"</span>, <span class="st">"Ksr"</span>) <span class="sc">~</span> <span class="st">"Kasara"</span>,</span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>                                           <span class="fu">c</span>(<span class="st">"L Minara"</span>, <span class="st">"Lago Minara"</span>, <span class="st">"Lakeside"</span>) <span class="sc">~</span> <span class="st">"Lago Minara"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Também pode envolver o <code>str_to_title</code> na função <code>case_match()</code> para um código mais curto, como se segue:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Limpeza dos dados</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>dados_notif <span class="ot">&lt;-</span> dados_notif_bruto <span class="sc">|&gt;</span> </span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_names</span>() <span class="sc">|&gt;</span> </span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">data_notificacao =</span>  data_comunicada_pela_unidade_de_saude_comunidade) <span class="sc">|&gt;</span> </span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id_notificacao, distrito_de_residencia, doenca_notificada, data_notificacao) <span class="sc">|&gt;</span></span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">distrito_de_residencia =</span> <span class="fu">case_match</span>(<span class="fu">str_to_title</span>(distrito_de_residencia),</span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>                                           <span class="fu">c</span>(<span class="st">"F Central"</span>, <span class="st">"Feveria C"</span>, <span class="st">"Feveria Central"</span>) <span class="sc">~</span> <span class="st">"Feveria Central"</span>,</span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>                                           <span class="fu">c</span>(<span class="st">"Kasara"</span>, <span class="st">"Ksr"</span>) <span class="sc">~</span> <span class="st">"Kasara"</span>,</span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>                                           <span class="fu">c</span>(<span class="st">"L Minara"</span>, <span class="st">"Lago Minara"</span>, <span class="st">"Lakeside"</span>) <span class="sc">~</span> <span class="st">"Lago Minara"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="tarefa-c-lidar-com-datas" class="level4">
<h4 class="anchored" data-anchor-id="tarefa-c-lidar-com-datas"><strong>Tarefa C: Lidar com datas</strong></h4>
<p>A coluna <code>data_notificacao</code> precisa ser transformada para que seja reconhecida como uma data no R. Isso permitirá analisar tendências ao longo do tempo, incluindo semanas e meses.</p>
<p><strong>Reveja os valores da coluna <code>data_notificacao</code>. Em seguida, adicione uma linha ao seu código de limpeza para converter <code>data_notificacao</code> em uma classe de data.</strong></p>
<p>Conhecer a estrutura dos dados permitirá utilizar a função correta para a conversão.<br>
Recomendamos o uso de funções do pacote <code>{lubridate}</code>, como <code>ymd()</code> (para datas no formato ano-mês-dia), <code>mdy()</code> (para datas no formato mês-dia-ano) ou <code>dmy()</code> (para datas no formato dia-mês-ano). Essas funções reconhecerão qualquer forma de escrever a data, desde que a ordem esteja correta; por exemplo, “21 de agosto de 2025” e “21-08-2024” seriam reconhecidas por <code>dmy()</code>.</p>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Perguntas
</div>
</div>
<div class="callout-body-container callout-body">
<div class="webex-check">
Como as datas estão atualmente formatadas?
<div id="radio_EFILJSIFXH" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_EFILJSIFXH" value=""> <span>dia-mês-ano</span></label><label><input type="radio" autocomplete="off" name="radio_EFILJSIFXH" value="answer"> <span>ano-mês-dia</span></label><label><input type="radio" autocomplete="off" name="radio_EFILJSIFXH" value=""> <span>mês-dia-ano</span></label><label><input type="radio" autocomplete="off" name="radio_EFILJSIFXH" value=""> <span>ano-dia-mês</span></label>
</div>
Qual função <code>mutate()</code> deve ser usada para converter a coluna <code>data_notificacao</code> para a classe de data?
<div id="radio_IPCJERCNKU" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_IPCJERCNKU" value="answer"> <span>mutate(data_notificacao = ymd(data_notificacao))</span></label><label><input type="radio" autocomplete="off" name="radio_IPCJERCNKU" value=""> <span>mutate(data_notificacao = dmy(data_notificacao))</span></label><label><input type="radio" autocomplete="off" name="radio_IPCJERCNKU" value=""> <span>mutate(data_notificacao = mdy(data_notificacao))</span></label>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-21-contents" aria-controls="callout-21" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Clique para ver a solução (tente sozinho primeiro!)
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-21" class="callout-21-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Utilize a função <code>head()</code> para ver as primeiras seis linhas dos dados da coluna <code>data_notificacao</code>. É possível ver que elas são escritas no formato: ano primeiro, depois o mês e depois o dia.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dados_notif<span class="sc">$</span>data_notificacao)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2024-03-08" "2024-03-11" "2024-03-11" "2024-03-18" "2024-03-14"
[6] "2024-03-12"</code></pre>
</div>
</div>
<p>É possível utilizar a função <code>ymd()</code> dentro de <code>mutate()</code> para converter a coluna <code>data_notificacao</code> para a classe de data. Você pode verificar se a conversão foi correta executando <code>class()</code> em seguida.</p>
<p>O seu código de limpeza deve agora ter o seguinte aspecto:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Limpeza dos dados</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>dados_notif <span class="ot">&lt;-</span> dados_notif_bruto <span class="sc">|&gt;</span> </span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_names</span>() <span class="sc">|&gt;</span> </span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">data_notificacao =</span>  data_comunicada_pela_unidade_de_saude_comunidade) <span class="sc">|&gt;</span> </span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id_notificacao, distrito_de_residencia, doenca_notificada, data_notificacao) <span class="sc">|&gt;</span></span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">distrito_de_residencia =</span> <span class="fu">case_match</span>(<span class="fu">str_to_title</span>(distrito_de_residencia),</span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>                                           <span class="fu">c</span>(<span class="st">"F Central"</span>, <span class="st">"Feveria C"</span>, <span class="st">"Feveria Central"</span>) <span class="sc">~</span> <span class="st">"Feveria Central"</span>,</span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a>                                           <span class="fu">c</span>(<span class="st">"Kasara"</span>, <span class="st">"Ksr"</span>) <span class="sc">~</span> <span class="st">"Kasara"</span>,</span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a>                                           <span class="fu">c</span>(<span class="st">"L Minara"</span>, <span class="st">"Lago Minara"</span>, <span class="st">"Lakeside"</span>) <span class="sc">~</span> <span class="st">"Lago Minara"</span>))<span class="sc">|&gt;</span> </span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">data_notificacao =</span> <span class="fu">ymd</span>(data_notificacao)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>E pode verificar novamente a classe assim:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(dados_notif<span class="sc">$</span>data_notificacao)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Date"</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="tarefa-d-verificar-a-existência-de-duplicados" class="level4">
<h4 class="anchored" data-anchor-id="tarefa-d-verificar-a-existência-de-duplicados"><strong>Tarefa D: Verificar a existência de duplicados</strong></h4>
<p>Os seus colegas dizem-lhe que cada <code>id_notificacao</code> representa um caso suspeito. Agora você pretende <strong>criar uma tabela para verificar se <code>id_notificacao</code> está duplicado nas linhas dos seus dados</strong>.</p>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Perguntas
</div>
</div>
<div class="callout-body-container callout-body">
<div class="webex-check">
Uma linha nos dados de notificação equivale a um caso?
<div id="radio_TGBGZERWLA" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_TGBGZERWLA" value="answer"> <span>Sim</span></label><label><input type="radio" autocomplete="off" name="radio_TGBGZERWLA" value=""> <span>Não</span></label>
</div>
É necessário deduplicar seus dados para análise epidemiológica dos casos?
<div id="radio_DFIDKLATRX" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_DFIDKLATRX" value=""> <span>Sim</span></label><label><input type="radio" autocomplete="off" name="radio_DFIDKLATRX" value="answer"> <span>Não</span></label>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-23-contents" aria-controls="callout-23" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Clique para ler uma dica
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-23" class="callout-23-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Há várias formas de fazer isso, mas tente utilizar a função <code>count()</code> do pacote <code>{dplyr}</code>. Ela cria uma tabela que conta o número de linhas para cada valor único da coluna que você especificar. Em seguida, utilize <code>tabyl()</code> para visualizar a distribuição dessas contagens.</p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-24-contents" aria-controls="callout-24" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Clique para ver a solução (tente sozinho primeiro!)
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-24" class="callout-24-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Primeiro, passe os dados de notificação para a função <code>count()</code>, usando <code>id_notificacao</code> como único argumento. Isso cria uma contagem do número de linhas para cada valor único de <code>id_notificacao</code>, apresentada em uma nova coluna chamada <code>n</code>. Por exemplo, neste excerto é possível ver que existe apenas uma linha para cada um desses 6 <code>id_notificacao</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>dados_notif <span class="sc">|&gt;</span> </span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(id_notificacao) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>  id_notificacao n
1         00399b 1
2         005c85 1
3         006f52 1
4         00cbbb 1
5         01830d 1
6         019045 1</code></pre>
</div>
</div>
<p>Em seguida, tabule a nova coluna <code>n</code> com a função <code>tabyl()</code>, que mostrará que existe apenas uma linha por <code>id_notificacao</code> único. Isso significa que cada linha equivale a um caso e não é necessária nenhuma deduplicação adicional.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>dados_notif <span class="sc">|&gt;</span> </span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(id_notificacao) <span class="sc">|&gt;</span> </span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabyl</span>(n)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> n n_n percent
 1 987       1</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="etapa-4.2-análise-descritiva-simples" class="level3">
<h3 class="anchored" data-anchor-id="etapa-4.2-análise-descritiva-simples">Etapa 4.2 Análise descritiva simples</h3>
<p>Você pode agora proceder confortavelmente às análises descritivas dos casos, pois os dados estão limpos e cada linha equivale a um caso. Use a função <code>tabyl()</code> para realizar as tarefas seguintes.</p>
<section id="tarefa-a-contar-o-número-de-casos-suspeitos-de-cada-doença-diagnosticados-em-feveria-em-2024" class="level4">
<h4 class="anchored" data-anchor-id="tarefa-a-contar-o-número-de-casos-suspeitos-de-cada-doença-diagnosticados-em-feveria-em-2024"><strong>Tarefa A: Contar o número de casos suspeitos de cada doença diagnosticados em Feveria em 2024</strong></h4>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Perguntas
</div>
</div>
<div class="callout-body-container callout-body">
<div class="webex-check">
Qual doença foi mais frequentemente diagnosticada pelas clínicas em Feveria em 2024?
<div id="radio_PDEGLDXBGK" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_PDEGLDXBGK" value=""> <span>Cólera</span></label><label><input type="radio" autocomplete="off" name="radio_PDEGLDXBGK" value="answer"> <span>Malária</span></label><label><input type="radio" autocomplete="off" name="radio_PDEGLDXBGK" value=""> <span>Dengue</span></label><label><input type="radio" autocomplete="off" name="radio_PDEGLDXBGK" value=""> <span>Febre Tifoide</span></label><label><input type="radio" autocomplete="off" name="radio_PDEGLDXBGK" value=""> <span>Febre Amarela</span></label>
</div>
Qual doença foi menos frequentemente diagnosticada pelas clínicas em Feveria em 2024?
<div id="radio_VZFBRKFXHN" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_VZFBRKFXHN" value=""> <span>Cólera</span></label><label><input type="radio" autocomplete="off" name="radio_VZFBRKFXHN" value=""> <span>Malária</span></label><label><input type="radio" autocomplete="off" name="radio_VZFBRKFXHN" value=""> <span>Dengue</span></label><label><input type="radio" autocomplete="off" name="radio_VZFBRKFXHN" value="answer"> <span>Febre Tifoide</span></label><label><input type="radio" autocomplete="off" name="radio_VZFBRKFXHN" value=""> <span>Febre Amarela</span></label>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-26-contents" aria-controls="callout-26" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Clique para ver a solução (tente sozinho primeiro!)
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-26" class="callout-26-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Usando a função <code>tabyl()</code> podemos ver que houve 533 casos suspeitos de malária em Feveria em 2024, e apenas 35 casos suspeitos de febre tifoide.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tabyl</span>(dados_notif, doenca_notificada)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> doenca_notificada   n    percent
            colera  46 0.04660588
            dengue 273 0.27659574
     febre amarela 100 0.10131712
     febre tifoide  35 0.03546099
           malaria 533 0.54002026</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="tarefa-b-contagem-do-número-de-casos-suspeitos-por-doença-e-distrito-de-residência" class="level4">
<h4 class="anchored" data-anchor-id="tarefa-b-contagem-do-número-de-casos-suspeitos-por-doença-e-distrito-de-residência"><strong>Tarefa B: Contagem do número de casos suspeitos por doença e distrito de residência</strong></h4>
<p><strong>Utilize <code>tabyl()</code> para fazer uma tabulação cruzada das colunas da doença notificada e do distrito de residência.</strong></p>
<p>Desenvolva a tabulação adicionando várias funções <code>adorn()</code> do pacote <code>{janitor}</code> para visualizar as distribuições percentuais, como por exemplo <code>adorn_percentages()</code>, <code>adorn_pct_formatting()</code> e <code>adorn_ns()</code>.</p>
<p>Digite o nome da função precedido de <code>?</code> no console (por exemplo, <code>?adorn_ns</code>) para acessar as páginas de ajuda relevantes. Você também pode consultar a <a href="https://epirhandbook.com/pt/tables_descriptive.pt.html?q=janitor#tbl_janitor">seção sobre {janitor} no Manual de R para Epidemiologistas</a> para mais explicações sobre as funções <code>adorn_xxx()</code>.</p>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Perguntas
</div>
</div>
<div class="callout-body-container callout-body">
<div class="webex-check">
Qual distrito reportou o maior número de doenças transmitidas por vetores em 2024 (malária, dengue, febre amarela)?
<div id="radio_KDRBIIVHLN" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_KDRBIIVHLN" value="answer"> <span>Lago Minara</span></label><label><input type="radio" autocomplete="off" name="radio_KDRBIIVHLN" value=""> <span>Feveria Central</span></label><label><input type="radio" autocomplete="off" name="radio_KDRBIIVHLN" value=""> <span>Kasara</span></label>
</div>
Qual distrito reportou o maior número de doenças diarreicas em 2024 (cólera, febre tifoide)?
<div id="radio_LHUNBSHEVB" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_LHUNBSHEVB" value=""> <span>Lago Minara</span></label><label><input type="radio" autocomplete="off" name="radio_LHUNBSHEVB" value="answer"> <span>Feveria Central</span></label><label><input type="radio" autocomplete="off" name="radio_LHUNBSHEVB" value=""> <span>Kasara</span></label>
</div>
Quais fatores contribuem para o aumento de doenças diarreicas neste distrito específico (selecionado na pergunta anterior)?
<div id="radio_FKIWVSOOIL" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_FKIWVSOOIL" value="answer"> <span>Infraestrutura de água e saneamento pouco confiável</span></label><label><input type="radio" autocomplete="off" name="radio_FKIWVSOOIL" value=""> <span>Superlotação de mosquitos</span></label><label><input type="radio" autocomplete="off" name="radio_FKIWVSOOIL" value=""> <span>Não sabemos</span></label>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-28-contents" aria-controls="callout-28" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Clique para ler uma dica
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-28" class="callout-28-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Aqui está um código para ajudá-lo a começar. Ele cria tabelas cruzadas entre <code>doenca_notificada</code> e <code>distrito_de_residencia</code> usando <code>tabyl()</code> e, em seguida, aplica <code>adorn_percentages()</code> para converter os números em percentagens com muitas casas decimais. Depois, é necessário passar para <code>adorn_pct_formatting()</code> para formatar as percentagens corretamente, e então usar <code>adorn_ns()</code> para adicionar os números originais entre parênteses.</p>
<p>Note que as funções <code>adorn_xxx()</code> devem ser aplicadas em uma ordem específica!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tabyl</span>(dados_notif, doenca_notificada, distrito_de_residencia) <span class="sc">|&gt;</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_percentages</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Para entender os fatores que contribuem para o aumento de casos de diarreia, volte ao início do estudo de caso, quando os distritos foram apresentados pela primeira vez.</p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-29-contents" aria-controls="callout-29" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Clique para ver a solução (tente sozinho primeiro!)
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-29" class="callout-29-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Usando a função <code>tabyl()</code> podemos ver que a maioria dos casos suspeitos de dengue, malária e febre amarela ocorreu no Lago Minara, a área do lago com maior densidade de mosquitos e, portanto, maior transmissão de doenças por vetores. Por outro lado, cólera e febre tifoide foram predominantemente registradas em Feveria Central, uma zona urbana superlotada com problemas de infraestrutura de água e saneamento, que aumentam o risco de inundações e contaminação da água potável durante o período chuvoso.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tabyl</span>(dados_notif, doenca_notificada, distrito_de_residencia) <span class="sc">|&gt;</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_percentages</span>() <span class="sc">|&gt;</span></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_pct_formatting</span>() <span class="sc">|&gt;</span></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_ns</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> doenca_notificada Feveria Central      Kasara Lago Minara
            colera      91.3% (42)  8.7%   (4)  0.0%   (0)
            dengue       9.5% (26) 17.6%  (48) 72.9% (199)
     febre amarela      11.0% (11) 21.0%  (21) 68.0%  (68)
     febre tifoide      68.6% (24) 31.4%  (11)  0.0%   (0)
           malaria      13.7% (73) 19.9% (106) 66.4% (354)</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="passo-5.-limpar-consolidar-e-descrever-os-dados-laboratoriais" class="level2">
<h2 class="anchored" data-anchor-id="passo-5.-limpar-consolidar-e-descrever-os-dados-laboratoriais">Passo 5. Limpar, consolidar e descrever os dados laboratoriais</h2>
<p>Com base no seu trabalho anterior, na Etapa 3, você verificou que os dados laboratoriais contêm apenas informações sobre os testes e nenhuma informação sobre o paciente. Os dados já estão bastante limpos, então só precisamos padronizar uma coluna. Também queremos processar o data frame do laboratório para que haja uma linha por notificação, permitindo que ele seja corretamente vinculado ao data frame de notificações.</p>
<section id="passo-5.1-normalizar-os-resultados-dos-testes" class="level3">
<h3 class="anchored" data-anchor-id="passo-5.1-normalizar-os-resultados-dos-testes">Passo 5.1 Normalizar os resultados dos testes</h3>
<section id="tarefa-a-converter-qualquer-valor-com-p-para-positivo-n-para-negativo-e-i-para-indeterminado." class="level4">
<h4 class="anchored" data-anchor-id="tarefa-a-converter-qualquer-valor-com-p-para-positivo-n-para-negativo-e-i-para-indeterminado."><strong>Tarefa A: Converter qualquer valor com “P” para “Positivo”, “N” para “Negativo” e “I” para “Indeterminado”.</strong></h4>
<p>Criar um novo objeto <code>dados_lab</code>. Isto permitirá uma abordagem e análise mais direta bem como facilitará a interpretação dos resultados.</p>
<div class="callout callout-style-default callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-30-contents" aria-controls="callout-30" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Clique para ver a solução (tente sozinho primeiro!)
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-30" class="callout-30-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Utilize <code>case_match()</code> para transformar os diferentes valores originais em “Positivo”, “Negativo” ou “Indeterminado”:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>dados_lab <span class="ot">&lt;-</span> dados_lab_bruto <span class="sc">|&gt;</span> </span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">resultado =</span> <span class="fu">case_match</span>(resultado, </span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>                            <span class="fu">c</span>(<span class="st">"P"</span>, <span class="st">"PO1"</span>, <span class="st">"PO139"</span>) <span class="sc">~</span> <span class="st">"Positivo"</span>,</span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"N"</span> <span class="sc">~</span> <span class="st">"Negativo"</span>,</span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"I"</span> <span class="sc">~</span> <span class="st">"Indeterminado"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Você pode então verificar novamente se os novos valores estão corretos, tabulando e comparando os valores no data frame original e no data frame limpo. Certifique-se de que utilizou a letra ‘O’ e não o número ‘0’!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tabyl</span>(dados_lab_bruto, resultado)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> resultado   n    percent
         I  73 0.05555556
         N 682 0.51902588
         P 521 0.39649924
       PO1  22 0.01674277
     PO139  16 0.01217656</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tabyl</span>(dados_lab, resultado)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     resultado   n    percent
 Indeterminado  73 0.05555556
      Negativo 682 0.51902588
      Positivo 559 0.42541857</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="passo-5.2-consolidar-uma-linha-por-teste" class="level3">
<h3 class="anchored" data-anchor-id="passo-5.2-consolidar-uma-linha-por-teste">Passo 5.2 Consolidar uma linha por teste</h3>
<section id="tarefa-a-revisar-o-número-de-amostras-com-várias-linhas" class="level4">
<h4 class="anchored" data-anchor-id="tarefa-a-revisar-o-número-de-amostras-com-várias-linhas"><strong>Tarefa A: Revisar o número de amostras com várias linhas</strong></h4>
<p>Já sabemos que algumas amostras possuem várias linhas, porque o teste de dengue possui três alvos, gerando uma linha por resultado de alvo.</p>
<p>Agora, <strong>identifique o número de amostras com várias linhas</strong>.</p>
<p>Faça isso da mesma forma que fez com os dados de notificação: use <code>dados_lab</code> para primeiro contar o número de linhas por amostra e, em seguida, crie uma tabela para mostrar a distribuição desses números de linhas. Lembre-se de que cada amostra é identificada por um <code>id_amostra</code>.</p>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Perguntas
</div>
</div>
<div class="callout-body-container callout-body">
<div class="webex-check">
Quantas amostras (valores únicos de <code>id_amostra</code>) estão sendo repetidos em três linhas?
<div id="radio_MRKONNDQQM" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_MRKONNDQQM" value=""> <span>200</span></label><label><input type="radio" autocomplete="off" name="radio_MRKONNDQQM" value="answer"> <span>215</span></label><label><input type="radio" autocomplete="off" name="radio_MRKONNDQQM" value=""> <span>230</span></label>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-32-contents" aria-controls="callout-32" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Clique para ver a solução (tente sozinho primeiro!)
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-32" class="callout-32-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Primeiro, passe os dados laboratoriais para a função <code>count()</code>, usando <code>id_amostra</code> como único argumento.<br>
Isso cria uma tabela que conta o número de linhas por valor único de <code>id_amostra</code>, apresentado em uma nova coluna <code>n</code>.<br>
Por exemplo, pode-se ver que o <code>id_amostra</code> “000e8eee” possui três linhas, enquanto o <code>id_amostra</code> “001e1878” aparece em apenas uma linha.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>dados_lab <span class="sc">|&gt;</span> </span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(id_amostra) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>  id_amostra n
1   000e8eee 3
2   001e1878 1
3   005f39af 1
4   00b30781 3
5   00b56d18 1
6   0110abcd 3</code></pre>
</div>
</div>
<p>Em seguida, tabule a nova coluna <code>n</code> com o <code>tabyl()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>dados_lab <span class="sc">|&gt;</span> </span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(id_amostra) <span class="sc">|&gt;</span> </span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabyl</span>(n)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> n n_n   percent
 1 669 0.7567873
 3 215 0.2432127</code></pre>
</div>
</div>
<p>Pode até verificar se isto se aplica apenas ao exame de dengue adicionando a <code>doença</code> ao cálculo. Pode ver que é apenas o teste da dengue que tem 3 linhas por amostra.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>dados_lab <span class="sc">|&gt;</span> </span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(exame, id_amostra) <span class="sc">|&gt;</span> </span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabyl</span>(exame, n)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                       exame   1   3
            Cultura de fezes  45   0
          Dengue NS1/IgG/IgM   0 215
                 Hemocultura  33   0
                   IgM ELISA  88   0
 Microscopia de sangue total 503   0</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="tarefa-b-consolidar-uma-linha-por-sample_id-dando-prioridade-aos-resultados-positivos" class="level4">
<h4 class="anchored" data-anchor-id="tarefa-b-consolidar-uma-linha-por-sample_id-dando-prioridade-aos-resultados-positivos"><strong>Tarefa B: Consolidar uma linha por sample_id, dando prioridade aos resultados positivos</strong></h4>
<p>Como você viu na Seção 3.2, o teste de dengue fornece resultados para três alvos diferentes: IgG, IgM e NS1. Os resultados para cada um desses alvos podem ser negativos ou positivos. No entanto, para simplificar e consolidar os dados, deseja-se atribuir um único valor, negativo ou positivo, para cada amostra, indicando se a amostra representa uma infecção ativa.</p>
<div class="cell">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-a7ce0448{}.cl-a7c269bc{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-a7c74946{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-a7c7495a{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-a7c7781c{width:1.202in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a7c77830{width:0.888in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a7c77831{width:0.82in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a7c7783a{width:1.202in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a7c77844{width:0.888in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a7c77845{width:0.82in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a7c7784e{width:1.202in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a7c7784f{width:0.888in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a7c77858{width:0.82in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a7c77859{width:1.202in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a7c77862{width:0.888in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a7c77863{width:0.82in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-a7ce0448"><thead><tr style="overflow-wrap:break-word;"><th class="cl-a7c7781c"><p class="cl-a7c74946"><span class="cl-a7c269bc">alvo</span></p></th><th class="cl-a7c77830"><p class="cl-a7c7495a"><span class="cl-a7c269bc">Negativo</span></p></th><th class="cl-a7c77831"><p class="cl-a7c7495a"><span class="cl-a7c269bc">Positivo</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-a7c7783a"><p class="cl-a7c74946"><span class="cl-a7c269bc">Dengue IgG</span></p></td><td class="cl-a7c77844"><p class="cl-a7c7495a"><span class="cl-a7c269bc">110</span></p></td><td class="cl-a7c77845"><p class="cl-a7c7495a"><span class="cl-a7c269bc">105</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-a7c7784e"><p class="cl-a7c74946"><span class="cl-a7c269bc">Dengue IgM</span></p></td><td class="cl-a7c7784f"><p class="cl-a7c7495a"><span class="cl-a7c269bc">105</span></p></td><td class="cl-a7c77858"><p class="cl-a7c7495a"><span class="cl-a7c269bc">110</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-a7c77859"><p class="cl-a7c74946"><span class="cl-a7c269bc">Dengue NS.1</span></p></td><td class="cl-a7c77862"><p class="cl-a7c7495a"><span class="cl-a7c269bc">139</span></p></td><td class="cl-a7c77863"><p class="cl-a7c7495a"><span class="cl-a7c269bc">76</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>O seu colega Ben, que trabalha no laboratório, aconselha sobre a limpeza da seguinte forma:</p>
<ul>
<li>Uma amostra pode ser considerada positiva se NS1 ou IgM forem positivos (já que ambos podem indicar uma infecção aguda).<br>
</li>
<li>O IgG pode ser ignorado (porque um resultado positivo, na ausência de NS1 ou IgM positivos, indica imunidade de uma infecção passada resolvida).</li>
</ul>
<p>Agora, você precisa <strong>consolidar os resultados dos testes de dengue em uma linha por teste, com um valor de resultado</strong>. Utilize <code>filter()</code>, <code>arrange()</code> e <code>slice()</code>, garantindo que qualquer amostra positiva para NS1 ou IgM seja considerada positiva para dengue.<br>
Crie um novo objeto chamado <code>dados_lab_testes</code>.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-33-contents" aria-controls="callout-33" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Clique para ler uma dica
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-33" class="callout-33-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Tente aplicar o seguinte para consolidar os resultados de acordo com a recomendação do Ben:</p>
<ol type="1">
<li>Remover resultados de IgG: filtre as linhas em que o alvo é <code>"IgG"</code> usando <code>filter()</code> do <code>{dplyr}</code>.<br>
</li>
<li>Priorizar resultados positivos de IgM/NS1: agrupe por <code>id_amostra</code> e organize as linhas com <code>arrange()</code> para que qualquer resultado <code>"P"</code> (positivo) apareça primeiro.<br>
</li>
<li>Filtrar para o status final: mantenha apenas a primeira linha usando <code>slice(1)</code> para obter o resultado positivo ou negativo da amostra.</li>
</ol>
</div>
</div>
</div>
<div class="callout callout-style-default callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-34-contents" aria-controls="callout-34" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Clique para ver a solução (experimente primeiro!)
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-34" class="callout-34-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Aqui está o código para filtrar os resultados de IgG da dengue e, em seguida, consolidar o resultado do teste dentro de cada grupo de linhas com o mesmo <code>id_amostra</code>, dando prioridade aos resultados positivos.</p>
<p>É necessário especificar <code>desc</code> dentro de <code>arrange()</code>, pois isso faz com que os resultados sejam ordenados em ordem alfabética inversa, colocando <code>"P"</code> no topo.</p>
<p>Além disso, adicione <code>ungroup()</code> no final para que os novos dados não permaneçam agrupados, o que poderia interferir em análises posteriores.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>dados_lab_testes <span class="ot">&lt;-</span> dados_lab <span class="sc">|&gt;</span> </span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(alvo <span class="sc">!=</span> <span class="st">"Dengue IgG"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(id_amostra) <span class="sc">|&gt;</span> </span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(resultado)) <span class="sc">|&gt;</span> </span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span>) <span class="sc">|&gt;</span> </span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Em seguida, é possível verificar novamente se o novo objeto <code>dados_lab_testes</code> contém apenas uma linha por teste, utilizando a combinação de <code>count()</code> e <code>tabyl()</code> como feito na Tarefa A.</p>
<p>Esta tabela mostra que todos os IDs de amostra únicos estão presentes em apenas uma linha cada:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>dados_lab_testes <span class="sc">|&gt;</span> </span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(id_amostra) <span class="sc">|&gt;</span> </span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabyl</span>(n)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> n n_n percent
 1 884       1</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="tarefa-c-desduplicar-para-uma-linha-por-id_notificacao-dando-prioridade-aos-resultados-positivos" class="level4">
<h4 class="anchored" data-anchor-id="tarefa-c-desduplicar-para-uma-linha-por-id_notificacao-dando-prioridade-aos-resultados-positivos"><strong>Tarefa C: Desduplicar para uma linha por <code>id_notificacao</code>, dando prioridade aos resultados positivos</strong></h4>
<p>Em seguida, verifique o número de testes por ID de notificação nos novos dados consolidados.</p>
<p>Pode-se observar que existem 26 linhas com o mesmo <code>id_notificacao</code> que outra linha, mas apenas entre os casos testados com microscopia de sangue total para malária.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>dados_lab_testes <span class="sc">|&gt;</span> </span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(exame, id_notificacao) <span class="sc">|&gt;</span> </span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabyl</span>(exame, n)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                       exame   1  2
            Cultura de fezes  45  0
          Dengue NS1/IgG/IgM 215  0
                 Hemocultura  33  0
                   IgM ELISA  88  0
 Microscopia de sangue total 451 26</code></pre>
</div>
</div>
<p>Investiga-se mais detalhadamente analisando um caso de exemplo com <code>id_notificacao</code> “043228”.</p>
<p>Isso mostra que este caso foi testado duas vezes, com duas amostras diferentes, com uma semana de intervalo. O primeiro resultado foi positivo e o segundo resultado foi negativo.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>dados_lab_testes <span class="sc">|&gt;</span> </span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(id_notificacao <span class="sc">==</span> <span class="st">"043228"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 7
  nome_laboratorio    id_notificacao id_amostra data_exame exame alvo  resultado
  &lt;chr&gt;               &lt;chr&gt;          &lt;chr&gt;      &lt;IDate&gt;    &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;    
1 Hospital Universit… 043228         27c37cd8   2024-06-18 Micr… Plas… Positivo 
2 Hospital Universit… 043228         d2271be0   2024-06-25 Micr… Plas… Negativo </code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Perguntas
</div>
</div>
<div class="callout-body-container callout-body">
<div class="webex-check">
Qual afirmação sobre os dados laboratoriais está correta?
<div id="radio_WBPKZMSWJA" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_WBPKZMSWJA" value=""> <span>Todos os casos de diferentes doenças são retestados</span></label><label><input type="radio" autocomplete="off" name="radio_WBPKZMSWJA" value="answer"> <span>Alguns casos de malária são retestados</span></label><label><input type="radio" autocomplete="off" name="radio_WBPKZMSWJA" value=""> <span>Todos os casos de malária são retestados</span></label>
</div>
Será necessário deduplicar os dados laboratoriais para ligar com os dados de notificação?
<div id="radio_WTKGOIGJDF" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_WTKGOIGJDF" value="answer"> <span>Sim - precisamos de uma linha representando o resultado do laboratório por notificação</span></label><label><input type="radio" autocomplete="off" name="radio_WTKGOIGJDF" value=""> <span>Não - os dados já estão suficientemente deduplicados</span></label>
</div>
</div>
</div>
</div>
<p>Se respondeu que precisa deduplicar, está correto!</p>
<p><strong>Deduplicar os dados para ter uma linha por ID de notificação</strong> priorizando os resultados positivos, para que seja possível fazer a vinculação com os dados da notificação.</p>
<p>Para fazer isso, siga um processo semelhante ao da tarefa B, utilizando a estrutura de dados produzida pela tarefa B:</p>
<ul>
<li>Agrupar por <code>id_notificacao</code></li>
<li>Ordenar pelo valor do resultado do exame, de modo a que os valores que começam por P tenham prioridade na linha superior, seguidos por N (negativo) e depois I (indeterminado).</li>
<li>Em seguida, mantenha a primeira linha dentro de cada grupo de <code>id_notificacao</code>s, utilizando <code>slice()</code>.</li>
<li>Ao fazer isto, crie um novo objeto chamado <code>dados_lab_casos</code>.</li>
</ul>
<div class="callout callout-style-default callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-36-contents" aria-controls="callout-36" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Clique para ver a solução (tente sozinho primeiro!)
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-36" class="callout-36-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Aqui está o código para deduplicar as linhas dentro de cada grupo de linhas com o mesmo <code>id_notificacao</code> dando prioridade aos resultados positivos. Mais uma vez, você precisa especificar <code>desc</code> dentro de <code>arrange()</code>. Isto funciona perfeitamente porque a ordem de prioridade desejada para os resultados — positivos, depois negativos, depois indeterminados — alinha-se com a ordem alfabética inversa (P vem antes de N, que vem antes de I, quando ordenado de forma descendente).</p>
<p>Se a sua ordem de prioridades fosse mais complexa ou não correspondesse à ordem alfabética (por exemplo, se “indeterminado” precisasse de vir antes de “negativo”), teria de converter a coluna de resultados num fator e explicitamente definir a ordem desejada dos seus níveis. Não se esqueça de desagrupar novamente no final.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>dados_lab_casos <span class="ot">&lt;-</span> dados_lab_testes <span class="sc">|&gt;</span> </span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(id_notificacao) <span class="sc">|&gt;</span> </span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(resultado)) <span class="sc">|&gt;</span> </span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span>) <span class="sc">|&gt;</span></span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Você pode então verificar novamente se o novo objeto <code>dados_lab_casos</code> tem apenas uma linha por exame, usando a combinação de <code>count()</code> e <code>tabyl()</code> como fez na Tarefa A. Esta tabela lhe mostra que todos os IDs de amostra únicos estão presentes em apenas uma linha cada:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>dados_lab_casos <span class="sc">|&gt;</span> </span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(id_notificacao) <span class="sc">|&gt;</span> </span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabyl</span>(n)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> n n_n percent
 1 858       1</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="passo-5.3-análise-descritiva-simples" class="level3">
<h3 class="anchored" data-anchor-id="passo-5.3-análise-descritiva-simples">Passo 5.3 Análise descritiva simples</h3>
<p>Agora temos dois objetos que podemos utilizar para a análise de dados laboratoriais: <code>dados_lab_testes</code> e <code>dados_lab_casos</code>.</p>
<section id="tarefa-a-contar-o-número-de-exames-específicos-de-doenças-resultados-positivos-e-resultados-negativos-nos-dados-laboratoriais-de-2024" class="level4">
<h4 class="anchored" data-anchor-id="tarefa-a-contar-o-número-de-exames-específicos-de-doenças-resultados-positivos-e-resultados-negativos-nos-dados-laboratoriais-de-2024"><strong>Tarefa A: Contar o número de exames específicos de doenças, resultados positivos e resultados negativos nos dados laboratoriais de 2024</strong></h4>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Perguntas
</div>
</div>
<div class="callout-body-container callout-body">
<div class="webex-check">
Que objeto você deve utilizar para analisar os exames?
<div id="radio_DSVXORWFTH" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_DSVXORWFTH" value="answer"> <span>dados_lab_testes</span></label><label><input type="radio" autocomplete="off" name="radio_DSVXORWFTH" value=""> <span>dados_lab_casos</span></label><label><input type="radio" autocomplete="off" name="radio_DSVXORWFTH" value=""> <span>nenhum destes</span></label>
</div>
Quantos exames foram conduzidos para examinar para malária (através da microscopia de sangue total)?
<div id="radio_PBCBLOOTGJ" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_PBCBLOOTGJ" value=""> <span>215</span></label><label><input type="radio" autocomplete="off" name="radio_PBCBLOOTGJ" value="answer"> <span>503</span></label><label><input type="radio" autocomplete="off" name="radio_PBCBLOOTGJ" value=""> <span>88</span></label><label><input type="radio" autocomplete="off" name="radio_PBCBLOOTGJ" value=""> <span>190</span></label>
</div>
Que porcentagem dos exames para cólera (através da cultura de fezes) foi positiva?
<div id="radio_DUTHYMTFVE" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_DUTHYMTFVE" value=""> <span>21%</span></label><label><input type="radio" autocomplete="off" name="radio_DUTHYMTFVE" value=""> <span>11%</span></label><label><input type="radio" autocomplete="off" name="radio_DUTHYMTFVE" value="answer"> <span>84%</span></label><label><input type="radio" autocomplete="off" name="radio_DUTHYMTFVE" value=""> <span>87%</span></label>
</div>
Quais exames tiveram a maior porcentagem de resultados indeterminados?
<div id="radio_OYKUJWGWZJ" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_OYKUJWGWZJ" value="answer"> <span>IgM ELISA (para detecção de febre amarela)</span></label><label><input type="radio" autocomplete="off" name="radio_OYKUJWGWZJ" value=""> <span>Cultura de fezes (para detecção de cólera)</span></label><label><input type="radio" autocomplete="off" name="radio_OYKUJWGWZJ" value=""> <span>Hemocultura (para detecção de febre tifóide)</span></label>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-38-contents" aria-controls="callout-38" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Clique para ver a solução (tente sozinho primeiro!)
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-38" class="callout-38-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Utilizando <code>tabyl()</code> podemos ver o número de resultados positivos, negativos e indeterminados por exame. Você pode adicionar uma série de funções <code>adorn()</code> para mostrar porcentagens e totais.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tabyl</span>(dados_lab_testes, exame, resultado) <span class="sc">|&gt;</span> </span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_totals</span>(<span class="at">where =</span> <span class="st">"col"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_percentages</span>() <span class="sc">|&gt;</span> </span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_pct_formatting</span>() <span class="sc">|&gt;</span> </span>
<span id="cb75-5"><a href="#cb75-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_ns</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                       exame Indeterminado    Negativo    Positivo        Total
            Cultura de fezes    11.1%  (5)  4.4%   (2) 84.4%  (38) 100.0%  (45)
          Dengue NS1/IgG/IgM     0.0%  (0) 13.5%  (29) 86.5% (186) 100.0% (215)
                 Hemocultura     6.1%  (2) 72.7%  (24) 21.2%   (7) 100.0%  (33)
                   IgM ELISA    11.4% (10) 51.1%  (45) 37.5%  (33) 100.0%  (88)
 Microscopia de sangue total    11.1% (56) 51.1% (257) 37.8% (190) 100.0% (503)</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="tarefa-b-contar-o-número-de-casos-suspeitos-examinados-nos-dados-de-2024" class="level4">
<h4 class="anchored" data-anchor-id="tarefa-b-contar-o-número-de-casos-suspeitos-examinados-nos-dados-de-2024"><strong>Tarefa B: Contar o número de casos suspeitos examinados nos dados de 2024</strong></h4>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Perguntas
</div>
</div>
<div class="callout-body-container callout-body">
<div class="webex-check">
Que data frame de dados laboratoriais você deve usar para contar o número de casos supeitos examinados?
<div id="radio_LXHETOLVNG" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_LXHETOLVNG" value=""> <span>dados_lab_bruto</span></label><label><input type="radio" autocomplete="off" name="radio_LXHETOLVNG" value="answer"> <span>dados_lab_casos</span></label><label><input type="radio" autocomplete="off" name="radio_LXHETOLVNG" value=""> <span>dados_lab_testes</span></label><label><input type="radio" autocomplete="off" name="radio_LXHETOLVNG" value=""> <span>dados_lab</span></label>
</div>
Quantos casos suspeitos foram examinados nos dados laboratoriais de 2024?
<div id="radio_PZYLJSHAUL" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_PZYLJSHAUL" value="answer"> <span>858</span></label><label><input type="radio" autocomplete="off" name="radio_PZYLJSHAUL" value=""> <span>1314</span></label><label><input type="radio" autocomplete="off" name="radio_PZYLJSHAUL" value=""> <span>884</span></label>
</div>
Existem mais casos suspeitos nos dados de notificação ou nos dados laboratoriais?
<div id="radio_YNEIEHLWIK" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_YNEIEHLWIK" value="answer"> <span>dados de notificação</span></label><label><input type="radio" autocomplete="off" name="radio_YNEIEHLWIK" value=""> <span>Dados laboratoriais</span></label>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-40-contents" aria-controls="callout-40" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Clique para ver a solução (experimente primeiro!)
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-40" class="callout-40-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Você pode simplesmente analisar o número de linhas no data frame <code>dados_lab_casos</code> para ver o número de casos suspeitos que foram examinados.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(dados_lab_casos)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 858</code></pre>
</div>
</div>
<p>Este número é inferior ao número de casos suspeitos que estavam nos dados limpos de vigilância de doenças de notificação compulsória (<code>dados_notif</code>) - o que sugere que nem todos os casos suspeitos em 2024 foram examinados quando estes dados estavam disponíveis.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(dados_notif)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 987</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="etapa-6.-vinculação-e-processamento-final" class="level2">
<h2 class="anchored" data-anchor-id="etapa-6.-vinculação-e-processamento-final">Etapa 6. Vinculação e processamento final</h2>
<p>Agora que ambas as listas de casos estão limpas e têm uma linha por caso suspeito, você pode vinculá-las para permitir a análise completa solicitada pelo seu chefe.</p>
<section id="passo-6.1-vincular-os-dados-de-notificação-e-os-dados-laboratoriais" class="level3">
<h3 class="anchored" data-anchor-id="passo-6.1-vincular-os-dados-de-notificação-e-os-dados-laboratoriais">Passo 6.1 Vincular os dados de notificação e os dados laboratoriais</h3>
<section id="tarefa-a-realizar-a-vinculaçõa" class="level4">
<h4 class="anchored" data-anchor-id="tarefa-a-realizar-a-vinculaçõa"><strong>Tarefa A: Realizar a vinculaçõa</strong></h4>
<p>Criar um novo objeto chamado <code>dados_vinculados</code>, utilizando uma função <code>xxx_join()</code> do <code>{dplyr}</code>. Pretende-se manter todas as notificações, mas adicionar resultados de exames, quando disponíveis, para cada caso suspeito.</p>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Perguntas
</div>
</div>
<div class="callout-body-container callout-body">
<div class="webex-check">
Que função traz a abordagem correta se você quiser manter todas as linhas dos seus dados de notificação e trazer os resultados dos dados laboratoriais?
<div id="radio_POGFUJDGWP" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_POGFUJDGWP" value="answer"> <span>left_join(dados_notif, dados_lab_casos…</span></label><label><input type="radio" autocomplete="off" name="radio_POGFUJDGWP" value=""> <span>full_join(dados_notif, dados_lab_casos…</span></label><label><input type="radio" autocomplete="off" name="radio_POGFUJDGWP" value=""> <span>right_join(dados_notif, dados_lab_casos…</span></label>
</div>
Que identificador deve ser utilizado para vincular as duas listas de casos?
<div id="radio_KQVVFLWQMU" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_KQVVFLWQMU" value=""> <span>id_amostra</span></label><label><input type="radio" autocomplete="off" name="radio_KQVVFLWQMU" value="answer"> <span>id_notificacao</span></label><label><input type="radio" autocomplete="off" name="radio_KQVVFLWQMU" value=""> <span>id_amostra e data de notificação</span></label><label><input type="radio" autocomplete="off" name="radio_KQVVFLWQMU" value=""> <span>id_notificacao e data de notificação</span></label>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-42-contents" aria-controls="callout-42" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Clique para ver a solução (experimente primeiro!)
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-42" class="callout-42-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Ligue os dados utilizando o <code>left_join()</code> com os dados de notificação como data frame principal à esquerda. Isto manterá todas as linhas deste data frame e apenas introduzirá os resultados dos exames nos dados laboratoriais especificados à “direita” da função.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>dados_vinculados <span class="ot">&lt;-</span> <span class="fu">left_join</span>(dados_notif, dados_lab_casos, </span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>                         <span class="at">by =</span> <span class="st">"id_notificacao"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Você está ligando através da coluna <code>id_notificacao</code>, que está presente, completa e limpa em ambas as listas de casos.</p>
<p><strong>Nota</strong>: Você tem sorte de trabalhar com um exemplo de ligação tão simples! Normalmente, seria necessário limpar e verificar a coluna de ID, ou vincular a outras colunas como o nome e a data de nascimento. Em Feveria, os clínicos são <em>fantásticos</em> em atribuir consistentemente IDs de notificação a cada doente, incluindo nos formulários de amostra enviados para o laboratório, e ainda o pessoal do laboratório é igualmente <em>brilhante</em> em registrar o ID de notificação nos seus sistemas de laboratório, para que os resultados possam ser associados ao caso.</p>
</div>
</div>
</div>
</section>
<section id="tarefa-b-verificar-se-a-vinculação-funcionou-como-esperado" class="level4">
<h4 class="anchored" data-anchor-id="tarefa-b-verificar-se-a-vinculação-funcionou-como-esperado"><strong>Tarefa B: Verificar se a vinculação funcionou como esperado</strong></h4>
<p>Agora, verifique os seus dados e revise algumas coisas.</p>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Perguntas
</div>
</div>
<div class="callout-body-container callout-body">
<div class="webex-check">
Quantas linhas tem o seu novo data frame <code>dados_vinculados</code>?
<div id="radio_WWMUVXDBYC" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_WWMUVXDBYC" value="answer"> <span>987</span></label><label><input type="radio" autocomplete="off" name="radio_WWMUVXDBYC" value=""> <span>884</span></label><label><input type="radio" autocomplete="off" name="radio_WWMUVXDBYC" value=""> <span>858</span></label>
</div>
Como este resultado se compara aos seus dados de notificação originais?
<div id="radio_MFQGXUXSKH" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_MFQGXUXSKH" value=""> <span>mais linhas que o original</span></label><label><input type="radio" autocomplete="off" name="radio_MFQGXUXSKH" value="answer"> <span>o mesmo número de linhas</span></label><label><input type="radio" autocomplete="off" name="radio_MFQGXUXSKH" value=""> <span>menos linhas</span></label>
</div>
Que termo melhor descreve a vinculação que você acabou de realizar?
<div id="radio_BFDOVYANGN" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_BFDOVYANGN" value=""> <span>muitos-para-um</span></label><label><input type="radio" autocomplete="off" name="radio_BFDOVYANGN" value="answer"> <span>um-para-um</span></label><label><input type="radio" autocomplete="off" name="radio_BFDOVYANGN" value=""> <span>muitos-para-muitos</span></label>
</div>
Quantos resultados de laboratório NÃO foram vinculados? (dica: use <code>anti-join()</code>)?
<div id="radio_UXKQLHCSCL" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_UXKQLHCSCL" value=""> <span>30</span></label><label><input type="radio" autocomplete="off" name="radio_UXKQLHCSCL" value=""> <span>19</span></label><label><input type="radio" autocomplete="off" name="radio_UXKQLHCSCL" value="answer"> <span>0</span></label>
</div>
Quão sortudo você foi por sua vinculação de dados ter sido tão bem-sucedida?
<div id="radio_TTRMXEAQKO" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_TTRMXEAQKO" value=""> <span>O quê? Nem toda vinculação de dados é simples assim??</span></label><label><input type="radio" autocomplete="off" name="radio_TTRMXEAQKO" value="answer"> <span>Bastante! Normalmente alguns registros não têm correspondência.</span></label>
</div>
Quais são razões típicas para os dados laboratoriais não possuírem correspondência entre os dados de notificação?
<div id="radio_GVVFMXOSLB" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_GVVFMXOSLB" value=""> <span>Existem erros de digitação nas colunas utilizadas para a vinculação, e por isso elas não são reconhecidas como correspondências</span></label><label><input type="radio" autocomplete="off" name="radio_GVVFMXOSLB" value=""> <span>Os dados laboratoriais podem conter casos adicionais de outras clínicas ou países</span></label><label><input type="radio" autocomplete="off" name="radio_GVVFMXOSLB" value=""> <span>Os dados laboratoriais podem incluir amostras de exames</span></label><label><input type="radio" autocomplete="off" name="radio_GVVFMXOSLB" value=""> <span>Notificações podem ter sido acidentalmente perdidas nos dados de notificação apesar da amostra ter sido examinada em laboratório</span></label><label><input type="radio" autocomplete="off" name="radio_GVVFMXOSLB" value="answer"> <span>Todas as opções acima</span></label>
</div>
Quantos casos supeitos não possuem um resultado?
<div id="radio_EYIGBEKYFO" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_EYIGBEKYFO" value=""> <span>83</span></label><label><input type="radio" autocomplete="off" name="radio_EYIGBEKYFO" value=""> <span>100</span></label><label><input type="radio" autocomplete="off" name="radio_EYIGBEKYFO" value="answer"> <span>129</span></label>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-44-contents" aria-controls="callout-44" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Clique para ver a solução (tente sozinho primeiro!)
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-44" class="callout-44-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Verifique o número de linhas em cada quadro de dados com o comando <code>nrow()</code> ou olhando as informações do objeto no seu ambiente. É possível ver que esta foi simplesmente uma vinculação de um para um, porque cada linha tinha um único <code>id_notificacao</code>, então uma linha nos dados de notificação se vinculou exatamente a uma linha dos dados laboratoriais.</p>
<p><strong>Número de linhas nos dados de notificação</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(dados_notif)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 987</code></pre>
</div>
</div>
<p><strong>Número de linhas nos dados vinculados</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(dados_vinculados)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 987</code></pre>
</div>
</div>
<p>Para verificar se houve algum resultado de laboratório que não estava ligado aos dados de notificação, é possível usar <code>anti_join()</code>. Desta vez, o objeto <code>dados_lab_casos</code> está à esquerda, pois a função avalia quantas linhas do data frame da esquerda não foram encontradas no data frame da direita, ao realizar a correspondência por <code>id_notificacao</code>. Aqui não é necessário gerar um novo data frame, você pode simplesmente passar, através de um pipe, o resultado para <code>nrow()</code> para contar o número de linhas. A saída é 0, o que mostra que não houve resultados sem vínculo - incrível!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="fu">anti_join</span>(dados_lab_casos, dados_notif, </span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a>          <span class="at">by =</span> <span class="st">"id_notificacao"</span>) <span class="sc">|&gt;</span> <span class="fu">nrow</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
</div>
<p>Finalmente, para verificar o número de notificações sem um resultado, você pode efetuar um anti_join ao colocar <code>dados_notif</code> primeiro:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="fu">anti_join</span>(dados_notif, dados_lab_casos, </span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a>          <span class="at">by =</span> <span class="st">"id_notificacao"</span>) <span class="sc">|&gt;</span> <span class="fu">nrow</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 129</code></pre>
</div>
</div>
<p>Ou, pode simplesmente tabular o número de valores em falta na coluna <code>resultado</code> em <code>dados_vinculados</code> (já que a coluna <code>resultado</code> provém dos dados laboratoriais).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tabyl</span>(<span class="fu">is.na</span>(dados_vinculados<span class="sc">$</span>resultado)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> is.na(dados_vinculados$resultado)   n   percent
                             FALSE 858 0.8693009
                              TRUE 129 0.1306991</code></pre>
</div>
</div>
<p>Ambas as abordagens mostram que 129 casos suspeitos não têm um resultado de exame laboratorial.</p>
</div>
</div>
</div>
</section>
</section>
<section id="passo-6.2-rotular-os-casos-confirmados-descartados-e-suspeitos" class="level3">
<h3 class="anchored" data-anchor-id="passo-6.2-rotular-os-casos-confirmados-descartados-e-suspeitos">Passo 6.2 Rotular os casos confirmados, descartados e suspeitos</h3>
<section id="tarefa-a-criar-uma-coluna-final-de-categoria-de-caso" class="level4">
<h4 class="anchored" data-anchor-id="tarefa-a-criar-uma-coluna-final-de-categoria-de-caso"><strong>Tarefa A: Criar uma coluna final de “categoria de caso”</strong></h4>
<p><strong>Utilize <code>mutate()</code> para criar uma nova coluna <code>categoria_caso</code></strong> atualizando o rótulo dos casos suspeitos de acordo com o seu resultado laboratorial. As categorias devem ser as seguintes:</p>
<ul>
<li>Se o resultado for positivo: Confirmado</li>
<li>Se o resultado for negativo: Descartado</li>
<li>Se o resultado for indeterminado ou inexistente: Suspeito</li>
</ul>
<p>Isto significa que todos os casos nos dados de notificação são inicialmente suspeitos quando notificados, e permanecem suspeitos se não houver um resultado conclusivo no exame.</p>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Perguntas
</div>
</div>
<div class="callout-body-container callout-body">
<div class="webex-check">
Qual é a função mais apropriada para criar essa nova coluna?
<div id="radio_AKCUAOXATR" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_AKCUAOXATR" value="answer"> <span>case_when()</span></label><label><input type="radio" autocomplete="off" name="radio_AKCUAOXATR" value=""> <span>if_else()</span></label><label><input type="radio" autocomplete="off" name="radio_AKCUAOXATR" value=""> <span>case_match()</span></label>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-46-contents" aria-controls="callout-46" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Clique para ver a solução (tente sozinho primeiro!)
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-46" class="callout-46-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Você deve utilizar o <code>case_when()</code> para criar a nova coluna. Esta função é ideal para aplicar múltiplas condições lógicas para criar múltiplos valores, enquanto que <code>case_match()</code> é melhor para substituir valores específicos, e <code>if_else()</code> é melhor se houver apenas dois valores possíveis.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>dados_vinculados <span class="ot">&lt;-</span> dados_vinculados <span class="sc">|&gt;</span> </span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">categoria_caso =</span> <span class="fu">case_when</span>(resultado<span class="sc">==</span><span class="st">"Positivo"</span> <span class="sc">~</span> <span class="st">"Confirmado"</span>,</span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a>                                   resultado<span class="sc">==</span><span class="st">"Negativo"</span> <span class="sc">~</span> <span class="st">"Descartado"</span>,</span>
<span id="cb92-4"><a href="#cb92-4" aria-hidden="true" tabindex="-1"></a>                                   resultado<span class="sc">==</span><span class="st">"Indeterminado"</span> <span class="sc">|</span> <span class="fu">is.na</span>(resultado) <span class="sc">~</span> <span class="st">"Suspeito"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="passo-6.3-analisar-a-distribuição-dos-resultados-laboratoriais-entre-os-casos" class="level3">
<h3 class="anchored" data-anchor-id="passo-6.3-analisar-a-distribuição-dos-resultados-laboratoriais-entre-os-casos">Passo 6.3 Analisar a distribuição dos resultados laboratoriais entre os casos</h3>
<section id="tarefa-a-utilizar-tabyl-para-tabular-a-categoria-de-caso" class="level4">
<h4 class="anchored" data-anchor-id="tarefa-a-utilizar-tabyl-para-tabular-a-categoria-de-caso"><strong>Tarefa A: Utilizar <code>tabyl()</code> para tabular a categoria de caso</strong></h4>
<p>Utilizar <code>tabyl()</code> em geral, e também a tabulação cruzada por doença para responder às perguntas abaixo.</p>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Perguntas
</div>
</div>
<div class="callout-body-container callout-body">
<div class="webex-check">
Quantos casos nos dados de notificação vinculados não possuem um resultado positivo ou negativo?
<div id="radio_RWTZVELMTW" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_RWTZVELMTW" value="answer"> <span>202</span></label><label><input type="radio" autocomplete="off" name="radio_RWTZVELMTW" value=""> <span>347</span></label><label><input type="radio" autocomplete="off" name="radio_RWTZVELMTW" value=""> <span>250</span></label>
</div>
Que porcentagem dos casos nos dados de notificação POSSUEM um resultado positivo ou negativo?
<div id="radio_BSFTYWMWOI" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_BSFTYWMWOI" value=""> <span>60.1%</span></label><label><input type="radio" autocomplete="off" name="radio_BSFTYWMWOI" value="answer"> <span>79.5%</span></label><label><input type="radio" autocomplete="off" name="radio_BSFTYWMWOI" value=""> <span>92.2%</span></label>
</div>
Por que existem mais casos suspeitos remanescentes do que notificações sem vinculação?
<div id="radio_VUOLSXTGXY" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_VUOLSXTGXY" value="answer"> <span>Casos suspeitos incluem notificações sem um resulado laboratorial e com um resultado indeterminado</span></label><label><input type="radio" autocomplete="off" name="radio_VUOLSXTGXY" value=""> <span>Existem casos suspeitos adicionais sendo trazidos dos laboratórios</span></label><label><input type="radio" autocomplete="off" name="radio_VUOLSXTGXY" value=""> <span>Existe algum problema com os dados</span></label>
</div>
Quais doenças possuíram a maior porcentagem de casos que permaneceram suspeitos após a vinculação?
<div id="radio_NKIXCAGMCO" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_NKIXCAGMCO" value=""> <span>Cólera</span></label><label><input type="radio" autocomplete="off" name="radio_NKIXCAGMCO" value=""> <span>Malária</span></label><label><input type="radio" autocomplete="off" name="radio_NKIXCAGMCO" value=""> <span>Dengue</span></label><label><input type="radio" autocomplete="off" name="radio_NKIXCAGMCO" value="answer"> <span>Febre amarela</span></label>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-48-contents" aria-controls="callout-48" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Clique para ver a solução (tente sozinho primeiro!)
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-48" class="callout-48-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Mais uma vez, você pode utilizar <code>tabyl()</code> para ver a distribuição das categorias de casos pelas notificações. O número total de casos suspeitos, ou seja, os que não têm qualquer resultado laboratorial ou têm um resultado indeterminado, é de 202. Isto significa que 785 casos, ou seja, 79,5%, tiveram um resultado laboratorial definitivo.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tabyl</span>(dados_vinculados, categoria_caso) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> categoria_caso   n   percent
     Confirmado 438 0.4437690
     Descartado 347 0.3515704
       Suspeito 202 0.2046606</code></pre>
</div>
</div>
<p>Pode também fazer uma tabela cruzada dos resultados originais (indeterminado/negativo/positivo) na coluna <code>resultado</code> com os novos resultados <code>categoria_caso</code>, primeiro para verificar se a sua lógica funcionou, e para ver como os valores originais se relacionam com os valores da nova coluna. Isto mostra que, além das 129 notificações que não foram vinculadas (com <code>NA</code> na coluna <code>resultado</code>), 73 tiveram resultados indeterminados, e assim foram classificadas como casos suspeitos.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tabyl</span>(dados_vinculados, categoria_caso, resultado) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> categoria_caso Indeterminado Negativo Positivo NA_
     Confirmado             0        0      438   0
     Descartado             0      347        0   0
       Suspeito            73        0        0 129</code></pre>
</div>
</div>
<p>Finalmente, você pode também fazer uma tabela cruzada com o nome da doença para ver as categorias de casos por doença. Adicione <code>adorn_xxx()</code> para formatar as porcentagens. A tabela mostra que 22% dos casos de febre amarela permaneceram suspeitos, e que essa porcentagem foi a mais elevada em comparação com as outras doenças.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tabyl</span>(dados_vinculados, doenca_notificada, categoria_caso) <span class="sc">|&gt;</span> </span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_totals</span>(<span class="at">where =</span> <span class="st">"both"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_percentages</span>() <span class="sc">|&gt;</span> </span>
<span id="cb97-4"><a href="#cb97-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_pct_formatting</span>() <span class="sc">|&gt;</span> </span>
<span id="cb97-5"><a href="#cb97-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_ns</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> doenca_notificada  Confirmado  Descartado    Suspeito        Total
            colera 82.6%  (38)  4.3%   (2) 13.0%   (6) 100.0%  (46)
            dengue 68.1% (186) 10.6%  (29) 21.2%  (58) 100.0% (273)
     febre amarela 33.0%  (33) 45.0%  (45) 22.0%  (22) 100.0% (100)
     febre tifoide 20.0%   (7) 68.6%  (24) 11.4%   (4) 100.0%  (35)
           malaria 32.6% (174) 46.3% (247) 21.0% (112) 100.0% (533)
             Total 44.4% (438) 35.2% (347) 20.5% (202) 100.0% (987)</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="tarefa-b-avaliar-a-porcentagem-de-casos-suspeitos-que-são-efetivamente-casos-verdadeiros" class="level4">
<h4 class="anchored" data-anchor-id="tarefa-b-avaliar-a-porcentagem-de-casos-suspeitos-que-são-efetivamente-casos-verdadeiros"><strong>Tarefa B: Avaliar a porcentagem de casos suspeitos que são efetivamente casos verdadeiros</strong></h4>
<p>Utilize <code>tabyl()</code> mais uma vez para esta tarefa, analisando os resultados por doença. Pense no denominador correto!</p>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Perguntas
</div>
</div>
<div class="callout-body-container callout-body">
<div class="webex-check">
Que porcentagem de casos suspeitos repotados em em 2024 eram casos verdadeiros, de acordo com os resultados dos exames?
<div id="radio_DQDVMUZHKB" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_DQDVMUZHKB" value=""> <span>44%</span></label><label><input type="radio" autocomplete="off" name="radio_DQDVMUZHKB" value="answer"> <span>56%</span></label><label><input type="radio" autocomplete="off" name="radio_DQDVMUZHKB" value=""> <span>59%</span></label>
</div>
Que porcentagem dos casos suspeitos de malária eram realmente malária?
<div id="radio_EUTMTLRAZU" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_EUTMTLRAZU" value=""> <span>86%</span></label><label><input type="radio" autocomplete="off" name="radio_EUTMTLRAZU" value="answer"> <span>41%</span></label><label><input type="radio" autocomplete="off" name="radio_EUTMTLRAZU" value=""> <span>23%</span></label>
</div>
Que porcentagem de casos suspeitos de dengue eram realmente dengue?
<div id="radio_IDMPNPJBUH" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_IDMPNPJBUH" value="answer"> <span>87%</span></label><label><input type="radio" autocomplete="off" name="radio_IDMPNPJBUH" value=""> <span>41%</span></label><label><input type="radio" autocomplete="off" name="radio_IDMPNPJBUH" value=""> <span>23%</span></label>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-50-contents" aria-controls="callout-50" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Clique para ler uma dica
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-50" class="callout-50-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Dividir o número de casos confirmados (ou seja, aqueles com um resultado positivo) pelo número de casos confirmados e descartados (ou seja, aqueles com um resultado positivo ou negativo). Obtém-se assim uma taxa de positivos, que se aproxima da porcentagem de casos suspeitos que eram efetivamente casos. Os resultados indeterminados são excluídos porque não fornecem um resultado claro e distorceriam a taxa de positivos.</p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-51-contents" aria-controls="callout-51" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Clique para ver a solução (tente sozinho primeiro!)
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-51" class="callout-51-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Filtre os casos suspeitos e, em seguida, faça uma tabela cruzada para ver a porcentagem de casos originalmente suspeitos que foram confirmados ou descartados, entre aqueles com resultados de exame válidos.</p>
<p>Uma vez que existe uma linha de totais, pode ver-se que 56% dos casos suspeitos em geral foram confirmados, entre os que tinham um resultado válido. Também se pode ver que 41% e 87% dos casos de malária e dengue, respetivamente, foram confirmados.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>dados_vinculados <span class="sc">|&gt;</span> </span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(categoria_caso <span class="sc">!=</span> <span class="st">"Suspeito"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb99-3"><a href="#cb99-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabyl</span>(doenca_notificada, categoria_caso) <span class="sc">|&gt;</span> </span>
<span id="cb99-4"><a href="#cb99-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_totals</span>(<span class="at">where =</span> <span class="st">"both"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb99-5"><a href="#cb99-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_percentages</span>() <span class="sc">|&gt;</span> </span>
<span id="cb99-6"><a href="#cb99-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_pct_formatting</span>() <span class="sc">|&gt;</span> </span>
<span id="cb99-7"><a href="#cb99-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_ns</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> doenca_notificada  Confirmado  Descartado        Total
            colera 95.0%  (38)  5.0%   (2) 100.0%  (40)
            dengue 86.5% (186) 13.5%  (29) 100.0% (215)
     febre amarela 42.3%  (33) 57.7%  (45) 100.0%  (78)
     febre tifoide 22.6%   (7) 77.4%  (24) 100.0%  (31)
           malaria 41.3% (174) 58.7% (247) 100.0% (421)
             Total 55.8% (438) 44.2% (347) 100.0% (785)</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="passo-6.4-criar-uma-lista-com-apenas-casos-confirmados" class="level3">
<h3 class="anchored" data-anchor-id="passo-6.4-criar-uma-lista-com-apenas-casos-confirmados">Passo 6.4 Criar uma lista com apenas casos confirmados</h3>
<p><strong>Tarefa A: Criar uma nova lista de casos chamada <code>dados_vinculados_confirmados</code></strong>.</p>
<p>Esta é a que você utilizará nos relatórios oficiais de vigilância.</p>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Perguntas
</div>
</div>
<div class="callout-body-container callout-body">
<div class="webex-check">
Por que estamos optando por relatar apenas casos confirmados em nossos dados de vigilância?
<div id="radio_QJYQKGGQTN" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_QJYQKGGQTN" value="answer"> <span>Relatar casos confirmados pode ser mais confiável e preciso quando a porcentagem de resultados positivos é baixa e os exames laboratoriais são rotineiros, ajudando assim a evitar a superestimação da carga da doença</span></label><label><input type="radio" autocomplete="off" name="radio_QJYQKGGQTN" value=""> <span>Relatar casos confirmados é mais lento, o que nos dá mais tempo para ter certeza do que estamos relatando</span></label><label><input type="radio" autocomplete="off" name="radio_QJYQKGGQTN" value=""> <span>Porque queremos esconder o número real de casos</span></label>
</div>
Qual função é importante para criar a nova lista de linhas (linelist)?
<div id="radio_HLNWFWVALU" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_HLNWFWVALU" value="answer"> <span>filter()</span></label><label><input type="radio" autocomplete="off" name="radio_HLNWFWVALU" value=""> <span>arrange()</span></label><label><input type="radio" autocomplete="off" name="radio_HLNWFWVALU" value=""> <span>mutate()</span></label>
</div>
Quantas linhas há neste novo data frame?
<div id="radio_IYTDFRYRHH" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_IYTDFRYRHH" value=""> <span>389</span></label><label><input type="radio" autocomplete="off" name="radio_IYTDFRYRHH" value="answer"> <span>438</span></label><label><input type="radio" autocomplete="off" name="radio_IYTDFRYRHH" value=""> <span>858</span></label>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-53-contents" aria-controls="callout-53" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Clique para ver a solução (tente sozinho primeiro!)
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-53" class="callout-53-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>A sua unidade de vigilância quer concentrar-se em notificar os casos confirmados. Isto deve-se ao fato de os exames laboratoriais serem rotina em Feveria, tendo em vista que a notificação de casos suspeitos seria desnecessariamente imprecisa, com uma elevada porcentagem de casos suspeitos sendo descartados.</p>
<p>A decisão de publicar casos suspeitos pode ser diferente em outros contextos. Por exemplo, se a taxa de positivos for elevada (a maioria dos casos são casos confirmados se examinados) e os exames em si não forem comuns, ou se os exames demorarem muito tempo e resultarem numa notificação tardia, isso sugeriria que as tendências de casos suspeitos são suficientemente precisas e também mais oportunas do que esperar pela confirmação laboratorial.</p>
<p>Criar a nova lista de casos com a função <code>filter()</code>:</p>
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a>dados_vinculados_confirmados <span class="ot">&lt;-</span> dados_vinculados <span class="sc">|&gt;</span> </span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(categoria_caso<span class="sc">==</span><span class="st">"Confirmado"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>E verifique o número de linhas consultando as informações no seu ambiente ou com <code>nrow()</code>:</p>
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(dados_vinculados_confirmados)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>[1] 438</p>
</div>
</div>
</div>
</section>
</section>
<section id="passo-7.-análise-descritiva-dos-casos-confirmados" class="level2">
<h2 class="anchored" data-anchor-id="passo-7.-análise-descritiva-dos-casos-confirmados">Passo 7. Análise descritiva dos casos confirmados</h2>
<p>Agora que você tem sua lista de casos confirmados de doenças de notificação compulsória registrados em Feveria em 2024, você está pronto para conduzir a parte final da sua análise de vigilância! Especificamente, isso significa resumir as cinco doenças de notificação compulsória por área geográfica e tempo.</p>
<p><strong>Dica</strong>: Normalmente, a análise de vigilância incluiria também uma análise por pessoa. Você pode expandir este estudo de caso, analisando também por variáveis demográficas.</p>
<section id="passo-7.1-descrever-os-casos-por-distrito" class="level3">
<h3 class="anchored" data-anchor-id="passo-7.1-descrever-os-casos-por-distrito">Passo 7.1 Descrever os casos por distrito</h3>
<section id="tarefa-a-produzir-uma-tabela-de-casos-confirmados-por-distrito-utilizando-as-funções-tabyl-e-adorn_xxx-incluindo-os-totais" class="level4">
<h4 class="anchored" data-anchor-id="tarefa-a-produzir-uma-tabela-de-casos-confirmados-por-distrito-utilizando-as-funções-tabyl-e-adorn_xxx-incluindo-os-totais"><strong>Tarefa A: Produzir uma tabela de casos confirmados por distrito utilizando as funções <code>tabyl()</code> e <code>adorn_xxx()</code>, incluindo os totais</strong></h4>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Perguntas
</div>
</div>
<div class="callout-body-container callout-body">
<div class="webex-check">
Qual doença de notificação compulsória foi mais comumente relatada em 2024, quando restringimos apenas os casos confirmados?
<div id="radio_WYPRBBFDMY" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_WYPRBBFDMY" value="answer"> <span>Dengue</span></label><label><input type="radio" autocomplete="off" name="radio_WYPRBBFDMY" value=""> <span>Malária</span></label><label><input type="radio" autocomplete="off" name="radio_WYPRBBFDMY" value=""> <span>Febre Amarela</span></label>
</div>
Por que a doença mais notificada muda quando olhamos os casos confirmados e suspeitos?
<div id="radio_EYVKQCEKAC" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_EYVKQCEKAC" value=""> <span>A sensibilidade e especificidade do diagnóstico clínico pode variar por doença</span></label><label><input type="radio" autocomplete="off" name="radio_EYVKQCEKAC" value=""> <span>O desempenho dos exames utilizados nos laboratórios pode variar por doença</span></label><label><input type="radio" autocomplete="off" name="radio_EYVKQCEKAC" value=""> <span>Pode existir vieses de notificação</span></label><label><input type="radio" autocomplete="off" name="radio_EYVKQCEKAC" value="answer"> <span>Todas as opções acima!</span></label>
</div>
Qual distrito relatou o maior número de casos confirmados de cólera em 2024?
<div id="radio_IPNPCFVPNE" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_IPNPCFVPNE" value=""> <span>Lago Minara</span></label><label><input type="radio" autocomplete="off" name="radio_IPNPCFVPNE" value="answer"> <span>Feveria Central</span></label><label><input type="radio" autocomplete="off" name="radio_IPNPCFVPNE" value=""> <span>Kasara</span></label>
</div>
Quantos casos confirmados de cólera relatados em 2024 foram entre moradores de Feveria Central?
<div id="radio_FEDPYIPVPM" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_FEDPYIPVPM" value="answer"> <span>35</span></label><label><input type="radio" autocomplete="off" name="radio_FEDPYIPVPM" value=""> <span>42</span></label><label><input type="radio" autocomplete="off" name="radio_FEDPYIPVPM" value=""> <span>4</span></label>
</div>
Qual distrito relatou mais casos confirmados de malária em 2024?
<div id="radio_HFPHERHDPR" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_HFPHERHDPR" value="answer"> <span>Lago Minara</span></label><label><input type="radio" autocomplete="off" name="radio_HFPHERHDPR" value=""> <span>Feveria Central</span></label><label><input type="radio" autocomplete="off" name="radio_HFPHERHDPR" value=""> <span>Kasara</span></label>
</div>
Estes dados confirmam que a dengue é a doença infecciosa mais comum em Feveria?
<div id="radio_SVXUDGEEAL" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_SVXUDGEEAL" value="answer"> <span>Não - uma doença diferente pode estar sendo subnotificada e/ou não ser de notificação compulsória</span></label><label><input type="radio" autocomplete="off" name="radio_SVXUDGEEAL" value=""> <span>Sim - se é a mais notificada então deve ser a mais comum</span></label>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-55-contents" aria-controls="callout-55" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Clique para ver a solução (tente sozinho primeiro!)
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-55" class="callout-55-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Utilizando <code>tabyl()</code> podemos ver que a dengue foi a doença mais frequentemente notificada em Feveria em 2024 quando consideramos apenas os casos confirmados, com 186 casos.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a>dados_vinculados_confirmados <span class="sc">|&gt;</span> </span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabyl</span>(doenca_notificada) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> doenca_notificada   n    percent
            colera  38 0.08675799
            dengue 186 0.42465753
     febre amarela  33 0.07534247
     febre tifoide   7 0.01598174
           malaria 174 0.39726027</code></pre>
</div>
</div>
<p>Note que isto é diferente dos casos suspeitos, em que a malária foi a doença mais notificada (com 533 casos suspeitos)! Isto foi sugerido anteriormente, quando se viu que a taxa de positivos para casos suspeitos de dengue era mais elevada do que para casos suspeitos de malária. Isto pode dever-se a diferentes razões, por exemplo, o método de diagnóstico clínico utilizado para a malária pode ser menos específico (então muitos dos casos suspeitos são, na realidade, outras doenças), ou o exame utilizado para a dengue pode ser mais sensível.</p>
<p>Para fazer uma tabela cruzada com o distrito de residência, adicione as funções <code>adorn_xxx()</code> relevantes.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a>dados_vinculados_confirmados <span class="sc">|&gt;</span> </span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabyl</span>(doenca_notificada, distrito_de_residencia) <span class="sc">|&gt;</span> </span>
<span id="cb105-3"><a href="#cb105-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_totals</span>(<span class="at">where =</span> <span class="st">"both"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb105-4"><a href="#cb105-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_percentages</span>() <span class="sc">|&gt;</span> </span>
<span id="cb105-5"><a href="#cb105-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_pct_formatting</span>() <span class="sc">|&gt;</span> </span>
<span id="cb105-6"><a href="#cb105-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_ns</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> doenca_notificada Feveria Central     Kasara Lago Minara        Total
            colera      92.1% (35)  7.9%  (3)  0.0%   (0) 100.0%  (38)
            dengue       8.6% (16) 17.2% (32) 74.2% (138) 100.0% (186)
     febre amarela       0.0%  (0) 18.2%  (6) 81.8%  (27) 100.0%  (33)
     febre tifoide      71.4%  (5) 28.6%  (2)  0.0%   (0) 100.0%   (7)
           malaria      14.9% (26) 22.4% (39) 62.6% (109) 100.0% (174)
             Total      18.7% (82) 18.7% (82) 62.6% (274) 100.0% (438)</code></pre>
</div>
</div>
<p>Tal como acontece com os casos suspeitos, podemos ver que a maioria dos casos confirmados de dengue, malária e febre amarela se localizaram em Lago Minara - a zona do lago com maior densidade de mosquitos e, por conseguinte, de doenças transmitidas por vetores. A maioria dos casos confirmados de cólera e febre tifoide registou-se em Feveria Central, onde existem problemas de água e saneamento.</p>
<p>Os dados sugerem que as doenças transmitidas por vetores (dengue e malária) constituem uma preocupação especial neste país tropical. No entanto, não sabemos ao certo qual é a doença mais comum e quais são os padrões subjacentes - apenas cinco doenças são de notificação compulsória e, normalmente, os casos notificados representam apenas uma fração dos casos reais na comunidade.</p>
</div>
</div>
</div>
</section>
</section>
<section id="passo-7.2-descrever-os-casos-ao-longo-do-tempo" class="level3">
<h3 class="anchored" data-anchor-id="passo-7.2-descrever-os-casos-ao-longo-do-tempo">Passo 7.2 Descrever os casos ao longo do tempo</h3>
<p>Você irá trabalhar na construção desta curva epidêmica, ao longo das várias tarefas abaixo.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="multidisease_surveillance_pt_files/figure-html/unnamed-chunk-91-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
<section id="tarefa-a-comece-utilizandoggplot-e-geom_histogram-para-construir-uma-curva-epidêmica-geral-para-feveria-mostrando-a-contagem-de-casos-por-semana-de-notificação-com-barras-empilhadas-e-coloridas-por-doença" class="level4">
<h4 class="anchored" data-anchor-id="tarefa-a-comece-utilizandoggplot-e-geom_histogram-para-construir-uma-curva-epidêmica-geral-para-feveria-mostrando-a-contagem-de-casos-por-semana-de-notificação-com-barras-empilhadas-e-coloridas-por-doença"><strong>Tarefa A: Comece utilizando<code>ggplot()</code> e <code>geom_histogram()</code> para construir uma curva epidêmica geral para Feveria, mostrando a contagem de casos por semana de notificação, com barras empilhadas e coloridas por doença</strong></h4>
<p>Certifique-se de especificar o argumento <code>binwidth=7</code> para que cada barra no histograma represente o número de casos dentro de um período de 7 dias.</p>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Perguntas
</div>
</div>
<div class="callout-body-container callout-body">
<div class="webex-check">
Quando foi notificado o primeiro caso de febre tifoide em Feveria em 2024?
<div id="radio_HZWZTTGMEW" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_HZWZTTGMEW" value=""> <span>Janeiro de 2024</span></label><label><input type="radio" autocomplete="off" name="radio_HZWZTTGMEW" value="answer"> <span>Maio de 2024</span></label><label><input type="radio" autocomplete="off" name="radio_HZWZTTGMEW" value=""> <span>Outubro de 2024</span></label>
</div>
De acordo com este gráfico, qual foi o maior número de casos de dengue notificados em uma única semana em 2024?
<div id="radio_BUYEHQRJTF" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_BUYEHQRJTF" value=""> <span>10</span></label><label><input type="radio" autocomplete="off" name="radio_BUYEHQRJTF" value=""> <span>20</span></label><label><input type="radio" autocomplete="off" name="radio_BUYEHQRJTF" value=""> <span>30</span></label><label><input type="radio" autocomplete="off" name="radio_BUYEHQRJTF" value="answer"> <span>É muito difícil responder isto a partir do gráfico empilhado!</span></label>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-57-contents" aria-controls="callout-57" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Clique para ver a solução (tente sozinho primeiro!)
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-57" class="callout-57-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Aqui está um código simples para construir a curva epidêmica. Note que ainda não está controlando as cores, nem especificando em que dia da semana começa cada período de 7 dias.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a>dados_vinculados_confirmados <span class="sc">|&gt;</span> </span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb107-3"><a href="#cb107-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>((<span class="fu">aes</span>(<span class="at">x =</span> data_notificacao, <span class="at">fill =</span> doenca_notificada)), <span class="at">binwidth=</span><span class="dv">7</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="multidisease_surveillance_pt_files/figure-html/unnamed-chunk-93-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Consulte o <a href="https://epirhandbook.com/pt/dates.pt.html">capítulo sobre datas do Manual de R para Epidemiologistas</a> caso queira uma formatação de data mais específica, por exemplo, de modo que cada barra represente uma semana de segunda a domingo, ou o eixo x indique o número da semana (semanas 1 - 52).</p>
<p>Importante - não é simples visualizar as tendências por doença quando os dados estão empilhados dessa forma! Para ver essas tendências temporais, você deve produzir um histograma para cada doença.</p>
</div>
</div>
</div>
</section>
<section id="tarefa-b-utilize-ggplot-para-produzir-uma-curva-epidêmica-mostrando-a-contagem-de-casos-por-semana-de-relatório-facetada-e-não-empilhada-por-doença" class="level4">
<h4 class="anchored" data-anchor-id="tarefa-b-utilize-ggplot-para-produzir-uma-curva-epidêmica-mostrando-a-contagem-de-casos-por-semana-de-relatório-facetada-e-não-empilhada-por-doença"><strong>Tarefa B: Utilize <code>ggplot()</code> para produzir uma curva epidêmica mostrando a contagem de casos por semana de relatório, facetada (e não empilhada) por doença</strong></h4>
<p>Utilize <code>facet_wrap()</code> para criar facilmente vários mini-plots, um por doença. Para entender isto melhor, você pode consultar a seção <a href="https://epirhandbook.com/pt/ggplot_basics.pt.html#ggplot_basics_facet">seção de facetas do capítulo sobre ggplot2 no Manual de R para Epidemiologistas</a></p>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Perguntas
</div>
</div>
<div class="callout-body-container callout-body">
<div class="webex-check">
De acordo com este gráfico facetado, qual foi o maior número de casos de dengue notificados em uma mesma semana em 2024?
<div id="radio_CUCZCZDAOZ" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_CUCZCZDAOZ" value=""> <span>11</span></label><label><input type="radio" autocomplete="off" name="radio_CUCZCZDAOZ" value="answer"> <span>15</span></label><label><input type="radio" autocomplete="off" name="radio_CUCZCZDAOZ" value=""> <span>29</span></label><label><input type="radio" autocomplete="off" name="radio_CUCZCZDAOZ" value=""> <span>Ainda não consigo responder!</span></label>
</div>
Dentre os casos de dengue notificados naquela semana, em que distrito moravam?
<div id="radio_DFQZEZUEOA" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_DFQZEZUEOA" value=""> <span>Todos os três distritos</span></label><label><input type="radio" autocomplete="off" name="radio_DFQZEZUEOA" value=""> <span>Feveria Central</span></label><label><input type="radio" autocomplete="off" name="radio_DFQZEZUEOA" value=""> <span>Kasara</span></label><label><input type="radio" autocomplete="off" name="radio_DFQZEZUEOA" value=""> <span>Lago Minara</span></label><label><input type="radio" autocomplete="off" name="radio_DFQZEZUEOA" value="answer"> <span>Este gráfico não mostra esta informação</span></label>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-59-contents" aria-controls="callout-59" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Clique para ver a solução (tente sozinho primeiro!)
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-59" class="callout-59-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Agora você pode ver uma curva epidêmica por doença! E pode ver que, durante uma semana de julho, foram notificados 15 casos de dengue. No entanto, este gráfico ainda não apresenta qualquer informação geográfica.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a>dados_vinculados_confirmados <span class="sc">|&gt;</span> </span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb108-3"><a href="#cb108-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>((<span class="fu">aes</span>(<span class="at">x =</span> data_notificacao)), <span class="at">binwidth=</span><span class="dv">7</span>) <span class="sc">+</span> </span>
<span id="cb108-4"><a href="#cb108-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(.<span class="sc">~</span>doenca_notificada)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="multidisease_surveillance_pt_files/figure-html/unnamed-chunk-95-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="tarefa-c-agora-adicione-uma-cor-de-preenchimento-ao-seu-gráfico-facetado-para-que-as-barras-sejam-empilhadas-por-distrito" class="level4">
<h4 class="anchored" data-anchor-id="tarefa-c-agora-adicione-uma-cor-de-preenchimento-ao-seu-gráfico-facetado-para-que-as-barras-sejam-empilhadas-por-distrito"><strong>Tarefa C: Agora adicione uma cor de preenchimento ao seu gráfico facetado para que as barras sejam empilhadas por distrito</strong></h4>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Perguntas
</div>
</div>
<div class="callout-body-container callout-body">
<div class="webex-check">
Dentre os 15 casos de dengue notificados na mesma semana de julho de 2024, em que distritos moravam?
<div id="radio_SSMKEXQTUR" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_SSMKEXQTUR" value="answer"> <span>Todos os três distritos</span></label><label><input type="radio" autocomplete="off" name="radio_SSMKEXQTUR" value=""> <span>Feveria Central</span></label><label><input type="radio" autocomplete="off" name="radio_SSMKEXQTUR" value=""> <span>Kasara</span></label><label><input type="radio" autocomplete="off" name="radio_SSMKEXQTUR" value=""> <span>Lago Minara</span></label>
</div>
Em qual distrito foi notificado o primeiro caso de febre tifoide de 2024?
<div id="radio_PQVMUGBWQS" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_PQVMUGBWQS" value=""> <span>Kasara</span></label><label><input type="radio" autocomplete="off" name="radio_PQVMUGBWQS" value="answer"> <span>Feveria Central</span></label><label><input type="radio" autocomplete="off" name="radio_PQVMUGBWQS" value=""> <span>Lago Minara</span></label><label><input type="radio" autocomplete="off" name="radio_PQVMUGBWQS" value=""> <span>Ainda não consigo responder!</span></label>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-61-contents" aria-controls="callout-61" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Clique para ver a solução (tente sozinho primeiro!)
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-61" class="callout-61-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Agora você pode ver uma curva epidêmica por doença, com a coloração refletindo o distrito de residência de onde é o caso</p>
<p>Pode-se ver que entre os 15 casos de dengue notificados na mesma semana, estes residiam em três distritos diferentes. Você também pode ver que o primeiro caso de febre tifoide foi notificado em Feveria Central.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a>dados_vinculados_confirmados <span class="sc">|&gt;</span> </span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb109-3"><a href="#cb109-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>((<span class="fu">aes</span>(<span class="at">x =</span> data_notificacao, <span class="at">fill =</span> distrito_de_residencia)), <span class="at">binwidth=</span><span class="dv">7</span>) <span class="sc">+</span> </span>
<span id="cb109-4"><a href="#cb109-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(.<span class="sc">~</span>doenca_notificada)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="multidisease_surveillance_pt_files/figure-html/unnamed-chunk-97-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="tarefa-d-adicione-mais-formatações-ao-seu-gráfico-facetado-para-deixá-lo-pronto-para-publicação" class="level4">
<h4 class="anchored" data-anchor-id="tarefa-d-adicione-mais-formatações-ao-seu-gráfico-facetado-para-deixá-lo-pronto-para-publicação"><strong>Tarefa D: Adicione mais formatações ao seu gráfico facetado para deixá-lo pronto para publicação</strong></h4>
<p>Você pode especificar:</p>
<ul>
<li>O tema/aparência geral do gráfico (por exemplo, cor de fundo, aparência das linhas de grade)</li>
<li>O título e os rótulos</li>
<li>As cores das barras (com <code>scale_fill_manual()</code>)</li>
<li>A formatação e o espaçamento das datas ao longo do eixo x (com <code>scale_x_date</code>)</li>
<li>Muitas outras coisas!</li>
</ul>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Perguntas
</div>
</div>
<div class="callout-body-container callout-body">
<div class="webex-check">
A cólera e a febre tifoide aparentam ser endêmicas?
<div id="radio_IESLGHIZUF" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_IESLGHIZUF" value="answer"> <span>Não - os dados sugerem pequenos surtos ocasionais</span></label><label><input type="radio" autocomplete="off" name="radio_IESLGHIZUF" value=""> <span>Sim, ambas são endêmicas</span></label>
</div>
Houve alguma época específica do ano em que a malária atingiu o pico em 2024?
<div id="radio_OCYREKHZNB" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_OCYREKHZNB" value=""> <span>Sim - por volta de novembro/dezembro</span></label><label><input type="radio" autocomplete="off" name="radio_OCYREKHZNB" value="answer"> <span>Sim - por volta de julho/agosto (verão)</span></label><label><input type="radio" autocomplete="off" name="radio_OCYREKHZNB" value=""> <span>Não, é consistentemente alta</span></label>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-63-contents" aria-controls="callout-63" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Clique para ver a solução (tente sozinho primeiro!)
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-63" class="callout-63-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Aqui está o código totalmente formatado. Observe que algumas outras alterações incluem especificar que queremos apenas duas colunas de mini gráficos dentro do <code>facet_wrap()</code> e que a etiqueta de data ao longo do eixo x deve apenas mostrar o dia e o mês (não o ano, uma vez que todos os casos são em 2024).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a>dados_vinculados_confirmados <span class="sc">|&gt;</span> </span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb110-3"><a href="#cb110-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>((<span class="fu">aes</span>(<span class="at">x =</span> data_notificacao, <span class="at">fill =</span> distrito_de_residencia)), <span class="at">binwidth=</span><span class="dv">7</span>) <span class="sc">+</span></span>
<span id="cb110-4"><a href="#cb110-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(.<span class="sc">~</span>doenca_notificada, <span class="at">ncol=</span><span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb110-5"><a href="#cb110-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span> </span>
<span id="cb110-6"><a href="#cb110-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">fill =</span> <span class="st">"Distrito de residência"</span>,</span>
<span id="cb110-7"><a href="#cb110-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Data comunicada pela clínica"</span>,</span>
<span id="cb110-8"><a href="#cb110-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Contagem"</span>,</span>
<span id="cb110-9"><a href="#cb110-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"Número de casos confirmados de cólera, dengue, malária, febre tifoide e febre amarela por semana em Feveria, 2024"</span>) <span class="sc">+</span></span>
<span id="cb110-10"><a href="#cb110-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"navy"</span>, <span class="st">"lightblue"</span>, <span class="st">"seagreen"</span>)) <span class="sc">+</span></span>
<span id="cb110-11"><a href="#cb110-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_date</span>(<span class="at">date_breaks =</span> <span class="st">"1 month"</span>, </span>
<span id="cb110-12"><a href="#cb110-12" aria-hidden="true" tabindex="-1"></a>               <span class="at">date_labels =</span> <span class="st">"%d %b"</span>) <span class="sc">+</span></span>
<span id="cb110-13"><a href="#cb110-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">"bottom"</span>,</span>
<span id="cb110-14"><a href="#cb110-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle=</span><span class="dv">90</span>)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="multidisease_surveillance_pt_files/figure-html/unnamed-chunk-99-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Também podemos ver na curva epidêmica que a cólera e a febre tifoide parecem estar ocorrendo como surtos isolados, em vez de mostrarem endemicidade. No entanto, a malária e a dengue estiveram presentes em Feveria durante todo o ano, com a malária atingindo um pico mais evidente nos meses de verão.</p>
</div>
</div>
</div>
</section>
<section id="tarefa-e-produzir-uma-tabela-resumindo-as-datas" class="level4">
<h4 class="anchored" data-anchor-id="tarefa-e-produzir-uma-tabela-resumindo-as-datas"><strong>Tarefa E: Produzir uma tabela resumindo as datas</strong></h4>
<p>Desta vez, utilize <code>group_by()</code> e <code>summarize()</code> para produzir uma tabela por distrito com as datas mais antigas e mais recentes dos relatórios.</p>
<p>Você pode modificar a sua tabela com um <code>filter()</code> para criar esta tabela para um distrito de cada vez.</p>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Perguntas
</div>
</div>
<div class="callout-body-container callout-body">
<div class="webex-check">
Quando foi notificado o primeiro caso de dengue de 2024 em <strong>Feveria</strong>?
<div id="radio_CQWYBUVPPK" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_CQWYBUVPPK" value=""> <span>18 de janeiro de 2024</span></label><label><input type="radio" autocomplete="off" name="radio_CQWYBUVPPK" value="answer"> <span>17 de janeiro de 2024</span></label><label><input type="radio" autocomplete="off" name="radio_CQWYBUVPPK" value=""> <span>12 de fevereiro de 2024</span></label>
</div>
Quando foi notificado o último caso de dengue em <strong>Feveria Central</strong> de 2024?
<div id="radio_IQQROPJJGD" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_IQQROPJJGD" value="answer"> <span>22 de agosto de 2024</span></label><label><input type="radio" autocomplete="off" name="radio_IQQROPJJGD" value=""> <span>18 de novembro de 2024</span></label><label><input type="radio" autocomplete="off" name="radio_IQQROPJJGD" value=""> <span>25 de dezembro de 2024</span></label>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-65-contents" aria-controls="callout-65" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Clique para ver a solução (tente sozinho primeiro!)
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-65" class="callout-65-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Agrupe os dados por doença e, em seguida, resuma a primeira e a última data para ver a cronologia geral de cada doença em Feveria.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a>dados_vinculados_confirmados <span class="sc">|&gt;</span> </span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(doenca_notificada) <span class="sc">|&gt;</span> </span>
<span id="cb111-3"><a href="#cb111-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">primeira_notificacao =</span> <span class="fu">min</span>(data_notificacao), </span>
<span id="cb111-4"><a href="#cb111-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">ultima_notificacao =</span> <span class="fu">max</span>(data_notificacao)) <span class="sc">|&gt;</span></span>
<span id="cb111-5"><a href="#cb111-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 3
  doenca_notificada primeira_notificacao ultima_notificacao
  &lt;chr&gt;             &lt;date&gt;               &lt;date&gt;            
1 colera            2024-06-03           2024-09-23        
2 dengue            2024-01-17           2024-11-18        
3 febre amarela     2024-03-08           2024-08-23        
4 febre tifoide     2024-05-02           2024-11-07        
5 malaria           2024-01-08           2024-12-25        </code></pre>
</div>
</div>
<p>Adicione um <code>filter()</code> ao código para ver as datas da primeira e da última notificações no distrito em que está interessado.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a>dados_vinculados_confirmados <span class="sc">|&gt;</span> </span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(distrito_de_residencia <span class="sc">==</span> <span class="st">"Feveria Central"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb113-3"><a href="#cb113-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(doenca_notificada) <span class="sc">|&gt;</span> </span>
<span id="cb113-4"><a href="#cb113-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">primeira_notificacao =</span> <span class="fu">min</span>(data_notificacao), </span>
<span id="cb113-5"><a href="#cb113-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">ultima_notificacao =</span> <span class="fu">max</span>(data_notificacao)) <span class="sc">|&gt;</span></span>
<span id="cb113-6"><a href="#cb113-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 3
  doenca_notificada primeira_notificacao ultima_notificacao
  &lt;chr&gt;             &lt;date&gt;               &lt;date&gt;            
1 colera            2024-06-03           2024-09-23        
2 dengue            2024-01-29           2024-08-22        
3 febre tifoide     2024-05-02           2024-11-07        
4 malaria           2024-01-29           2024-12-17        </code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="conclusão" class="level2">
<h2 class="anchored" data-anchor-id="conclusão">Conclusão</h2>
<p>Uau! De acordo com os objetivos deste estudo de caso, você conseguiu fazer o seguinte:</p>
<ol type="1">
<li><p>Utilizar funções-chave do R para limpar, remodelar e vincular data frames, além de criar novas colunas utilizando condições lógicas.</p></li>
<li><p>Para orientar o processamento dos dados, você realizou inspeções e verificações de dados ao longo do caminho</p></li>
<li><p>Você conduziu uma análise descritiva detalhada para compreender os dados dos exames e notificações, antes e depois da vinculação. Em resposta às quatro perguntas iniciais do seu supervisor, você pode dizer:</p>
<ul>
<li><strong>Quantos casos suspeitos das diferentes doenças de notificação compulsória foram notificados em 2024, e qual foi o mais comum?</strong> A malária foi a doença de notificação compulsória mais comum em Feveria em 2024, notificada através do sistema de vigilância de doenças de notificação compulsória: Foram notificados 533 casos suspeitos de malária, 273 casos suspeitos de dengue, 100 de febre amarela, 46 de cólera e 35 de febre tifoide.</li>
<li><strong>Qual a porcentagem de casos acabaram sendo confirmados?</strong> Quase 80% dos casos notificáveis notificados em 2024 tinham um resultado de exame laboratorial no momento em que o conjunto de dados vinculados foi criado, com alguma variação por doença. No total, 56% dos casos notificados acabaram por ser confirmados, mas esta percentagem variou entre 23% para a febre tifoide (7 casos confirmados de 31 casos suspeitos com resultados de exames) e 95% para a cólera (38 casos confirmados de 40 casos suspeitos com resultados de exames). Além disso, a taxa de positivos foi mais elevada para a suspeita de dengue do que para a suspeita de malária (87% contra 41%).</li>
<li><strong>Quantos casos confirmados das diferentes doenças de notificação compulsória foram notificados em 2024 e qual foi o mais comum?</strong> Os casos confirmados seguiram uma tendência ligeiramente diferente da dos casos suspeitos: a infecção mais notificada foi a dengue, com 186 casos, seguida da malária (174), da cólera (38), da febre amarela (33) e da febre tifoide (7).</li>
<li><strong>Como é que os casos confirmados se distribuem geográfica e temporalmente em Feveria?</strong> Feveria registrou transmissão de dengue e malária ao longo do ano, com picos no verão, e concentrados no distrito de Lago Minara. Feveria também registrou surtos pequenos e pouco frequentes de doenças diarreicas, por exemplo, cólera e febre tifoide, particularmente na área urbana de Feveria Central, onde pode haver problemas com água e saneamento.</li>
</ul></li>
<li><p>Por último, você refletiu sobre a forma como os processos envolvidos nos sistemas de vigilância de doenças de notificação compulsória e nos exames laboratoriais, por exemplo, a transferência de dados entre clínicas e laboratórios, podem afetar a qualidade e a integridade dos dados e, como consequência, os seus resultados.</p></li>
</ol>
<p>Há muito mais potencial pela frente. Você pode explorar padrões de doença por idade ou sexo, calcular taxas de doença com dados populacionais e até analisar atrasos na notificação, examinando as diferentes datas nos seus conjuntos de dados.</p>
<p>Você construiu uma base sólida e está bem equipado para levar a sua análise para o nível seguinte. Continue firme - descobertas emocionantes o aguardam!</p>
<p>Para saber mais, consulte os outros estudos de caso ou mergulhe no <a href="https://epirhandbook.com/pt/index.pt.html">Manual de R para Epidemiologistas</a>.</p>
</section>
<section id="código-para-limpeza-e-análise-dos-dados" class="level2">
<h2 class="anchored" data-anchor-id="código-para-limpeza-e-análise-dos-dados">Código para limpeza e análise dos dados</h2>
<p>Veja abaixo um script de todas as etapas de limpeza de dados e análises descritivas. Repare como as análises são combinadas no final ao invés de intercaladas entre os passos de limpeza. Esta é uma forma mais organizada de estruturar o seu script.</p>
<p>Para simplificar, o código abaixo não inclui todas as inspeções e verificações realizadas ao longo do processo, mas você pode optar por criar uma seção específica para esses verificações.</p>
<p>O início do seu script também deve trazer informações que ajudem o leitor a entender para que ele serve, além de comentários ao longo do código. Você mesmo vai agradecer por ter incluído esses comentários no futuro!</p>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-66-contents" aria-controls="callout-66" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Código para limpar e analisar dados de notificação e dados laboratoriais de Feveria, 2024
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-66" class="callout-66-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb115"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Código para limpar e analisar dados de notificação e dados laboratoriais de Feveria, 2024</span></span>
<span id="cb115-2"><a href="#cb115-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Data:</span></span>
<span id="cb115-3"><a href="#cb115-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Autor:</span></span>
<span id="cb115-4"><a href="#cb115-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-5"><a href="#cb115-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Instalar os pacotes ----------------------------------------------</span></span>
<span id="cb115-6"><a href="#cb115-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Verificar se o pacote "pacman" está instalado</span></span>
<span id="cb115-7"><a href="#cb115-7" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">"pacman"</span>)) {</span>
<span id="cb115-8"><a href="#cb115-8" aria-hidden="true" tabindex="-1"></a>     <span class="fu">install.packages</span>(<span class="st">"pacman"</span>) }</span>
<span id="cb115-9"><a href="#cb115-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-10"><a href="#cb115-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Instala (se necessário) a partir do CRAN e carrega os pacotes a serem usados</span></span>
<span id="cb115-11"><a href="#cb115-11" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(</span>
<span id="cb115-12"><a href="#cb115-12" aria-hidden="true" tabindex="-1"></a>  rio,        <span class="co"># importação de dados</span></span>
<span id="cb115-13"><a href="#cb115-13" aria-hidden="true" tabindex="-1"></a>  skimr,      <span class="co"># visão geral dos dados</span></span>
<span id="cb115-14"><a href="#cb115-14" aria-hidden="true" tabindex="-1"></a>  janitor,    <span class="co"># limpeza de dados e tabelas</span></span>
<span id="cb115-15"><a href="#cb115-15" aria-hidden="true" tabindex="-1"></a>  lubridate,  <span class="co"># manipulação de datas</span></span>
<span id="cb115-16"><a href="#cb115-16" aria-hidden="true" tabindex="-1"></a>  epikit,     <span class="co"># criação de categorias de idade</span></span>
<span id="cb115-17"><a href="#cb115-17" aria-hidden="true" tabindex="-1"></a>  gtsummary,  <span class="co"># estatísticas descritivas, testes e regressão</span></span>
<span id="cb115-18"><a href="#cb115-18" aria-hidden="true" tabindex="-1"></a>  apyramid,   <span class="co"># gráficos de pirâmides etárias</span></span>
<span id="cb115-19"><a href="#cb115-19" aria-hidden="true" tabindex="-1"></a>  flextable,  <span class="co"># tabelas prontas para apresentação</span></span>
<span id="cb115-20"><a href="#cb115-20" aria-hidden="true" tabindex="-1"></a>  naniar,     <span class="co"># análise de dados faltantes</span></span>
<span id="cb115-21"><a href="#cb115-21" aria-hidden="true" tabindex="-1"></a>  remotes,    <span class="co"># instalação de pacotes para baixar dados</span></span>
<span id="cb115-22"><a href="#cb115-22" aria-hidden="true" tabindex="-1"></a>  tidyverse   <span class="co"># manipulação e visualização de dados</span></span>
<span id="cb115-23"><a href="#cb115-23" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb115-24"><a href="#cb115-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-25"><a href="#cb115-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Importar os dados ------------------------------------------------</span></span>
<span id="cb115-26"><a href="#cb115-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-27"><a href="#cb115-27" aria-hidden="true" tabindex="-1"></a><span class="co"># dados de notificação</span></span>
<span id="cb115-28"><a href="#cb115-28" aria-hidden="true" tabindex="-1"></a>dados_notif_bruto <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="st">"data/notificacoes_multidoencas.xlsx"</span>)</span>
<span id="cb115-29"><a href="#cb115-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-30"><a href="#cb115-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Dados laboratoriais</span></span>
<span id="cb115-31"><a href="#cb115-31" aria-hidden="true" tabindex="-1"></a>dados_lab_bruto <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="st">"data/testes_multidoencas.csv"</span>)</span>
<span id="cb115-32"><a href="#cb115-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-33"><a href="#cb115-33" aria-hidden="true" tabindex="-1"></a><span class="co"># Limpar os dados de notificação -----------------------------------</span></span>
<span id="cb115-34"><a href="#cb115-34" aria-hidden="true" tabindex="-1"></a>dados_notif <span class="ot">&lt;-</span> dados_notif_bruto <span class="sc">|&gt;</span> </span>
<span id="cb115-35"><a href="#cb115-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_names</span>() <span class="sc">|&gt;</span> </span>
<span id="cb115-36"><a href="#cb115-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">data_notificacao =</span> data_comunicada_pela_unidade_de_saude_comunidade) <span class="sc">|&gt;</span> </span>
<span id="cb115-37"><a href="#cb115-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id_notificacao, distrito_de_residencia, doenca_notificada, data_notificacao) <span class="sc">|&gt;</span> </span>
<span id="cb115-38"><a href="#cb115-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">distrito_de_residencia =</span> <span class="fu">case_match</span>(<span class="fu">str_to_title</span>(distrito_de_residencia),</span>
<span id="cb115-39"><a href="#cb115-39" aria-hidden="true" tabindex="-1"></a>                                           <span class="fu">c</span>(<span class="st">"F Central"</span>, <span class="st">"Feveria C"</span>, <span class="st">"Feveria Central"</span>) <span class="sc">~</span> <span class="st">"Feveria Central"</span>,</span>
<span id="cb115-40"><a href="#cb115-40" aria-hidden="true" tabindex="-1"></a>                                           <span class="fu">c</span>(<span class="st">"Kasara"</span>, <span class="st">"Ksr"</span>) <span class="sc">~</span> <span class="st">"Kasara"</span>,</span>
<span id="cb115-41"><a href="#cb115-41" aria-hidden="true" tabindex="-1"></a>                                           <span class="fu">c</span>(<span class="st">"L Minara"</span>, <span class="st">"Lago Minara"</span>, <span class="st">"Lakeside"</span>) <span class="sc">~</span> <span class="st">"Lago Minara"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb115-42"><a href="#cb115-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">data_notificacao =</span> <span class="fu">ymd</span>(data_notificacao)) </span>
<span id="cb115-43"><a href="#cb115-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-44"><a href="#cb115-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-45"><a href="#cb115-45" aria-hidden="true" tabindex="-1"></a><span class="co"># Limpar e consolidar os dados laboratoriais -----------------------</span></span>
<span id="cb115-46"><a href="#cb115-46" aria-hidden="true" tabindex="-1"></a><span class="co"># Padronizar valores</span></span>
<span id="cb115-47"><a href="#cb115-47" aria-hidden="true" tabindex="-1"></a>dados_lab <span class="ot">&lt;-</span> dados_lab_bruto <span class="sc">|&gt;</span> </span>
<span id="cb115-48"><a href="#cb115-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">resultado =</span> <span class="fu">case_match</span>(resultado, </span>
<span id="cb115-49"><a href="#cb115-49" aria-hidden="true" tabindex="-1"></a>                            <span class="fu">c</span>(<span class="st">"P"</span>, <span class="st">"PO1"</span>, <span class="st">"PO139"</span>) <span class="sc">~</span> <span class="st">"Positivo"</span>,</span>
<span id="cb115-50"><a href="#cb115-50" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"N"</span> <span class="sc">~</span> <span class="st">"Negativo"</span>,</span>
<span id="cb115-51"><a href="#cb115-51" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"I"</span> <span class="sc">~</span> <span class="st">"Indeterminado"</span>))</span>
<span id="cb115-52"><a href="#cb115-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-53"><a href="#cb115-53" aria-hidden="true" tabindex="-1"></a><span class="co"># Criar base em nível de exame laboratorial</span></span>
<span id="cb115-54"><a href="#cb115-54" aria-hidden="true" tabindex="-1"></a>dados_lab_testes <span class="ot">&lt;-</span> dados_lab <span class="sc">|&gt;</span> </span>
<span id="cb115-55"><a href="#cb115-55" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(alvo <span class="sc">!=</span> <span class="st">"Dengue IgG"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb115-56"><a href="#cb115-56" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(id_amostra) <span class="sc">|&gt;</span> </span>
<span id="cb115-57"><a href="#cb115-57" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(resultado)) <span class="sc">|&gt;</span> </span>
<span id="cb115-58"><a href="#cb115-58" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span>) <span class="sc">|&gt;</span> </span>
<span id="cb115-59"><a href="#cb115-59" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb115-60"><a href="#cb115-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-61"><a href="#cb115-61" aria-hidden="true" tabindex="-1"></a><span class="co"># Criar base em nível de caso</span></span>
<span id="cb115-62"><a href="#cb115-62" aria-hidden="true" tabindex="-1"></a>dados_lab_casos <span class="ot">&lt;-</span> dados_lab_testes <span class="sc">|&gt;</span> </span>
<span id="cb115-63"><a href="#cb115-63" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(id_notificacao) <span class="sc">|&gt;</span> </span>
<span id="cb115-64"><a href="#cb115-64" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(resultado)) <span class="sc">|&gt;</span> </span>
<span id="cb115-65"><a href="#cb115-65" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span>) <span class="sc">|&gt;</span> </span>
<span id="cb115-66"><a href="#cb115-66" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb115-67"><a href="#cb115-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-68"><a href="#cb115-68" aria-hidden="true" tabindex="-1"></a><span class="co"># Vincular dados de notificação e dados laboratoriais --------------</span></span>
<span id="cb115-69"><a href="#cb115-69" aria-hidden="true" tabindex="-1"></a>dados_vinculados <span class="ot">&lt;-</span> <span class="fu">left_join</span>(dados_notif, dados_lab_casos, <span class="at">by =</span> <span class="st">"id_notificacao"</span>)</span>
<span id="cb115-70"><a href="#cb115-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-71"><a href="#cb115-71" aria-hidden="true" tabindex="-1"></a><span class="co"># Limpar os dados --------------------------------------------------</span></span>
<span id="cb115-72"><a href="#cb115-72" aria-hidden="true" tabindex="-1"></a>dados_vinculados <span class="ot">&lt;-</span> dados_vinculados <span class="sc">|&gt;</span> </span>
<span id="cb115-73"><a href="#cb115-73" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">categoria_caso =</span> <span class="fu">case_when</span>(resultado<span class="sc">==</span><span class="st">"Positivo"</span> <span class="sc">~</span> <span class="st">"Confirmado"</span>,</span>
<span id="cb115-74"><a href="#cb115-74" aria-hidden="true" tabindex="-1"></a>                                   resultado<span class="sc">==</span><span class="st">"Negativo"</span> <span class="sc">~</span> <span class="st">"Descartado"</span>,</span>
<span id="cb115-75"><a href="#cb115-75" aria-hidden="true" tabindex="-1"></a>                                   resultado<span class="sc">==</span><span class="st">"Indeterminado"</span> <span class="sc">|</span> <span class="fu">is.na</span>(resultado) <span class="sc">~</span> <span class="st">"Suspeito"</span>))</span>
<span id="cb115-76"><a href="#cb115-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-77"><a href="#cb115-77" aria-hidden="true" tabindex="-1"></a>dados_vinculados_confirmados <span class="ot">&lt;-</span> dados_vinculados <span class="sc">|&gt;</span> </span>
<span id="cb115-78"><a href="#cb115-78" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(categoria_caso<span class="sc">==</span><span class="st">"Confirmado"</span>)</span>
<span id="cb115-79"><a href="#cb115-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-80"><a href="#cb115-80" aria-hidden="true" tabindex="-1"></a><span class="co"># ANÁLISE ----------------------------------------------------------</span></span>
<span id="cb115-81"><a href="#cb115-81" aria-hidden="true" tabindex="-1"></a><span class="co"># Número de casos suspeitos em Feveria</span></span>
<span id="cb115-82"><a href="#cb115-82" aria-hidden="true" tabindex="-1"></a><span class="fu">tabyl</span>(dados_notif, doenca_notificada)</span>
<span id="cb115-83"><a href="#cb115-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-84"><a href="#cb115-84" aria-hidden="true" tabindex="-1"></a><span class="co"># Distribuição de casos suspeitos por distrito</span></span>
<span id="cb115-85"><a href="#cb115-85" aria-hidden="true" tabindex="-1"></a><span class="fu">tabyl</span>(dados_notif, doenca_notificada, distrito_de_residencia) <span class="sc">|&gt;</span></span>
<span id="cb115-86"><a href="#cb115-86" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_percentages</span>() <span class="sc">|&gt;</span></span>
<span id="cb115-87"><a href="#cb115-87" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_pct_formatting</span>() <span class="sc">|&gt;</span></span>
<span id="cb115-88"><a href="#cb115-88" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_ns</span>()</span>
<span id="cb115-89"><a href="#cb115-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-90"><a href="#cb115-90" aria-hidden="true" tabindex="-1"></a><span class="co"># Distribuição de resultados por exames específicos</span></span>
<span id="cb115-91"><a href="#cb115-91" aria-hidden="true" tabindex="-1"></a><span class="fu">tabyl</span>(dados_lab_testes, exame, resultado) <span class="sc">|&gt;</span> </span>
<span id="cb115-92"><a href="#cb115-92" aria-hidden="true" tabindex="-1"></a>    <span class="fu">adorn_totals</span>(<span class="at">where =</span> <span class="st">"col"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb115-93"><a href="#cb115-93" aria-hidden="true" tabindex="-1"></a>    <span class="fu">adorn_percentages</span>() <span class="sc">|&gt;</span> </span>
<span id="cb115-94"><a href="#cb115-94" aria-hidden="true" tabindex="-1"></a>    <span class="fu">adorn_pct_formatting</span>() <span class="sc">|&gt;</span> </span>
<span id="cb115-95"><a href="#cb115-95" aria-hidden="true" tabindex="-1"></a>    <span class="fu">adorn_ns</span>()</span>
<span id="cb115-96"><a href="#cb115-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-97"><a href="#cb115-97" aria-hidden="true" tabindex="-1"></a><span class="co"># Distribuição da categoria de caso, nos dados vinculados: todos os casos</span></span>
<span id="cb115-98"><a href="#cb115-98" aria-hidden="true" tabindex="-1"></a><span class="fu">tabyl</span>(dados_vinculados, categoria_caso) </span>
<span id="cb115-99"><a href="#cb115-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-100"><a href="#cb115-100" aria-hidden="true" tabindex="-1"></a><span class="co"># Distribuição da categoria de caso por doença, nos dados vinculados: todos os casos</span></span>
<span id="cb115-101"><a href="#cb115-101" aria-hidden="true" tabindex="-1"></a><span class="fu">tabyl</span>(dados_vinculados, doenca_notificada, categoria_caso) <span class="sc">|&gt;</span> </span>
<span id="cb115-102"><a href="#cb115-102" aria-hidden="true" tabindex="-1"></a>    <span class="fu">adorn_totals</span>(<span class="at">where =</span> <span class="st">"both"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb115-103"><a href="#cb115-103" aria-hidden="true" tabindex="-1"></a>    <span class="fu">adorn_percentages</span>() <span class="sc">|&gt;</span> </span>
<span id="cb115-104"><a href="#cb115-104" aria-hidden="true" tabindex="-1"></a>    <span class="fu">adorn_pct_formatting</span>() <span class="sc">|&gt;</span> </span>
<span id="cb115-105"><a href="#cb115-105" aria-hidden="true" tabindex="-1"></a>    <span class="fu">adorn_ns</span>()</span>
<span id="cb115-106"><a href="#cb115-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-107"><a href="#cb115-107" aria-hidden="true" tabindex="-1"></a><span class="co"># Distribuição da categoria de caso por doença, nos dados vinculados: apenas casos com um resultado válido</span></span>
<span id="cb115-108"><a href="#cb115-108" aria-hidden="true" tabindex="-1"></a>dados_vinculados <span class="sc">|&gt;</span> </span>
<span id="cb115-109"><a href="#cb115-109" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(categoria_caso <span class="sc">!=</span> <span class="st">"Suspeito"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb115-110"><a href="#cb115-110" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tabyl</span>(doenca_notificada, categoria_caso) <span class="sc">|&gt;</span> </span>
<span id="cb115-111"><a href="#cb115-111" aria-hidden="true" tabindex="-1"></a>    <span class="fu">adorn_totals</span>(<span class="at">where =</span> <span class="st">"both"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb115-112"><a href="#cb115-112" aria-hidden="true" tabindex="-1"></a>    <span class="fu">adorn_percentages</span>() <span class="sc">|&gt;</span> </span>
<span id="cb115-113"><a href="#cb115-113" aria-hidden="true" tabindex="-1"></a>    <span class="fu">adorn_pct_formatting</span>() <span class="sc">|&gt;</span> </span>
<span id="cb115-114"><a href="#cb115-114" aria-hidden="true" tabindex="-1"></a>    <span class="fu">adorn_ns</span>()</span>
<span id="cb115-115"><a href="#cb115-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-116"><a href="#cb115-116" aria-hidden="true" tabindex="-1"></a><span class="co"># Distribuição de casos confirmados por distrito</span></span>
<span id="cb115-117"><a href="#cb115-117" aria-hidden="true" tabindex="-1"></a>dados_vinculados_confirmados <span class="sc">|&gt;</span> </span>
<span id="cb115-118"><a href="#cb115-118" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabyl</span>(doenca_notificada, distrito_de_residencia) <span class="sc">|&gt;</span> </span>
<span id="cb115-119"><a href="#cb115-119" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_totals</span>(<span class="at">where =</span> <span class="st">"both"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb115-120"><a href="#cb115-120" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_percentages</span>() <span class="sc">|&gt;</span> </span>
<span id="cb115-121"><a href="#cb115-121" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_pct_formatting</span>() <span class="sc">|&gt;</span> </span>
<span id="cb115-122"><a href="#cb115-122" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_ns</span>() </span>
<span id="cb115-123"><a href="#cb115-123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-124"><a href="#cb115-124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-125"><a href="#cb115-125" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualizar casos confirmados ao longo do tempo</span></span>
<span id="cb115-126"><a href="#cb115-126" aria-hidden="true" tabindex="-1"></a>dados_vinculados_confirmados <span class="sc">|&gt;</span> </span>
<span id="cb115-127"><a href="#cb115-127" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb115-128"><a href="#cb115-128" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>((<span class="fu">aes</span>(<span class="at">x =</span> data_notificacao, <span class="at">fill =</span> distrito_de_residencia)), <span class="at">binwidth=</span><span class="dv">7</span>) <span class="sc">+</span></span>
<span id="cb115-129"><a href="#cb115-129" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(.<span class="sc">~</span>doenca_notificada, <span class="at">ncol=</span><span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb115-130"><a href="#cb115-130" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span> </span>
<span id="cb115-131"><a href="#cb115-131" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">fill =</span> <span class="st">"Distrito de residência"</span>,</span>
<span id="cb115-132"><a href="#cb115-132" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Data comunicada pela clínica"</span>,</span>
<span id="cb115-133"><a href="#cb115-133" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Contagem"</span>,</span>
<span id="cb115-134"><a href="#cb115-134" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"Número de casos confirmados de cólera, dengue, malária, febre tifoide e febre amarela por semana em Feveria, 2024"</span>) <span class="sc">+</span></span>
<span id="cb115-135"><a href="#cb115-135" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"navy"</span>, <span class="st">"lightblue"</span>, <span class="st">"seagreen"</span>)) <span class="sc">+</span></span>
<span id="cb115-136"><a href="#cb115-136" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_date</span>(<span class="at">date_breaks =</span> <span class="st">"1 month"</span>, </span>
<span id="cb115-137"><a href="#cb115-137" aria-hidden="true" tabindex="-1"></a>               <span class="at">date_labels =</span> <span class="st">"%d %b"</span>) <span class="sc">+</span></span>
<span id="cb115-138"><a href="#cb115-138" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">"bottom"</span>,</span>
<span id="cb115-139"><a href="#cb115-139" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle=</span><span class="dv">90</span>)) </span>
<span id="cb115-140"><a href="#cb115-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-141"><a href="#cb115-141" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-142"><a href="#cb115-142" aria-hidden="true" tabindex="-1"></a><span class="co"># Primeira e última notificações por doença</span></span>
<span id="cb115-143"><a href="#cb115-143" aria-hidden="true" tabindex="-1"></a>dados_vinculados_confirmados <span class="sc">|&gt;</span> </span>
<span id="cb115-144"><a href="#cb115-144" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(doenca_notificada) <span class="sc">|&gt;</span> </span>
<span id="cb115-145"><a href="#cb115-145" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">primeira_notificacao =</span> <span class="fu">min</span>(data_notificacao), </span>
<span id="cb115-146"><a href="#cb115-146" aria-hidden="true" tabindex="-1"></a>            <span class="at">ultima_notificacao =</span> <span class="fu">max</span>(data_notificacao)) <span class="sc">|&gt;</span></span>
<span id="cb115-147"><a href="#cb115-147" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="informações-sobre-o-estudo-de-caso" class="level2">
<h2 class="anchored" data-anchor-id="informações-sobre-o-estudo-de-caso">Informações sobre o estudo de caso</h2>
<div class="callout callout-style-simple callout-note no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><strong>Autores originais</strong>: Paula Blomquist e Alanah Jansen, com apoio técnico fornecido pelo CDC Global Surveillance, Laboratory, and Data Systems Branch em colaboração com a TEPHINET.</p>
<p><strong>Fonte de dados</strong>: Dados fictícios fornecidos pela Applied Epi.</p>
</div>
</div>
</div>
<table class="caption-top table">
<colgroup>
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 63%">
</colgroup>
<thead>
<tr class="header">
<th>Data</th>
<th style="text-align: left;">Alterações efetuadas</th>
<th style="text-align: right;">Versão</th>
<th>Autor</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Julho de 2025</td>
<td style="text-align: left;">Primeiro rascunho</td>
<td style="text-align: right;">1</td>
<td>Paula Blomquist e Alanah Jansen, Applied Epi, com o apoio técnico do CDC Global Surveillance, Laboratory, and Data Systems Branch em colaboração com a TEPHINET</td>
</tr>
<tr class="even">
<td>Agosto de 2025</td>
<td style="text-align: left;">Tradução para o português</td>
<td style="text-align: right;">1</td>
<td>Lucca Nielsen e Pedro Menezes</td>
</tr>
</tbody>
</table>
</section>
<section id="termos-de-uso" class="level2">
<h2 class="anchored" data-anchor-id="termos-de-uso">Termos de uso</h2>
<p><strong>Aviso legal</strong>: A informação apresentada neste exercício e os arquivos de dados associados foram desenvolvidos para ajudar os alunos a atingir os objetivos de aprendizagem pretendidos. Os conteúdos são da responsabilidade do(s) autor(es) e não representam necessariamente as opiniões oficiais do CDC, do Departamento de Saúde e Serviços Humanos dos EUA ou da TEPHINET.</p>
<p><strong>Licença</strong>: Este estudo de caso está sob uma <a href="https://github.com/appliedepi/case_studies/tree/master/licenses/multi_disease_lab_LICENSE.md">licença CC BY-NC-SA 4.0</a>. Para mais informações sobre o compartilhamento e adaptação deste estudo de caso, consulte a <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">escritura associada</a>.</p>
<p><strong>Financiamento</strong> Este estudo de caso foi 100% apoiado pelo Acordo de Cooperação número NU2HGH000044 financiado pelos Centros de Controle e Prevenção de Doenças (CDC) dos EUA.</p>


</section>
</section>

</main> <!-- /main -->
<script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  var t = document.getElementsByClassName("webex-total_correct");
  for (var i = 0; i < t.length; i++) {
    p = t[i].parentElement;
    var correct = p.getElementsByClassName("webex-correct").length;
    var solvemes = p.getElementsByClassName("webex-solveme").length;
    var radiogroups = p.getElementsByClassName("webex-radiogroup").length;
    var selects = p.getElementsByClassName("webex-select").length;

    t[i].innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  console.log("webex: toggle hide");

  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* check answers */
check_func = function() {
  console.log("webex: check answers");

  var cl = this.parentElement.classList;
  if (cl.contains('unchecked')) {
    cl.remove("unchecked");
    this.innerHTML = "Hide Answers";
  } else {
    cl.add("unchecked");
    this.innerHTML = "Show Answers";
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  console.log("webex: check solveme");

  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");

  var cl = this.classList

  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;

  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }

  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

window.onload = function() {
  console.log("webex onload");
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  var check_sections = document.getElementsByClassName("webex-check");
  console.log("check:", check_sections.length);
  for (var i = 0; i < check_sections.length; i++) {
    check_sections[i].classList.add("unchecked");

    let btn = document.createElement("button");
    btn.innerHTML = "Show Answers";
    btn.classList.add("webex-check-button");
    btn.onclick = check_func;
    check_sections[i].appendChild(btn);

    let spn = document.createElement("span");
    spn.classList.add("webex-total_correct");
    check_sections[i].appendChild(spn);
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;

    solveme[i].insertAdjacentHTML("afterend", " <span class='webex-icon'></span>")
  }

  /* set up radiogroups */
  var radiogroups = document.getElementsByClassName("webex-radiogroup");
  for (var i = 0; i < radiogroups.length; i++) {
    radiogroups[i].onchange = radiogroups_func;
  }

  /* set up selects */
  var selects = document.getElementsByClassName("webex-select");
  for (var i = 0; i < selects.length; i++) {
    selects[i].onchange = select_func;
    selects[i].insertAdjacentHTML("afterend", " <span class='webex-icon'></span>")
  }

  update_total_correct();
}

</script>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">

<div class="cookie-consent-footer"><a href="#" id="open_preferences_center">Cookie Preferences</a></div></div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>