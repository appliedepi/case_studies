<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>cs_template</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="cs_template_files/libs/clipboard/clipboard.min.js"></script>
<script src="cs_template_files/libs/quarto-html/quarto.js"></script>
<script src="cs_template_files/libs/quarto-html/popper.min.js"></script>
<script src="cs_template_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="cs_template_files/libs/quarto-html/anchor.min.js"></script>
<link href="cs_template_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="cs_template_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="cs_template_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="cs_template_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="cs_template_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


<link rel="stylesheet" href="webex.css">
</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">



<section id="case-study-template-instructions" class="level1">
<h1>Case study template instructions</h1>
<section id="section-1.-considerations-for-standardised-coding-in-this-case-study-template" class="level2">
<h2 class="anchored" data-anchor-id="section-1.-considerations-for-standardised-coding-in-this-case-study-template">Section 1. Considerations for standardised coding in this case-study template</h2>
<section id="general-coding-framework-if-using-r" class="level3">
<h3 class="anchored" data-anchor-id="general-coding-framework-if-using-r">General coding framework if using R</h3>
<ul>
<li>When possible, use [tidyverse}, not {data.table}, no apply() functions, and avoid {base}</li>
<li>Use a vertical approach to writing coding - easier to read</li>
<li>Use spaces in your code</li>
<li>Use lowercase and underscores in your object names</li>
<li>For quick tabulations Use tabyl() from {janitor}, not table() from {base}</li>
<li>Use the magrittr pipe %&gt;%, not the native pipe</li>
<li>Use &lt;- not =</li>
</ul>
</section>
<section id="vocabulary" class="level3">
<h3 class="anchored" data-anchor-id="vocabulary">Vocabulary</h3>
<ul>
<li>Use <strong>“Data frame”</strong> instead of “dataset”</li>
<li>Use <strong>“Import (data)”</strong> - avoid saying “read in” which doesn’t align with the import() function, and can be confusing to people who are not native english speakers. Reserve the word “load” for packages (see below).</li>
<li>Use the word <strong>“load”</strong> for packages, as it aligns with the nomenclature of the p_load() function (or “install”, for the step prior to loading)</li>
<li>Use <strong>“Quotation marks”</strong> vs.&nbsp;“Inverted commas” - “inverted” is a complicated word for non-native English speakers</li>
<li><strong>Columns &amp; Rows</strong> vs.&nbsp;Variables &amp; Observations</li>
</ul>
</section>
<section id="including-figures" class="level3">
<h3 class="anchored" data-anchor-id="including-figures">Including figures</h3>
<p>When including figures make sure that they are aligned to the centre and that the size is correct. To insert figures in quarto follow Quarto’s <a href="https://quarto.org/docs/authoring/figures.html">guide</a></p>
<p>You can also use the code below to insert an image that has been saved in a subfolder, as per this example.</p>
<div class="cell" data-fig.margin="true">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="st">"images/Applied_Epi_logo.png"</span>, <span class="at">error =</span> F)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="images/Applied_Epi_logo.png" class="img-fluid" style="width:25.0%"></p>
</div>
</div>
</section>
<section id="including-questions" class="level3">
<h3 class="anchored" data-anchor-id="including-questions">Including questions</h3>
<p>Please, include questions throughout the case study. If the questions included are “open”, you can use the “Hints and Solutions” feature included in this template to suggest answers/reflections or propose coding solutions. If the questions foresee an specific answer, please use the {webexercises} package. You can find information and examples on how to use this package in their <a href="https://psyteachr.github.io/webexercises/articles/webexercises.html">website</a> and in their <a href="https://github.com/psyteachr/webexercises">GitHub</a>.</p>
<p>To ensure that {webexercises} features are enabled, follow their instructions and download their webex.css and webex.js files. Then, make sure that you include those files in the format section of the YML, as per this document.</p>
<p>Here you find an example of a multiple choice question:</p>
<div class="webex-check">
The time elapsed between exposure to a pathogen and the appearence of symptoms is known as:
<div id="radio_RLZWOWBAZQ" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_RLZWOWBAZQ" value=""> <span>Infectious period</span></label><label><input type="radio" autocomplete="off" name="radio_RLZWOWBAZQ" value=""> <span>Susceptibility</span></label><label><input type="radio" autocomplete="off" name="radio_RLZWOWBAZQ" value="answer"> <span>Incubation period</span></label><label><input type="radio" autocomplete="off" name="radio_RLZWOWBAZQ" value=""> <span>Communicability period</span></label>
</div>
</div>
</section>
<section id="unnumbered-sections" class="level3">
<h3 class="anchored" data-anchor-id="unnumbered-sections">Unnumbered sections</h3>
<p>Use {.unnumbered} after every heading so that they are not numbered in the final rendering</p>
<!-- Some considerations about about this quarto template 
-   Text within \<! \> will not show in your final document.
    -   The other parts such as slashes (///), dashes (-) and tildes (\~) are just aesthetic
    -   These comments are used to explain the code chunks.\
    -   We refer to functions in curly brackets, e.g. {dplyr} and functions end in brackets, e.g. count()\
    -   This comment will not show up when you knit the document.\
    -   You can delete them if you want.\ -->
<!--Below insert the name of the Case study. In curly brackets is the section reference name to be cross-references throughout the book -->
</section>
</section>
<section id="section-2.-fixed-sections-in-the-case-study" class="level2">
<h2 class="anchored" data-anchor-id="section-2.-fixed-sections-in-the-case-study">Section 2. Fixed sections in the case study</h2>
<section id="name-of-case-study-and-language-abbreviated-in-brackets-e.g.-eng-esp-fra" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="name-of-case-study-and-language-abbreviated-in-brackets-e.g.-eng-esp-fra">Name of case study and language (abbreviated) in brackets (e.g., ENG, ESP, FRA)</h3>
</section>
<section id="overview" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="overview">Overview</h3>
<table class="table">
<thead>
<tr class="header">
<th><strong>Case study characteristics</strong></th>
<th style="text-align: left;"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Name:</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td>Language:</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td>Tool:</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td>Location:</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td>Scale:</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td>Diseases:</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td>Keywords:</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td>Technical complexity:</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td>Methodological complexity:</td>
<td style="text-align: left;"></td>
</tr>
</tbody>
</table>
<p><em>On how to fill the table</em></p>
<p>Name: (Of the case study)&nbsp;–&gt; Language: Full name of the language (e.g., English, Spanish, French….)<br>
Tool: Specify tool (e.g., R, Excel, STATA…)<br>
Location: Geographical country where the case study is based at<br>
Scale: Local, Regional, National or Global&nbsp; Disease: Specify pathogen&nbsp; Keywords: (Examples: Outbreak investigation, GIS, TSA…)&nbsp; Technical complexity: * Basic: Involves importing and cleaning data, common visualisations and/or descriptive analysis<br>
* Intermediate: Includes linkage of several datasets, changing the shape of data, more complex visualisations, simple statistical analysis (e.g., uni/multivariate regression), simple iterations (e.g., loops) and/or creation of automatic reports<br>
*Advanced: Management of large databases or download of databases from repositories, more complex iterations, use of specific packages and functions (e.g., for survival analysis or TSA) and/or complex automatic reports<br>
</p>
<p>Methodological complexity: <em>Basic: Case study includes only descriptive analysis and/or hypothesis testing (e.g., Chi square, student t test..)<br>
</em>Intermediate: Case study includes more complex methods such as univariate/multivariate regression analysis, standardisation and/or alert thresholds, for example<br>
*Advanced: Case study includes complex methods that are outside routine field epidemiology. For example, Time series analysis, survival analysis, multilevel analysis etc.<br>
</p>
<p><strong><em>Authorship</em></strong><br>
Original authors: XXXX<br>
Data source: XXXX<br>
Adapted by: XXXX<br>
</p>
</section>
<section id="instructions" class="level3">
<h3 class="anchored" data-anchor-id="instructions">Instructions</h3>
<section id="getting-help" class="level4">
<h4 class="anchored" data-anchor-id="getting-help">Getting Help</h4>
<p>There are several ways to get help:</p>
<ol type="1">
<li>Look for the “hints” and solutions (see below)</li>
<li>Post a question in <a href="www.community.appliedepi.org">Applied Epi Community</a> with reference to this case study</li>
</ol>
</section>
<section id="hints-and-solutions" class="level4">
<h4 class="anchored" data-anchor-id="hints-and-solutions">Hints and Solutions</h4>
<p>Here is what the “helpers” look like:</p>
<!--Note that this is the way of including hints and explanations to the solutions -->
<!--
NOTE: Below is the hint (all within details tags collapsed)
-->
<details>
<summary style="text-decoration: underline; color: darkgreen;">
<p><svg aria-hidden="true" role="img" viewbox="0 0 384 512" style="height:1em;width:0.75em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:gold;overflow:visible;position:relative;"><path d="M297.2 248.9C311.6 228.3 320 203.2 320 176c0-70.7-57.3-128-128-128S64 105.3 64 176c0 27.2 8.4 52.3 22.8 72.9c3.7 5.3 8.1 11.3 12.8 17.7l0 0c12.9 17.7 28.3 38.9 39.8 59.8c10.4 19 15.7 38.8 18.3 57.5H109c-2.2-12-5.9-23.7-11.8-34.5c-9.9-18-22.2-34.9-34.5-51.8l0 0 0 0c-5.2-7.1-10.4-14.2-15.4-21.4C27.6 247.9 16 213.3 16 176C16 78.8 94.8 0 192 0s176 78.8 176 176c0 37.3-11.6 71.9-31.4 100.3c-5 7.2-10.2 14.3-15.4 21.4l0 0 0 0c-12.3 16.8-24.6 33.7-34.5 51.8c-5.9 10.8-9.6 22.5-11.8 34.5H226.4c2.6-18.7 7.9-38.6 18.3-57.5c11.5-20.9 26.9-42.1 39.8-59.8l0 0 0 0 0 0c4.7-6.4 9-12.4 12.7-17.7zM192 128c-26.5 0-48 21.5-48 48c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-44.2 35.8-80 80-80c8.8 0 16 7.2 16 16s-7.2 16-16 16zm0 384c-44.2 0-80-35.8-80-80V416H272v16c0 44.2-35.8 80-80 80z"></path></svg> Click to read a hint</p>
</summary>
<p><br></p>
<p>Here you will see a helpful hint!</p>
<p><br></p>
</details>
<!--
NOTE: Below is the solution (all within details tags collapsed)
-->
<details>
<summary style="text-decoration: underline; color: red;">
<p><svg aria-hidden="true" role="img" viewbox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:red;overflow:visible;position:relative;"><path d="M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg>Click to see the solution</p>
</summary>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>ebola_linelist <span class="sc">%&gt;%</span> </span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    age <span class="sc">&gt;</span> <span class="dv">25</span>,</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    district <span class="sc">==</span> <span class="st">"Bolo"</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Here is more explanation about why the solution works.</p>
<p><br></p>
</details>
<!--
NOTE: End of solution
-->
<!-- NOTE ABOUT SOLUTIONS: When using {webexercises} the solution will be automatically highlighted, so you can change (if appropriate) the feature "Click here to see the solution" to  "Click here to see the explanation of the solution" -->
</section>
<section id="posting-a-question-in-the-community-forum" class="level4">
<h4 class="anchored" data-anchor-id="posting-a-question-in-the-community-forum">Posting a question in the Community Forum</h4>
<p>… description here about posting in Community… TO BE COMPLETED BY APPLIED EPI</p>
</section>
<section id="terms-of-use" class="level4">
<h4 class="anchored" data-anchor-id="terms-of-use">Terms of Use</h4>
<!-- Describe the licencing and other appropriate information about Terms of use or any other disclaimer -->
</section>
</section>
<section id="feedback-suggestions" class="level3">
<h3 class="anchored" data-anchor-id="feedback-suggestions">Feedback &amp; suggestions</h3>
<ul>
<li>You can write feedback and suggestions on this case study at the <a href="https://github.com/appliedepi/case_studies">GitHub issues page</a></li>
<li>Alternatively email us at: <a href="mailto:contact@appliedepi.org">contact@appliedepi.org</a></li>
</ul>
<div style="page-break-after: always;"></div>
</section>
<section id="version-and-revisions" class="level3">
<h3 class="anchored" data-anchor-id="version-and-revisions">Version and revisions</h3>
<p>Write date of first version</p>
<p>Write any revisions made to the case study</p>
<table class="table">
<thead>
<tr class="header">
<th>Date</th>
<th style="text-align: left;">Changes made</th>
<th style="text-align: right;">Version</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td></td>
<td style="text-align: left;"></td>
<td style="text-align: right;"></td>
</tr>
<tr class="even">
<td></td>
<td style="text-align: left;"></td>
<td style="text-align: right;"></td>
</tr>
<tr class="odd">
<td></td>
<td style="text-align: left;"></td>
<td style="text-align: right;"></td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
</section>
<section id="guidance" class="level3">
<h3 class="anchored" data-anchor-id="guidance">Guidance</h3>
<section id="objectives-of-this-case-study" class="level4">
<h4 class="anchored" data-anchor-id="objectives-of-this-case-study">Objectives of this case study</h4>
<p>Here write an introduction to the case study specifying: 1. Background 2. Objectives/Learning outcomes 3. What the users of the case study will learn 4. Online references to both R code (e.g., EpiRhandbook) and to methodological documents</p>
</section>
<section id="previous-level-of-expertise-assumed" class="level4">
<h4 class="anchored" data-anchor-id="previous-level-of-expertise-assumed">Previous level of expertise assumed</h4>
<p>Add information of previous expertise needed to follow the case study. This includes expertise on:</p>
<ul>
<li>Epidemiological experience (e.g., knowledge of the foundations of survival analysis)</li>
<li>Software experience (e.g, basic knowledge of R or Rmarkdown)</li>
</ul>
<p>If appropriate and possible, include references that can help the user to understand the level of expertise assumed</p>
</section>
<section id="preparation-for-the-case-study" class="level4">
<h4 class="anchored" data-anchor-id="preparation-for-the-case-study">Preparation for the case study</h4>
<p>Include the stepts needed to start replicating the analysis of the case study</p>
<p>For example:</p>
<ol type="1">
<li>Download folder named XXX and extract contents in the local laptop</li>
<li>Create an Rstudio project in the folder XXX (they already come with the project)</li>
<li>Subfolder data contains XXXX</li>
<li>Subfolder scripts should be used to save any scripts related to the analysis</li>
<li>Subfolder outputs will be used to store all outputs (tables, graphs, documents) that are the result of the analysis</li>
</ol>
</section>
</section>
</section>
<section id="section-3.-specific-to-the-case-study" class="level2">
<h2 class="anchored" data-anchor-id="section-3.-specific-to-the-case-study">Section 3. Specific to the case study</h2>
<p>Finally, add the different sections of the case study. Remember to include questions +/- hints and solutions as appropriate.</p>
<p>We acknowledge that every case study is different, so we trust you to give it the most relevant structure. However, consider including the following sections:</p>
<ol type="1">
<li><p>Data import<br>
If using R, we recommend to use the import() function from the {rio} package to import data, and the here() function from the {here} package to recreate the file path in a reproducible way.</p></li>
<li><p>Data cleaning and preparation<br>
If using R, we prefer, to use {dplyr} functions linked through the {magrittr} pipe.</p></li>
<li><p>Descriptive analysis<br>
If relevant, include a section on descriptive analysis divided into three parts: time, place, person. If using R, for the graphs, we recommend using {ggplot2}. For tables, {flextable}</p></li>
<li><p>Analysis If appropriate include in a separate section more advanced analysis, such as multivariate regression, time series analysis or survival analysis.</p></li>
<li><p>Interpretation and reflection Include this section if relevant</p></li>
</ol>
<p>For case studies in R: remember to be consistent with the style represented by the <a href="https://epirhandbook.com/en/">EpiRhandbook</a>.</p>
<p>Thank you for your work!</p>
</section>
</section>

</main>
<!-- /main column -->
<script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  var t = document.getElementsByClassName("webex-total_correct");
  for (var i = 0; i < t.length; i++) {
    p = t[i].parentElement;
    var correct = p.getElementsByClassName("webex-correct").length;
    var solvemes = p.getElementsByClassName("webex-solveme").length;
    var radiogroups = p.getElementsByClassName("webex-radiogroup").length;
    var selects = p.getElementsByClassName("webex-select").length;

    t[i].innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  console.log("webex: toggle hide");

  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* check answers */
check_func = function() {
  console.log("webex: check answers");

  var cl = this.parentElement.classList;
  if (cl.contains('unchecked')) {
    cl.remove("unchecked");
    this.innerHTML = "Hide Answers";
  } else {
    cl.add("unchecked");
    this.innerHTML = "Show Answers";
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  console.log("webex: check solveme");

  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");

  var cl = this.classList

  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;

  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }

  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

window.onload = function() {
  console.log("webex onload");
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  var check_sections = document.getElementsByClassName("webex-check");
  console.log("check:", check_sections.length);
  for (var i = 0; i < check_sections.length; i++) {
    check_sections[i].classList.add("unchecked");

    let btn = document.createElement("button");
    btn.innerHTML = "Show Answers";
    btn.classList.add("webex-check-button");
    btn.onclick = check_func;
    check_sections[i].appendChild(btn);

    let spn = document.createElement("span");
    spn.classList.add("webex-total_correct");
    check_sections[i].appendChild(spn);
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;

    solveme[i].insertAdjacentHTML("afterend", " <span class='webex-icon'></span>")
  }

  /* set up radiogroups */
  var radiogroups = document.getElementsByClassName("webex-radiogroup");
  for (var i = 0; i < radiogroups.length; i++) {
    radiogroups[i].onchange = radiogroups_func;
  }

  /* set up selects */
  var selects = document.getElementsByClassName("webex-select");
  for (var i = 0; i < selects.length; i++) {
    selects[i].onchange = select_func;
    selects[i].insertAdjacentHTML("afterend", " <span class='webex-icon'></span>")
  }

  update_total_correct();
}

</script>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>